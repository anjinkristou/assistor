{"version":3,"sources":["auth.ts","dataProvider.ts","authProvider.ts","layout/Logo.tsx","layout/AppBar.tsx","layout/SubMenu.tsx","companies/sectors.ts","companies/CompanyAvatar.tsx","companies/CountryField.tsx","companies/CompanyCard.tsx","companies/GridList.tsx","companies/relations.ts","tags/TagChip.tsx","components/CollapsibleListFilter.tsx","companies/CompanyListFilter.tsx","companies/SelectAllButton.tsx","companies/CompanyList.tsx","companies/sizes.ts","companies/DistributorInput.tsx","companies/CompanyCreate.tsx","contacts/Avatar.tsx","misc/Status.tsx","tags/TagsList.tsx","companies/LogoField.tsx","tags/colors.ts","tags/TagsListEdit.tsx","components/CollapsibleAside.tsx","companies/CompanyAside.tsx","deals/stages.ts","notes/StatusSelector.tsx","notes/NewNote.tsx","notes/Note.tsx","notes/NotesIterator.tsx","products/ProductAvatar.tsx","products/ProductCard.tsx","products/ProductGridList.tsx","companies/CompanyShow.tsx","companies/CompanyEdit.tsx","companies/index.ts","contacts/ContactAside.tsx","contacts/ContactShow.tsx","contacts/ContactListFilter.tsx","contacts/ContactList.tsx","contacts/ContactEdit.tsx","contacts/ContactCreate.tsx","contacts/index.tsx","tasks/TaskAside.tsx","tasks/TaskShow.tsx","tasks/status.ts","tasks/TaskStatus.tsx","tasks/TaskListFilter.tsx","tasks/MarkDoneButton.tsx","tasks/TaskList.tsx","tasks/TaskEdit.tsx","tasks/TaskCreate.tsx","tasks/index.ts","deals/DealCard.tsx","deals/DealColumn.tsx","deals/DealListContent.tsx","deals/types.ts","deals/DealCreate.tsx","deals/ContactList.tsx","deals/DealShow.tsx","deals/OnlyMineInput.tsx","deals/DealList.tsx","deals/index.ts","products/ProductListFilter.tsx","products/ProductList.tsx","products/CreatePropertyType.tsx","products/PropertyFormIterator.tsx","products/ProductCreate.tsx","products/ProductImageField.tsx","products/ProductAside.tsx","products/ProductShow.tsx","products/ProductEdit.tsx","products/index.ts","productFamilies/Avatar.tsx","productFamilies/ProductFamilyListFilter.tsx","productFamilies/categories.ts","productFamilies/ProductFamilyList.tsx","productFamilies/ProductFamilyCreate.tsx","productFamilies/ProductFamilyAside.tsx","productFamilies/ProductFamilyEdit.tsx","productFamilies/ProductFamilyShow.tsx","productFamilies/index.ts","layout/Menu.tsx","layout/themes.ts","layout/Layout.tsx","layout/Login.tsx","dashboard/HotContacts.tsx","dashboard/LatestNotes.tsx","dashboard/CompaniesMap.tsx","dashboard/Dashboard.tsx","auth/RegisterForm.tsx","auth/RegisterPage.tsx","configuration/actions.ts","configuration/Configuration.tsx","customRoutes.tsx","i18n/en.ts","App.tsx","reportWebVitals.js","index.tsx"],"names":["CREDENTIALS_LOCAL_STORAGE_ITEM","setCredentials","credentials","localStorage","setItem","JSON","stringify","getCredentials","raw","getItem","parse","getList","resource","params","a","token","access_token","config","headers","Authorization","axios","get","response","Promise","resolve","data","reject","message","status","getOne","getMany","getManyReference","create","post","update","put","updateMany","deleteOne","delete","deleteMany","dataProvider","baseURL","refreshToken","refresh_token","undefined","login","username","password","decodedToken","decodeJwt","permissions","logout","removeItem","register","first_name","last_name","email","getIdentity","id","fullName","avatar","checkError","authProvider","checkAuth","error","getPermissions","useStyles","makeStyles","theme","root","display","breakpoints","down","spacing","logoIcon","color","palette","secondary","light","logoText","primary","Logo","classes","className","Typography","variant","title","flex","textOverflow","whiteSpace","overflow","spacer","ConfigurationMenu","forwardRef","props","ref","useTranslate","MenuItemLink","to","primaryText","leftIcon","onClick","sidebarIsOpen","CustomUserMenu","UserMenu","CustomAppBar","AppBar","elevation","userMenu","icon","minWidth","transition","paddingLeft","sidebarIsClosed","SubMenu","handleToggle","isOpen","name","children","dense","translate","useSelector","state","admin","ui","sidebarOpen","header","MenuItem","button","ListItemIcon","Tooltip","placement","Collapse","in","timeout","unmountOnExit","List","component","disablePadding","sectors","map","sector","width","height","backgroundColor","img","objectFit","small","large","CompanyAvatar","record","size","logo","src","process","alt","imgProps","clsx","image","sizeInPixel","medium","CountryField","source","ImageField","paper","flexDirection","justifyContent","padding","position","identity","alignItems","textAlign","marginTop","stats","singleStat","statIcon","marginRight","checkbox","top","right","identifier","lrft","CompanyCard","useState","setElevation","useListContext","onToggleItem","ids","loaded","selectedIds","Link","linkToRecord","underline","onMouseEnter","onMouseLeave","Paper","Checkbox","edge","checked","includes","tabIndex","disableRipple","e","stopPropagation","Box","ReferenceField","reference","link","relation","Chip","label","SelectField","choices","style","marginBottom","nb_contacts","nb_notes","gridList","flexWrap","gap","grey","LoadingGridList","nbChildren","fn","key","Array","from","length","_","LoadedGridList","GridList","relations","TagChip","border","cursor","order","sideBig","marginLeft","sideSmall","up","container","drawerContent","maxWidth","CollapsibleListFilter","setOpen","childrenWithProps","React","child","IconButton","Drawer","anchor","open","onClose","CompanyListFilter","useGetIdentity","useGetList","page","perPage","field","FilterLiveSearch","FilterList","FilterListItem","value","tags","sales_id","SelectAllButton","onSelect","Button","toolbar","createButton","importOptions","parseConfig","dynamicTyping","CompanyListActions","TopToolbar","SortButton","fields","ExportButton","CreateButton","basePath","sizes","DistributorInput","AutocompleteInput","optionText","country_iso","allowEmpty","resettable","inline","CustomLayout","CardContent","paddingTop","ml","CustomDivider","mb","Divider","Avatar","charAt","getColorFromStatus","Status","borderRadius","bgcolor","ColoredChipField","ChipField","TagsList","ReferenceArrayField","SingleFieldList","linkType","LogoField","colors","TagsListEdit","newTagName","setNewTagName","newTagColor","setNewTagColor","anchorEl","setAnchorEl","version","setVersion","disabled","setDisabled","allTags","useGetMany","enabled","useUpdate","useCreate","unselectedTagIds","filter","handleAddTag","handleOpenCreateDialog","tag","mt","onDelete","tagId","handleDeleteTag","event","currentTarget","Boolean","Dialog","onSubmit","preventDefault","onSuccess","v","DialogTitle","DialogContent","autoFocus","fullWidth","onChange","target","selected","handleClick","DialogActions","type","margin","RoundButton","CollapsibleAside","EditButton","ShowButton","CompanyAside","AsideContent","href","website","rel","linkedIn","TextField","distributor_id","phone_number","DateField","options","year","month","day","FunctionField","render","stages","stageNames","opportunity","won","lost","delayed","stageChoices","StatusSelector","setStatus","select","buttonSwitcher","previewConatiner","previewRaw","previewMarkdown","paddingRight","borderColor","main","preview","NewNote","showStatus","setPreview","useRecordContext","useResourceContext","text","setText","getCurrentDate","date","setDate","loading","refresh","useRefresh","notify","useNotify","foreignKeyMapping","last_seen","multiline","remarkPlugins","remarkGfm","now","Date","setMinutes","getMinutes","getTimezoneOffset","toISOString","slice","contacts","deals","companies","products","metadata","textarea","paddingBottom","lineHeight","buttons","cancel","content","paragraph","fontFamily","typography","fontSize","body1","visibility","Note","note","isLast","isHover","setHover","isEditing","setEditing","noteText","setNoteText","useDelete","mutationMode","handleDelete","showTime","locales","dateStyle","timeStyle","FilledInput","NotesIterator","index","ProductAvatar","console","log","model","family","ProductCard","nb_properties","Skeleton","animation","ProductGridList","CompanyShowContent","useShowContext","setValue","Card","gridGap","Tabs","indicatorColor","textColor","newValue","Tab","nb_deals","nb_products","ReferenceManyField","sort","TabPanel","other","role","hidden","ContactsIterator","contact","ListItem","RouterLink","ListItemAvatar","ListItemText","ListItemSecondaryAction","formatDistance","CreateRelatedContactButton","pathname","company_id","startIcon","DealsIterator","deal","stage","amount","toLocaleString","notation","currency","currencyDisplay","minimumSignificantDigits","updated_at","list","actions","aside","filterDefaultValues","pagination","Pagination","rowsPerPageOptions","Create","SimpleForm","initialValues","redirect","TextInput","validate","required","SelectInput","formClassName","FormDataConsumer","formData","ReferenceInput","ReferenceArrayInput","AutocompleteArrayInput","helperText","sales","edit","show","ShowBase","BusinessIcon","ContactAside","TasksIterator","task","disableGutters","EmailField","gender","background","ContactShowContent","ContactListFilter","last_seen_gte","endOfYesterday","last_seen_lte","startOfWeek","startOfMonth","subMonths","ContactListContent","SimpleListLoading","hasLeftAvatarOrIcon","hasSecondaryText","ContactListActions","Spacer","ContactEditContent","useEditContext","save","FormWithRedirect","formProps","mr","BooleanInput","Toolbar","omit","EditBase","transform","ContactsIcon","TaskAside","TaskShowContent","statuses","TaskStatus","statusItem","find","item","statusColor","TaskListFilter","due_date_gte","due_date_lte","doneState","MarkDoneButton","BulkUpdateButton","TaskListContent","due_date","useActionStyles","TaskListActions","TaskBulkActionButtons","BulkDeleteButton","TaskEditContent","DateInput","bulkActionButtons","FormatListBulletedIcon","cardContent","cardText","DealCard","useRedirect","draggableId","String","provided","snapshot","draggableProps","dragHandleProps","innerRef","opacity","isDragging","p","gutterBottom","borderTopLeftRadius","borderTopRightRadius","droppable","DealColumn","dealIds","align","droppableId","droppableProvided","droppableProps","isDraggingOver","placeholder","initialDeals","reduce","obj","getDealsByColumn","columns","acc","push","forEach","b","DealListContent","currentSort","filterValues","setDeals","useContext","DataProviderContext","useMutation","payload","useEffect","newDeals","isEqual","onDragEnd","result","destination","column","sourceDeal","destinationDeal","splice","Number","columnDeals","all","previousData","sourceColumn","destinationColumn","sourceDeals","destinationDeals","pop","typeChoices","DealCreate","useDataProvider","then","oldDeal","rows","defaultValue","NumberInput","ul","listStyle","li","ContactList","dialog","DealShow","DealShowContent","format","start_at","minHeight","description","OnlyMineInput","alwaysOn","useListFilterContext","displayedFilters","setFilters","FormControlLabel","control","Switch","newFilterValues","defaultProps","dealFilters","SearchInput","DealActions","FilterButton","filters","path","match","MonetizationOnIcon","ProductListFilter","familyData","familyIds","family_id","ProductListActions","CreatePropertyType","useCreateSuggestionContext","onCancel","onCreate","setName","unit","setUnit","synonyms","setSynonyms","PropertyFormIterator","SimpleFormIterator","classNames","propertyContainer","ProductImageField","ProductAside","ProductShowContent","addLabel","Datagrid","useTheme","TabbedForm","FormTab","ArrayInput","FiberManualRecordIcon","ProductFamilyListFilter","categories","category","ProductFamilyListContent","ProductFamilyListActions","ProductFamilyAside","ProductFamilyEditContent","ProductFamilyShowContent","CategoryIcon","transitions","easing","sharp","duration","leavingScreen","closed","Menu","menuCrm","menuProduct","menuCustomers","setState","menu","classnames","DashboardMenuItem","_scrollToTop","tasks","productFamilies","darkTheme","sidebar","overrides","MuiAppBar","colorSecondary","MuiButtonBase","lightTheme","dark","contrastText","default","shape","RaMenuItemLink","borderLeft","active","MuiPaper","elevation1","boxShadow","backgroundClip","MuiButton","contained","MuiLinearProgress","colorPrimary","barColorPrimary","MuiFilledInput","MuiSnackbarContent","Layout","appBar","backgroundImage","backgroundRepeat","backgroundSize","card","hint","form","input","renderInput","meta","touched","inputProps","Form","withTypes","Login","setLoading","useLogin","location","useLocation","auth","nextPathname","catch","values","errors","handleSubmit","noValidate","CardActions","CircularProgress","thickness","Notification","LoginWithTheme","ThemeProvider","createTheme","HotContacts","isInteger","contactData","contactIds","contactTotal","total","contactsLoaded","SimpleList","secondaryText","addSuffix","leftAvatar","noteTextText","LatestNotes","contactNotesData","contactNotesIds","contactNotesLoaded","dealNotesData","dealNotesIds","dealNotesLoaded","companyNotesData","companyNotesIds","companyNotesLoaded","allNotes","concat","valueOf","NoteSource","Deal","Contact","Company","Map","memo","setTooltipContent","colorScale","scaleQuantile","domain","max","nb_companies","range","projection","projectionConfig","rotate","scale","center","zoom","geography","geographies","geo","ISO_A3","properties","cur","iso3","fill","stroke","NAME","POP_EST","rsmKey","CompaniesMap","setContent","Dashboard","Grid","xs","sm","Input","RegisterForm","redirectTo","useSafeSetState","submit","confirm","Container","autoComplete","Register","RegisterWithTheme","changeTheme","Configuration","locale","useLocale","setLocale","useSetLocale","dispatch","useDispatch","Title","customRoutes","RouteWithoutLayout","exact","customEnglishMessages","englishMessages","defaultTheme","i18nProvider","polyglotI18nProvider","messages","App","Admin","loginPage","layout","dashboard","Resource","ListGuesser","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.6eb40521.chunk.js","sourcesContent":["import axios, { AxiosError } from 'axios';\n\nconst baseURL = \"/auth\";\n\nexport type Credentials = {\n  access_token: string;\n  refresh_token: string;\n  permissions: string;\n};\n\nconst CREDENTIALS_LOCAL_STORAGE_ITEM = \"credentials\";\n\nexport function isAuthenticated(): boolean {\n  return Boolean(getCredentials());\n}\n\nexport function setCredentials(credentials: Credentials) {\n  localStorage.setItem(\n    CREDENTIALS_LOCAL_STORAGE_ITEM,\n    JSON.stringify(credentials)\n  );\n}\n\nexport function getCredentials(): Credentials | null {\n  const raw = localStorage.getItem(CREDENTIALS_LOCAL_STORAGE_ITEM);\n  if (raw === null) {\n    return null;\n  }\n  return JSON.parse(raw);\n}\n\nexport function removeCredentials(): void {\n  localStorage.removeItem(CREDENTIALS_LOCAL_STORAGE_ITEM);\n}\n","import axios, { AxiosError } from 'axios';\nimport { \n    GetListResult,\n    GetOneResult,\n    GetManyResult,\n    GetManyReferenceResult,\n    CreateResult,\n    UpdateResult,\n    UpdateManyResult,\n    DeleteResult,\n    DeleteManyResult,\n}  from 'react-admin'\n\nimport {\n    getCredentials,\n} from \"./auth\"\n\n\nconst getList = async (resource: string, params: any): Promise<GetListResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetListResult<any>>(`/${resource}/list`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getOne = async (resource: string, params: any): Promise<GetOneResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetOneResult<any>>(`/${resource}/item`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getMany = async (resource: string, params: any): Promise<GetManyResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetManyResult<any>>(`/${resource}/items`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getManyReference = async (resource: string, params: any): Promise<GetManyReferenceResult<any>>  => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetManyReferenceResult<any>>(`/${resource}/refs`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst create = async (resource: string, params: any): Promise<CreateResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.post<CreateResult<any>>(`/${resource}/item`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst update = async (resource: string, params: any): Promise<UpdateResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.put<UpdateResult<any>>(`/${resource}/item`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst updateMany = async (resource: string, params: any): Promise<UpdateManyResult> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.put<UpdateManyResult>(`/${resource}/items`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst deleteOne = async (resource: string, params: any): Promise<DeleteResult<any>> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.delete<DeleteResult<any>>(`/${resource}/item`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst deleteMany = async (resource: string, params: any): Promise<DeleteManyResult> => {\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.delete<DeleteManyResult>(`/${resource}/items`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nexport const dataProvider = {\n    getList:    getList,\n    getOne:     getOne,\n    getMany:    getMany,\n    getManyReference: getManyReference,\n    create:     create,\n    update:     update,\n    updateMany: updateMany,\n    delete:     deleteOne,\n    deleteMany: deleteMany,\n}\n","import { AuthProvider } from 'react-admin';\nimport decodeJwt, { JwtPayload } from 'jwt-decode';\nimport axios, { AxiosError } from 'axios';\nimport {\n    isAuthenticated,\n    setCredentials,\n    getCredentials,\n    removeCredentials,\n} from \"./auth\"\n\ninterface RefreshToken {\n    access_token: string;\n  }\n\nconst baseURL = \"/auth\";\n\ninterface Permission {\n    permissions: string;\n}\n\ninterface LoginToken {\n    access_token: string;\n    refresh_token: string;\n}\n\ninterface UserIdentity {\n    id: number;\n    fullName: string;\n    avatar: string;\n}\n\nconst refreshToken = async () => {\n    const credentials = getCredentials();\n    if(!credentials) return;\n  \n    const token = credentials?.refresh_token;\n  \n    const config = {\n        headers: { Authorization: `Bearer ${token}` }\n    };\n    let response = await axios.post<RefreshToken>(`${baseURL}/refresh`, undefined, config)\n    const { access_token } = response.data;\n    setCredentials({\n        ...credentials,\n        access_token: access_token,\n    });\n};\n\n\nconst login = async ({ username, password }: {username: string; password:string;}) => {\n    try{\n        const response = await axios.post<LoginToken>(`${baseURL}/login`, { username, password })\n        const { access_token, refresh_token } = response.data;\n        const decodedToken = decodeJwt<Permission>(access_token);\n        setCredentials({\n            access_token,\n            refresh_token,\n            permissions: decodedToken.permissions,\n        });\n        return Promise.resolve();\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst logout = async () => {\n    await axios.get(`${baseURL}/logout`)\n    removeCredentials();\n    return Promise.resolve('/login');\n}\n\nconst register = async ({ \n    first_name,\n    last_name,\n    email,\n    username, \n    password\n}: { \n    first_name: string;\n    last_name: string;\n    email: string;\n    username: string;\n    password: string;\n}) => {\n    try{\n    const response = await axios.post<ResponseType>(`${baseURL}/register`, { \n            first_name,\n            last_name,\n            email,\n            username, \n            password\n        })\n\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n}\n\nconst getIdentity = async () => { \n    try{\n        refreshToken();\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` }\n        };\n        let response = await axios.get<UserIdentity>(`${baseURL}/user`, config)\n        const { id, fullName, avatar } = response.data;\n        \n        return Promise.resolve({ id, fullName, avatar });\n    } catch (error: any) {\n        // const response = error.response;\n        // removeCredentials();\n        // return Promise.reject({message: response.data, status: response.status});\n\n        return Promise.reject(error);\n    }\n };\n\n const checkError = async ({ status }: any) => {\n    if (status === 401 || status === 403 || status === 422) {\n        try{\n            refreshToken();\n        } catch (error: any) {\n            return Promise.reject();\n        }\n    }\n    return Promise.resolve();\n};\n\nconst checkAuth = () => {\n    try{\n        refreshToken();\n        return Promise.resolve();\n    } catch (error: any) {\n        return Promise.reject();\n    }\n}\n\nconst getPermissions = () => {\n    try{\n        refreshToken();\n        return Promise.resolve();\n    } catch (error: any) {\n        return Promise.reject();\n    }\n}\n\nexport const authProvider: AuthProvider =  {\n    login: login,\n    checkError: checkError,\n    checkAuth: checkAuth,\n    logout: logout,\n    getIdentity: getIdentity,\n    getPermissions: getPermissions,\n    register: register,\n};","import * as React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        [theme.breakpoints.down(\"xs\")]: {\n            display: \"none\",\n        },\n        alignItems:\"center\",\n        gap: theme.spacing(1)\n    },\n    logoIcon: {\n        color: theme.palette.secondary.light,\n    },\n    logoText: {\n        color: theme.palette.primary.light,\n    }\n}));\n\nconst Logo = () => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <AccountBalanceWalletIcon className={classes.logoIcon} />\n            <Typography variant=\"h6\" className={classes.logoText} >\n                Assistor\n            </Typography>\n        </div>\n    );\n};\n\nexport default Logo;\n","import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { AppBar, UserMenu, MenuItemLink, useTranslate } from 'react-admin';\nimport Typography from '@material-ui/core/Typography';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Logo from './Logo';\n\nconst useStyles = makeStyles({\n    title: {\n        flex: 1,\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n    },\n    spacer: {\n        flex: 1,\n    },\n});\n\nconst ConfigurationMenu = forwardRef<any, any>((props, ref) => {\n    const translate = useTranslate();\n    return (\n        <MenuItemLink\n            ref={ref}\n            to=\"/configuration\"\n            primaryText=\"Configuration\"\n            leftIcon={<SettingsIcon />}\n            onClick={props.onClick}\n            sidebarIsOpen\n        />\n    );\n});\n\nconst CustomUserMenu = (props: any) => (\n    <UserMenu {...props}>\n        <ConfigurationMenu />\n    </UserMenu>\n);\n\nconst CustomAppBar = (props: any) => {\n    const classes = useStyles();\n    return (\n        <AppBar {...props} elevation={1} userMenu={<CustomUserMenu />}>\n            <Typography\n                variant=\"h6\"\n                color=\"inherit\"\n                className={classes.title}\n                id=\"react-admin-title\"\n            />\n            <Logo />\n            <span className={classes.spacer} />\n        </AppBar>\n    );\n};\n\nexport default CustomAppBar;\n","import * as React from 'react';\nimport { Fragment, ReactElement, ReactNode } from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n    List,\n    MenuItem,\n    ListItemIcon,\n    Typography,\n    Collapse,\n    Tooltip,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport { useTranslate, ReduxState } from 'react-admin';\n\nconst useStyles = makeStyles(theme => ({\n    icon: { minWidth: theme.spacing(5) },\n    sidebarIsOpen: {\n        '& a': {\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\n            paddingLeft: theme.spacing(4),\n        },\n    },\n    sidebarIsClosed: {\n        '& a': {\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\n            paddingLeft: theme.spacing(2),\n        },\n    },\n}));\n\ninterface Props {\n    dense: boolean;\n    handleToggle: () => void;\n    icon: ReactElement;\n    isOpen: boolean;\n    name: string;\n    children: ReactNode;\n}\n\nconst SubMenu = (props: Props) => {\n    const { handleToggle, isOpen, name, icon, children, dense } = props;\n    const translate = useTranslate();\n    const classes = useStyles();\n    const sidebarIsOpen = useSelector<ReduxState, boolean>(\n        state => state.admin.ui.sidebarOpen\n    );\n\n    const header = (\n        <MenuItem dense={dense} button onClick={handleToggle}>\n            <ListItemIcon className={classes.icon}>\n                {isOpen ? <ExpandMore /> : icon}\n            </ListItemIcon>\n            <Typography variant=\"inherit\" color=\"textSecondary\">\n                {translate(name)}\n            </Typography>\n        </MenuItem>\n    );\n\n    return (\n        <Fragment>\n            {sidebarIsOpen || isOpen ? (\n                header\n            ) : (\n                <Tooltip title={translate(name)} placement=\"right\">\n                    {header}\n                </Tooltip>\n            )}\n            <Collapse in={isOpen} timeout=\"auto\" unmountOnExit>\n                <List\n                    dense={dense}\n                    component=\"div\"\n                    disablePadding\n                    className={\n                        sidebarIsOpen\n                            ? classes.sidebarIsOpen\n                            : classes.sidebarIsClosed\n                    }\n                >\n                    {children}\n                </List>\n            </Collapse>\n        </Fragment>\n    );\n};\n\nexport default SubMenu;\n","export const sectors = [\n    'Factory Automation',\n    'Logistics Automation',\n    'Warehouse Automation',\n    'Consulting & Development',\n].map(sector => ({ id: sector, name: sector }));\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport clsx from 'clsx';\n\nimport { Company } from '../types';\n\nconst useStyles = makeStyles({\n    avatar: {\n        width: 60,\n        height: 60,\n        backgroundColor: 'aliceblue',\n    },\n    img: {\n        objectFit: 'contain',\n    },\n    small: {\n        width: 20,\n        height: 20,\n    },\n    large: {\n        width: 40,\n        height: 40,\n    },\n});\n\nexport const CompanyAvatar = ({\n    record,\n    size = 'large',\n}: {\n    record?: Company;\n    size?: 'small' | 'large';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    if(!record.logo) return (\n        <Avatar\n            alt={record.name}\n            className={classes.avatar}\n        >\n            <BusinessIcon />\n        </Avatar>\n    )\n    return (\n        <Avatar\n            src={process.env.PUBLIC_URL + record.logo}\n            alt={record.name}\n            className={classes.avatar}\n            imgProps={{ className: clsx(classes.img, classes[size]) }}\n        />\n    );\n};\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageField } from 'react-admin';\n\nexport interface StyleProps {\n    width: number;\n}\n\nconst useStyles = makeStyles<Theme, StyleProps>(theme => ({\n    image: {\n        width: props => props.width\n    },\n}));\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const CountryField = ({\n    record,\n    source=\"url\",\n    title=\"nicename\",\n    size = 'medium',\n}: {\n    record?: { logo: string; name: string };\n    source?: string;\n    title?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles({width: sizeInPixel[size]});\n    if (!record) return null;\n\n    return (\n        <ImageField \n            record={record as any}\n            source={source} \n            title={title}\n            classes={classes}\n        />\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Paper, Typography, Link as MuiLink, Box, Chip, Checkbox } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContactsIcon from '@material-ui/icons/AccountCircle';\nimport DealIcon from '@material-ui/icons/MonetizationOn';\nimport NoteIcon from '@material-ui/icons/Note';\nimport { linkToRecord, SelectField, ReferenceField, useListContext } from 'react-admin';\nimport { Link } from 'react-router-dom';\n\nimport { sectors } from './sectors';\nimport { CompanyAvatar } from './CompanyAvatar';\nimport { Company } from '../types';\nimport { CountryField } from './CountryField';\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        height: 200,\n        width: 185,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        padding: '1em',\n        position: 'relative',\n    },\n    identity: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    name: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    stats: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        width: '100%',\n    },\n    singleStat: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    statIcon: {\n        marginRight: theme.spacing(1),\n    },\n    checkbox: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n    },\n    identifier: {\n        position: 'absolute',\n        top: theme.spacing(1),\n        lrft: 0,\n    }\n}));\n\nexport const CompanyCard = ({ record }: { record: Company }) => {\n    const classes = useStyles();\n    const [elevation, setElevation] = useState(1);\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<Company>();\n    return (\n        <MuiLink\n            component={Link}\n            to={linkToRecord('/companies', record.id, 'show')}\n            underline=\"none\"\n            onMouseEnter={() => setElevation(3)}\n            onMouseLeave={() => setElevation(1)}\n        >\n            <Paper className={classes.paper} elevation={elevation}>\n                <Checkbox\n                    edge=\"start\"\n                    checked={selectedIds.includes(record.id)}\n                    tabIndex={-1}\n                    disableRipple\n                    className={classes.checkbox}\n                    onClick={(e: any )=> {\n                        e.stopPropagation();\n                        onToggleItem(record.id);\n                    }}\n                />\n                <Typography \n                    variant=\"body2\" \n                    color=\"textSecondary\"\n                    className={classes.identifier}\n                >\n                    {`#${record.id}`}\n                </Typography>\n                <div className={classes.identity}>\n                    <CompanyAvatar record={record} />\n                    <div className={classes.name}>\n                        <Box display=\"flex\" alignItems=\"center\">\n                        <Typography variant=\"subtitle2\">\n                            {record.name}\n                        </Typography>\n                        <ReferenceField\n                            record={record}\n                            source=\"country_id\"\n                            reference=\"countries\"\n                            link={false}\n                        >\n                            <CountryField size='small' />\n                        </ReferenceField>\n                        </Box>\n                        {record.relation && (\n                            <Chip \n                                label={record.relation} \n                                variant=\"outlined\" \n                                size=\"small\"\n                            />\n                        )}\n                        <SelectField\n                            color=\"textSecondary\"\n                            source=\"sector\"\n                            choices={sectors}\n                            record={record}\n                        />\n                    </div>\n                </div>\n                <div className={classes.stats}>\n                    <div className={classes.singleStat}>\n                        <ContactsIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_contacts}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_contacts > 1\n                                    ? 'contacts'\n                                    : 'contact'}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div className={classes.singleStat}>\n                        <NoteIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_notes}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_notes > 1 ? 'notes' : 'note'}\n                            </Typography>\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </MuiLink>\n    );\n};\n","import * as React from 'react';\nimport { Box, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useListContext, Identifier } from 'react-admin';\n\nimport { CompanyCard } from './CompanyCard';\nimport { Company } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    gridList: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        width:  '100%',\n        gap: '5px',\n        justifyContent: 'center',\n    },\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: theme.palette.grey[200],\n    },\n}));\n\nconst times = (nbChildren: number, fn: (key: number) => any) =>\n    Array.from({ length: nbChildren }, (_, key) => fn(key));\n\nconst LoadingGridList = () => {\n    const classes = useStyles();\n    return (\n        <Box className={classes.gridList}>\n            {times(15, key => (\n                <Paper className={classes.paper} key={key} />\n            ))}\n        </Box>\n    );\n};\n\nconst LoadedGridList = () => {\n    const { ids, data } = useListContext<Company>();\n    const classes = useStyles();\n\n    if (!ids || !data) return null;\n\n    return (\n        <Box className={classes.gridList}>\n            {ids.map((id: Identifier) => (\n                <CompanyCard key={id} record={data[id]} />\n            ))}\n        </Box>\n    );\n};\n\nexport const GridList = () => {\n    const { loaded } = useListContext();\n    return loaded ? <LoadedGridList /> : <LoadingGridList />;\n};\n","export const relations = [\n    'Distributor',\n    'End-customer',\n    'Prospect',\n    'System Integrator'\n].map(relations => ({ id: relations, name: relations }));","import { Box, Chip } from '@material-ui/core';\nimport { Tag } from '../types'\n\nexport const TagChip = ({ record }: { record: Tag; }) => (\n    <>\n        { record && (\n                <Chip\n                label={record.name}\n                size=\"small\"\n                style={{\n                    backgroundColor: record.color,\n                    border: 0,\n                    cursor: 'pointer',\n                }}\n            />\n        )}\n    </>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { Drawer, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        order: -1,\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    sideBig: {\n        width: 250,\n        minWidth: 250,\n        marginLeft: theme.spacing(2),\n        [theme.breakpoints.down('xs')]:{\n            display: 'none',\n        }\n    },\n    sideSmall: {\n        [theme.breakpoints.up('sm')]:{\n            display: 'none',\n        }\n    },\n    container: {\n        order: -1,\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        minWidth: '13em',\n    },\n    drawerContent: {\n         marginTop: theme.spacing(2),\n         marginLeft: theme.spacing(1),\n         marginRight: theme.spacing(1),\n         maxWidth: theme.spacing(32),\n    }\n}));\n\nexport const CollapsibleListFilter = ({ children }: {children: any;}) => {\n    const classes = useStyles();\n    const [isOpen, setOpen] = useState(false);\n    const childrenWithProps = React.Children.map(children, child => \n        React.isValidElement(child)\n        ? React.cloneElement(child as React.ReactElement<any>, {})\n        : child\n    );\n    return (\n        <div className={classes.root}>\n            <div className={classes.sideBig}>\n                {childrenWithProps}\n            </div>\n            <div className={classes.sideSmall}>\n                <IconButton \n                    onClick={() => setOpen(true)}\n                    color=\"secondary\"\n                >\n                    <ChevronRightIcon />\n                </IconButton>\n            </div>\n            <Drawer \n                anchor=\"left\" \n                open={isOpen} onClose={() => setOpen(false)}\n            >\n                <div className={classes.drawerContent}>\n                    {childrenWithProps}\n                </div>\n            </Drawer>\n        </div>\n    );\n};","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { useState } from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip, Drawer, IconButton } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { sectors } from './sectors';\nimport { relations } from './relations';\nimport { TagChip } from '../tags/TagChip';\nimport { Tag } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minWidth: '13em',\n    },\n}));\n\nexport const CompanyListFilter = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const { data, ids } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n\n            <FilterList label=\"Relation\" icon={<BusinessIcon />}>\n                {relations.map(relation => (\n                    <FilterListItem\n                        key={relation.id}\n                        label={relation.name}\n                        value={{ relation: relation.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList label=\"Tags\" icon={<LocalOfferIcon />}>\n                {ids &&\n                    data &&\n                    ids.map(id => (\n                        <FilterListItem\n                            key={id}\n                            label={<TagChip record={data[id]}/>}\n                            value={{ tags: [id] }}\n                        />\n                    ))}\n            </FilterList>\n\n            <FilterList label=\"Sector\" icon={<LocalShippingIcon />}>\n                {sectors.map(sector => (\n                    <FilterListItem\n                        key={sector.id}\n                        label={sector.name}\n                        value={{ sector: sector.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","// in ./MarkDoneButton.js\nimport * as React from 'react';\nimport { Button, useListContext } from 'react-admin';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport { Company } from '../types';\n\nconst doneState = { status: 'Done' };\n\nconst SelectAllButton = () => {\n    const { ids, data, onSelect } = useListContext<Company>();\n    return (\n        <Button\n            onClick={(e:any) =>{\n                e.stopPropagation();\n                onSelect(ids);\n            }}\n            label=\"Select All\"\n        >\n            <DoneAllIcon />\n        </Button>\n    );\n};\n\nexport default SelectAllButton;","import * as React from 'react';\nimport {\n    List,\n    ListProps,\n    TopToolbar,\n    ExportButton,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n    SortButton,\n    FilterLiveSearch,\n} from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { GridList } from './GridList';\nimport { CompanyListFilter } from './CompanyListFilter';\nimport { ImportButton } from 'react-admin-import-csv';\nimport SelectAllButton from './SelectAllButton';\nimport { Box } from '@material-ui/core';\n\nexport const CompanyList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <List\n            {...props}\n            actions={<CompanyListActions />}\n            aside={<CompanyListFilter />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100, 1000]} />}\n            perPage={25}\n            sort={{ field: 'name', order: 'ASC' }}\n            component=\"div\"\n        >\n            <GridList />\n        </List>\n    ) : null;\n};\n\nconst useStyles = makeStyles(theme => ({\n    toolbar: {\n        \n    },\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst importOptions = {\n    parseConfig: {\n        // For all options see: https://www.papaparse.com/docs#config\n        dynamicTyping: true\n    }\n}\n\n\nconst CompanyListActions = (props: ListActionsProps) => {\n    const classes = useStyles();\n    return (\n        <TopToolbar className={classes.toolbar} >\n            <SortButton fields={['id', 'name']} />\n            <SelectAllButton />\n            <ExportButton />\n            <ImportButton {...props} {...importOptions}/>\n            <CreateButton\n                basePath=\"/companies\"\n                variant=\"contained\"\n                label=\"New Company\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","export const sizes = [\n    { id: 1, name: '1 employee' },\n    { id: 10, name: '2-9 employees' },\n    { id: 50, name: '10-49 employees' },\n    { id: 250, name: '50-249 employees' },\n    { id: 500, name: '250 or more employees' },\n];\n","import { AutocompleteInput, AutocompleteInputProps } from 'react-admin';\n\nconst DistributorInput = (props: AutocompleteInputProps) => (\n    <AutocompleteInput \n        {...props}\n        optionText={record => record ? record.country_iso ? `${record.name} (${record.country_iso})` : `${record.name}` : ''} \n        allowEmpty\n        resettable\n    />\n);\n\nexport default DistributorInput;","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    required,\n    AutocompleteInput,\n    useGetIdentity,\n    FormDataConsumer,\n    ReferenceArrayInput,\n    AutocompleteArrayInput,\n} from 'react-admin';\nimport { Box, CardContent, Divider, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport clsx from 'clsx';\n\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\nimport { relations } from './relations';\nimport DistributorInput from './DistributorInput';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nexport const CompanyCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n\n    if (!identity) return null;\n\n    const companyDefaultValue = () => ({ sales_id: identity && identity?.id });\n\n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                initialValues={companyDefaultValue}\n                redirect=\"show\"\n            >\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <SelectInput\n                    source=\"relation\"\n                    choices={relations}\n                    formClassName={classes.inline}\n                />\n                <FormDataConsumer>\n                    {({ formData, ...rest }) => formData.relation != 'Distributor' &&\n                        <ReferenceInput\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                            filter={{ relation: 'Distributor' }}\n                        >\n                            <DistributorInput />\n                        </ReferenceInput>\n                    }\n                </FormDataConsumer>\n\n                <ReferenceArrayInput source=\"use_products\" reference=\"products\">\n                    <AutocompleteArrayInput source=\"model\" />\n                </ReferenceArrayInput>\n\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <ReferenceInput\n                    source=\"country_id\"\n                    reference=\"countries\"\n                >\n                    <AutocompleteInput optionText=\"nicename\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Create>\n    );\n};\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar>\n                    <BusinessIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","import * as React from 'react';\nimport { Avatar as MuiAvatar } from '@material-ui/core';\n\nimport { Contact } from '../types';\n\nexport const Avatar = ({ record }: { record: Contact }) => (\n    <MuiAvatar src={record.avatar}>\n        {record.first_name.charAt(0)}\n        {record.last_name.charAt(0)}\n    </MuiAvatar>\n);\n","import * as React from 'react';\nimport { Box } from '@material-ui/core';\n\nconst getColorFromStatus = (status: string) =>\n    status === 'cold'\n        ? '#7dbde8'\n        : status === 'warm'\n        ? '#e8cb7d'\n        : status === 'hot'\n        ? '#e88b7d'\n        : status === 'in-contract'\n        ? '#a4e87d'\n        : '#000';\n\nexport const Status = ({ status }: { status: string }) => (\n    <Box\n        width={10}\n        height={10}\n        display=\"inline-block\"\n        borderRadius={5}\n        bgcolor={getColorFromStatus(status)}\n        component=\"span\"\n    />\n);\n","import * as React from 'react';\nimport { ReferenceArrayField, SingleFieldList, ChipField } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Contact } from '../types';\n\nconst ColoredChipField = ({ record, ...props }: any) =>\n    record ? (\n        <ChipField\n            record={record}\n            {...props}\n            style={{ backgroundColor: record.color, border: 0 }}\n            component=\"span\"\n        />\n    ) : null;\n\nconst useStyles = makeStyles({\n    root: {\n        display: 'inline-block',\n    },\n});\n\nexport const TagsList = ({ record }: { record: Contact }) => {\n    const classes = useStyles();\n    if (!record) return null;\n    return (\n        <ReferenceArrayField\n            record={record}\n            basePath=\"/contacts\"\n            resource=\"contacts\"\n            source=\"tags\"\n            reference=\"tags\"\n            className={classes.root}\n        >\n            <SingleFieldList linkType={false} component=\"span\">\n                <ColoredChipField\n                    source=\"name\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                />\n            </SingleFieldList>\n        </ReferenceArrayField>\n    );\n};\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n    image: {\n        objectFit: 'contain',\n    },\n});\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const LogoField = ({\n    record,\n    source,\n    size = 'medium',\n}: {\n    record?: { logo: string; name: string };\n    source?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    if(!record.logo) return (\n        <Avatar>\n            <BusinessIcon />\n        </Avatar>\n    )\n    return (\n        <img\n            src={process.env.PUBLIC_URL + record.logo}\n            alt={record.name}\n            title={record.name}\n            width={sizeInPixel[size]}\n            height={sizeInPixel[size]}\n            className={classes.image}\n        />\n    );\n};\n","export const colors = [\n    '#eddcd2',\n    '#fff1e6',\n    '#fde2e4',\n    '#fad2e1',\n    '#c5dedd',\n    '#dbe7e4',\n    '#f0efeb',\n    '#d6e2e9',\n    '#bcd4e6',\n    '#99c1de',\n];\n","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useGetMany,\n    useCreate,\n    useUpdate,\n    useGetList,\n    Identifier,\n} from 'react-admin';\nimport {\n    Chip,\n    Box,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField,\n    MenuItem,\n    Menu,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport { colors } from './colors';\nimport { Contact, Company, Product } from '../types';\nimport { Tag } from '../types';\n\nexport const TagsListEdit = ({ \n    record,\n    reference, \n}: { \n    record: Contact | Company | Product;\n    reference: 'companies' | 'contacts' | 'products';\n}) => {\n    const [open, setOpen] = useState(false);\n    const [newTagName, setNewTagName] = useState('');\n    const [newTagColor, setNewTagColor] = useState(colors[0]);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const [version, setVersion] = useState(0); // used to force the refresh of useGetList without refreshing the whole page\n    const [disabled, setDisabled] = useState(false);\n\n    const { data: allTags, ids } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' },\n        {},\n        { version } as any // FIXME UseDataProviderOptions don't allow [key: string]: any\n    );\n    const { data: tags, loaded } = useGetMany('tags', record.tags, {\n        enabled: record.tags && record.tags.length > 0,\n    });\n    const [update] = useUpdate();\n    const [create] = useCreate();\n\n    const unselectedTagIds = ids && ids.filter(id => !record.tags.includes(id));\n\n    const handleOpen = (event: React.MouseEvent<HTMLDivElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleDeleteTag = (id: Identifier) => {\n        const tags: Identifier[] = record.tags.filter(\n            (tagId: Identifier) => tagId !== id\n        );\n        update(reference, record.id, { tags }, record);\n    };\n\n    const handleAddTag = (id: Identifier) => {\n        const tags: Identifier[] = [...record.tags, id];\n        update(reference, record.id, { tags }, record);\n        setAnchorEl(null);\n    };\n\n    const handleOpenCreateDialog = () => {\n        setOpen(true);\n        setAnchorEl(null);\n        setDisabled(false);\n    };\n\n    const handleNewTagNameChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setNewTagName(event.target.value);\n    };\n\n    const handleCreateTag = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setDisabled(true);\n        create(\n            'tags',\n            { name: newTagName, color: newTagColor },\n            {\n                onSuccess: ({ data }) => {\n                    update(\n                        reference,\n                        record.id,\n                        { tags: [...record.tags, data.id] },\n                        record,\n                        {\n                            onSuccess: () => {\n                                setNewTagName('');\n                                setNewTagColor(colors[0]);\n                                setOpen(false);\n\n                                setVersion(v => v + 1);\n                            },\n                        }\n                    );\n                },\n            }\n        );\n    };\n\n    // if (!loaded || !tags) return null;\n    return (\n        <>\n            {tags.map(tag => (\n                <Box mt={1} mb={1} key={tag.id}>\n                    <Chip\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onDelete={() => handleDeleteTag(tag.id)}\n                        label={tag.name}\n                        style={{ backgroundColor: tag.color, border: 0 }}\n                    />\n                </Box>\n            ))}\n            <Box mt={1}>\n                <Chip\n                    icon={<ControlPointIcon />}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={handleOpen}\n                    label=\"Add tag\"\n                    color=\"primary\"\n                />\n            </Box>\n            <Menu\n                open={Boolean(anchorEl)}\n                onClose={handleClose}\n                anchorEl={anchorEl}\n            >\n                {unselectedTagIds?.map(id => (\n                    <MenuItem key={id} onClick={() => handleAddTag(id)}>\n                        <Chip\n                            size=\"small\"\n                            variant=\"outlined\"\n                            label={allTags && allTags[id].name}\n                            style={{\n                                backgroundColor: allTags && allTags[id].color,\n                                border: 0,\n                            }}\n                            onClick={() => handleAddTag(id)}\n                        />\n                    </MenuItem>\n                ))}\n                <MenuItem onClick={handleOpenCreateDialog}>\n                    <Chip\n                        icon={<EditIcon />}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onClick={handleOpenCreateDialog}\n                        color=\"primary\"\n                        label=\"Create new tag\"\n                    />\n                </MenuItem>\n            </Menu>\n            <Dialog\n                open={open}\n                onClose={() => setOpen(false)}\n                aria-labelledby=\"form-dialog-title\"\n            >\n                <form onSubmit={handleCreateTag}>\n                    <DialogTitle id=\"form-dialog-title\">\n                        Create a new tag\n                    </DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            label=\"Tag name\"\n                            fullWidth\n                            value={newTagName}\n                            onChange={handleNewTagNameChange}\n                        />\n                        <Box display=\"flex\" flexWrap=\"wrap\" width={230} mt={2}>\n                            {colors.map(color => (\n                                <RoundButton\n                                    key={color}\n                                    color={color}\n                                    selected={color === newTagColor}\n                                    handleClick={() => {\n                                        setNewTagColor(color);\n                                    }}\n                                />\n                            ))}\n                        </Box>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={() => setOpen(false)} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            disabled={disabled}\n                        >\n                            Add tag\n                        </Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </>\n    );\n};\n\nconst useStyles = makeStyles({\n    root: {\n        width: 30,\n        height: 30,\n        borderRadius: 15,\n        display: 'inline-block',\n        margin: 8,\n    },\n});\n\nconst RoundButton = ({ color, handleClick, selected }: any) => {\n    const classes = useStyles();\n    return (\n        <button\n            type=\"button\"\n            className={classes.root}\n            style={{\n                backgroundColor: color,\n                border: selected ? '2px solid grey' : 'none',\n            }}\n            onClick={handleClick}\n        />\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n    EditButton,\n    ShowButton,\n} from 'react-admin';\nimport { Box, Drawer, IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    sideBig: {\n        width: 250,\n        minWidth: 250,\n        marginLeft: theme.spacing(2),\n        [theme.breakpoints.down('xs')]:{\n            display: 'none',\n        }\n    },\n    sideSmall: {\n        [theme.breakpoints.up('sm')]:{\n            display: 'none',\n        }\n    },\n    drawerContent: {\n         marginTop: theme.spacing(2),\n         marginLeft: theme.spacing(1),\n         marginRight: theme.spacing(1),\n         maxWidth: theme.spacing(32),\n    }\n}));\n\nexport const CollapsibleAside = ({\n    basePath,\n    record,\n    link = 'edit',\n    children,\n}: {\n    basePath: string,\n    record?: any;\n    children: any,\n    link?: string;\n}) => {\n    const classes = useStyles();\n    const [isOpen, setOpen] = useState(false);\n    if (!record) return null;\n\n    const childrenWithProps = React.Children.map(children, child => \n        React.isValidElement(child)\n        ? React.cloneElement(child as React.ReactElement<any>, { record })\n        : child\n    );\n\n    return (\n        <div className={classes.root}>\n            <Box textAlign=\"center\" mb={2}>\n                {link === 'edit' ? (\n                    <EditButton\n                        basePath={basePath}\n                        record={record}\n                        label=\"Edit\"\n                    />\n                ) : (\n                    <ShowButton\n                        basePath={basePath}\n                        record={record}\n                        label=\"Show\"\n                    />\n                )}\n            </Box>\n            <div className={classes.sideBig}>\n                {childrenWithProps}\n            </div>\n            <div className={classes.sideSmall}>\n                <IconButton \n                    onClick={() => setOpen(true)}\n                    color=\"secondary\"\n                >\n                    <ChevronLeftIcon />\n                </IconButton>\n            </div>\n            <Drawer \n                anchor=\"right\" \n                open={isOpen} onClose={() => setOpen(false)}\n            >\n                <div className={classes.drawerContent}>\n                    {childrenWithProps}\n                </div>\n            </Drawer>\n        </div>\n    )\n};\n    \n","import * as React from 'react';\nimport {\n    TextField,\n    DateField,\n    FunctionField,\n    ReferenceField,\n    ReferenceArrayField,\n    SingleFieldList,\n    ChipField,\n    ShowButton,\n} from 'react-admin';\nimport { \n    Box, \n    Typography, \n    Divider, \n    Link,\n} from '@material-ui/core';\nimport { Company, Sale } from '../types';\nimport { TagsListEdit } from '../tags/TagsListEdit';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const CompanyAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: Company;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/companies\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n    \n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Company;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Company info</Typography>\n            <Divider />\n\n            <Box mt={2}>\n                Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">{record.website}</Link>\n                <br />\n                LinkedIn: <Link href={record.linkedIn} target=\"_blank\" rel=\"noreferrer\">LinkedIn</Link>\n            </Box>\n            <Box mt={1}>\n                Relation: <TextField source=\"relation\" record={record} />\n            </Box>\n            {record.distributor_id && (\n                <Box mt={1}>\n                    Distributor: <ReferenceField\n                            record={record}\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                        >\n                            <TextField source=\"name\" record={record} />\n                        </ReferenceField>\n                </Box>\n            )}\n\n            {record.phone_number && (\n                <Box mt={1}>\n                    <TextField source=\"phone_number\" record={record} />{' '}\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">Main</Typography>\n                </Box>\n            )}\n\n            <Box mt={1} mb={3}>\n                <TextField source=\"address\" />\n                <br />\n                <TextField source=\"city\" /> <TextField source=\"zipcode\" />{' '}\n                <TextField source=\"stateAbbr\" />\n            </Box>\n\n            <Typography variant=\"subtitle2\">Background</Typography>\n            <Divider />\n\n            <Box mt={3}>\n                <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    component=\"span\"\n                >\n                    Added on\n                </Typography>{' '}\n                <DateField\n                    source=\"created_at\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography\n                    component=\"span\"\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                >\n                    Followed by\n                </Typography>{' '}\n                <ReferenceField\n                    resource=\"companies\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                >\n                    <FunctionField<Sale>\n                        source=\"last_name\"\n                        render={record =>\n                            record\n                                ? `${record.first_name} ${record.last_name}`\n                                : ''\n                        }\n                    />\n                </ReferenceField>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Tags</Typography>\n                <Divider />\n                <TagsListEdit record={record} reference=\"companies\" />\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Use Products</Typography>\n                <Divider />\n\n                <Box mt={1}>\n                    <ReferenceArrayField label=\"Tags\" reference=\"products\" source=\"use_products\">\n                        <SingleFieldList>\n                            <ChipField \n                                source=\"model\" \n                                variant=\"outlined\" \n                                color=\"secondary\"\n                                size=\"small\"\n                            />\n                        </SingleFieldList>\n                    </ReferenceArrayField>\n                </Box>\n            </Box>\n        </>\n    ) : null;","export const stages = [\n    'opportunity',\n    'proposal-sent',\n    'in-negociation',\n    'won',\n    'lost',\n    'delayed',\n];\n\nexport const stageNames = {\n    opportunity: 'Opportunity',\n    'proposal-sent': 'Proposal Sent',\n    'in-negociation': 'In Negociation',\n    won: 'Won',\n    lost: 'Lost',\n    delayed: 'Delayed',\n};\n\nexport const stageChoices = stages.map(type => ({\n    id: type,\n    /* @ts-ignore */\n    name: stageNames[type],\n}));\n","import * as React from 'react';\nimport { TextField, MenuItem } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 150,\n    },\n});\n\nexport const StatusSelector = ({ status, setStatus, className = '' }: any) => {\n    const classes = useStyles();\n    return (\n        <TextField\n            select\n            value={status}\n            onChange={(event: React.ChangeEvent<{ value: unknown }>) => {\n                setStatus(event.target.value);\n            }}\n            variant=\"filled\"\n            label={false}\n            margin=\"none\"\n            size=\"small\"\n            className={clsx(className, classes.root)}\n        >\n            <MenuItem value=\"cold\">\n                Cold <Status status=\"cold\" />\n            </MenuItem>\n            <MenuItem value=\"warm\">\n                Warm <Status status=\"warm\" />\n            </MenuItem>\n            <MenuItem value=\"hot\">\n                Hot <Status status=\"hot\" />\n            </MenuItem>\n            <MenuItem value=\"in-contract\">\n                In Contract <Status status=\"in-contract\" />\n            </MenuItem>\n        </TextField>\n    );\n};\n","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useRecordContext,\n    useCreate,\n    useUpdate,\n    useRefresh,\n    useNotify,\n    useGetIdentity,\n    Identifier,\n    useResourceContext,\n} from 'react-admin';\nimport { TextField as TextInput, Button, Paper } from '@material-ui/core';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\nimport { StatusSelector } from './StatusSelector';\n\ntype Props = {\n    preview: Boolean;\n}\n\nconst useStyles = makeStyles<Theme, Props>(theme => ({\n    root: {\n        marginTop: theme.spacing(4),\n        marginBottom: theme.spacing(1),\n    },\n    toolbar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginTop: theme.spacing(1),\n    },\n    small: {\n        marginRight: '1em',\n        '& .MuiFilledInput-input': {\n            paddingTop: 10,\n        },\n    },\n    buttonSwitcher: {\n        marginBottom: theme.spacing(1),\n    },\n    previewConatiner: {\n        display: 'flex',\n    },\n    previewRaw: {\n        flex: 1,\n    },\n    previewMarkdown: {\n        flex: 1,\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        borderColor: theme.palette.primary.main,\n        display: ({preview}) => (preview ? 'block' : 'none'),\n    },\n}));\n\nexport const NewNote = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'companies' | 'contacts' | 'deals' | 'products';\n}) => {\n    const [preview, setPreview] = useState(false);\n    const classes = useStyles({preview});\n    const record = useRecordContext();\n    const resource = useResourceContext();\n    const [text, setText] = useState('');\n    const [status, setStatus] = useState(record && record.status);\n    const [date, setDate] = useState(getCurrentDate());\n    const [create, { loading }] = useCreate();\n    const [update] = useUpdate();\n    // FIXME: use refetch instead when ReferenceManyField exposes it in the ListContext\n    const refresh = useRefresh();\n    const notify = useNotify();\n    const { identity } = useGetIdentity();\n    if (!record || !identity) return null;\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const data: any = {\n            [foreignKeyMapping[reference]]: record.id,\n            sales_id: identity.id,\n            date,\n            text,\n        };\n        if (showStatus) {\n            data.status = status;\n        }\n        update(\n            reference,\n            ((record && record.id) as unknown) as Identifier,\n            {\n                last_seen: date,\n                status,\n            },\n            record\n        );\n        create(resource, data, {\n            onSuccess: () => {\n                setText('');\n                notify('Note added successfully', 'info');\n                refresh();\n            },\n        });\n        return false;\n    };\n    return (\n        <div className={classes.root}>\n            <form onSubmit={handleSubmit}>\n                <div className={classes.buttonSwitcher}>\n                    <Button \n                        variant={preview ? \"contained\": \"outlined\"} \n                        color=\"primary\"\n                        onClick={()=> setPreview(!preview)}\n                    >Markdown</Button>\n                </div>\n                <div className={classes.previewConatiner}>\n                    <div className={classes.previewRaw}>\n                        <TextInput\n                            label=\"Add a note\"\n                            variant=\"filled\"\n                            size=\"small\"\n                            fullWidth\n                            multiline\n                            value={text}\n                            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                                setText(event.target.value)\n                            }\n                        />\n                    </div>\n                    <Paper className={classes.previewMarkdown}>\n                        <ReactMarkdown children={text} remarkPlugins={[remarkGfm]} />\n                    </Paper>\n                </div>\n                <div className={classes.toolbar}>\n                    <span>\n                        {text ? (\n                            <>\n                                {showStatus && (\n                                    <StatusSelector\n                                        status={status}\n                                        setStatus={setStatus}\n                                        className={classes.small}\n                                    />\n                                )}\n                                <TextInput\n                                    type=\"datetime-local\"\n                                    variant=\"filled\"\n                                    size=\"small\"\n                                    value={date}\n                                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                                        setDate(event.target.value);\n                                    }}\n                                    className={classes.small}\n                                />\n                            </>\n                        ) : null}\n                    </span>\n                    <Button\n                        type=\"submit\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!text || loading}\n                    >\n                        Add this note\n                    </Button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nconst getCurrentDate = () => {\n    const now = new Date();\n    now.setMinutes(now.getMinutes() - now.getTimezoneOffset());\n    return now.toISOString().slice(0, -8);\n};\n\nconst foreignKeyMapping = {\n    contacts: 'contact_id',\n    deals: 'deal_id',\n    companies: 'company_id',\n    products: 'product_id',\n};\n","import * as React from 'react';\nimport { useState, FormEvent, ChangeEvent } from 'react';\nimport {\n    TextField,\n    ReferenceField,\n    DateField,\n    useResourceContext,\n    useDelete,\n    useUpdate,\n    useNotify,\n    useRecordContext,\n} from 'react-admin';\nimport {\n    Typography,\n    Tooltip,\n    IconButton,\n    FilledInput,\n    Button,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TrashIcon from '@material-ui/icons/Delete';\nimport ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(2),\n    },\n    metadata: {\n        marginBottom: theme.spacing(1),\n        color: theme.palette.text.secondary,\n    },\n    textarea: {\n        paddingTop: 16,\n        paddingLeft: 14,\n        paddingRight: 60,\n        paddingBottom: 14,\n        lineHeight: 1.3,\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginTop: theme.spacing(1),\n    },\n    cancel: {\n        marginRight: theme.spacing(1),\n    },\n    content: {\n        backgroundColor: theme.palette.grey[200],\n        padding: '0 1em',\n        borderRadius: 10,\n        display: 'flex',\n        alignItems: 'stretch',\n        marginBottom: theme.spacing(1),\n    },\n    text: {\n        flex: 1,\n    },\n    paragraph: {\n        fontFamily: theme.typography.fontFamily,\n        fontSize: theme.typography.body1.fontSize,\n        lineHeight: 1,\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    toolbar: {\n        marginLeft: theme.spacing(2),\n        visibility: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-around',\n    },\n}));\n\nexport const Note = ({\n    showStatus,\n    note,\n    isLast,\n    reference,\n}: {\n    showStatus?: boolean;\n    note: any;\n    isLast: boolean;\n    reference: string;\n}) => {\n    const [isHover, setHover] = useState(false);\n    const [isEditing, setEditing] = useState(false);\n    const [noteText, setNoteText] = useState(note.text);\n    const resource = useResourceContext();\n    const record = useRecordContext();\n    const notify = useNotify();\n    const classes = useStyles();\n    const [update, { loading }] = useUpdate();\n\n    const [handleDelete] = useDelete(resource, note.id, note, {\n        mutationMode: 'undoable',\n        onSuccess: () => {\n            notify('Note deleted', 'info', undefined, true);\n            update(\n                reference,\n                record.id,\n                { nb_notes: record.nb_notes - 1 },\n                record\n            );\n        },\n    });\n\n    const handleEnterEditMode = () => {\n        setEditing(true);\n    };\n\n    const handleCancelEdit = () => {\n        setEditing(false);\n        setNoteText(note.text);\n        setHover(false);\n    };\n\n    const handleTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setNoteText(event.target.value);\n    };\n\n    const handleNoteUpdate = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        update(resource, note.id, { text: noteText }, note, {\n            onSuccess: () => {\n                setEditing(false);\n                setNoteText(note.text);\n                setHover(false);\n            },\n        });\n    };\n\n    return (\n        <div\n            className={classes.root}\n            onMouseEnter={() => setHover(true)}\n            onMouseLeave={() => setHover(false)}\n        >\n            <div className={classes.metadata}>\n                <ReferenceField\n                    record={note}\n                    resource=\"contactNotes\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    basePath=\"/contactNotes\"\n                >\n                    <TextField source=\"first_name\" variant=\"body1\" />\n                </ReferenceField>{' '}\n                <Typography component=\"span\" variant=\"body1\">\n                    added a note on{' '}\n                </Typography>\n                <DateField\n                    source=\"date\"\n                    record={note}\n                    variant=\"body1\"\n                    showTime\n                    locales=\"en\"\n                    options={{\n                        dateStyle: 'full',\n                        timeStyle: 'short',\n                    }}\n                />{' '}\n                {showStatus && <Status status={note.status} />}\n            </div>\n            {isEditing ? (\n                <form onSubmit={handleNoteUpdate}>\n                    <FilledInput\n                        value={noteText}\n                        onChange={handleTextChange}\n                        fullWidth\n                        multiline\n                        className={classes.textarea}\n                        autoFocus\n                    />\n                    <div className={classes.buttons}>\n                        <Button\n                            className={classes.cancel}\n                            onClick={handleCancelEdit}\n                            color=\"primary\"\n                        >\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            disabled={loading}\n                        >\n                            Update Note\n                        </Button>\n                    </div>\n                </form>\n            ) : (\n                <div \n                    className={classes.content}\n                    onClick={() => setHover(true)}\n                >\n                    <div className={classes.text}>\n                        <ReactMarkdown children={note.text} remarkPlugins={[remarkGfm]} />\n                    </div>\n                    <div\n                        className={classes.toolbar}\n                        style={{ visibility: isHover ? 'visible' : 'hidden' }}\n                    >\n                        <Tooltip title=\"Edit note\">\n                            <IconButton\n                                size=\"small\"\n                                onClick={handleEnterEditMode}\n                            >\n                                <EditIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Delete note\">\n                            <IconButton size=\"small\" onClick={handleDelete}>\n                                <TrashIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n","import * as React from 'react';\nimport { useListContext } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Note } from './Note';\nimport { NewNote } from './NewNote';\n\nconst useStyles = makeStyles({\n    root: {\n        marginTop: '0.5em',\n    },\n});\n\nexport const NotesIterator = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'companies' | 'contacts' | 'deals' | 'products';\n}) => {\n    const classes = useStyles();\n    const { data, ids, loaded } = useListContext();\n    if (!loaded) return null;\n    return (\n        <>\n            <NewNote showStatus={showStatus} reference={reference} />\n            <div className={classes.root}>\n                {ids.map((id, index) => (\n                    <Note\n                        note={data[id]}\n                        isLast={index === ids.length - 1}\n                        showStatus={showStatus}\n                        reference={reference}\n                        key={index}\n                    />\n                ))}\n            </div>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport clsx from 'clsx';\n\nimport { Product } from '../types';\n\nconst useStyles = makeStyles({\n    avatar: {\n        width: 60,\n        height: 60,\n        // backgroundColor: 'aliceblue',\n    },\n    img: {\n        objectFit: 'contain',\n    },\n    small: {\n        width: 20,\n        height: 20,\n    },\n    large: {\n        width: 40,\n        height: 40,\n    },\n});\n\nexport const ProductAvatar = ({\n    record,\n    size = 'large',\n}: {\n    record?: Product;\n    size?: 'small' | 'large';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    console.log(record.image);\n    if(!record.image) return (\n        <Avatar\n            alt={record.model}\n            className={classes.avatar}\n        >\n            <ShoppingCartIcon />\n        </Avatar>\n    )\n    return (\n        <Avatar\n            src={process.env.PUBLIC_URL + record.image}\n            alt={record.model}\n            className={classes.avatar}\n            imgProps={{ className: clsx(classes.img, classes[size]) }}\n        />\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Paper, Typography, Link as MuiLink, Box, Chip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContactsIcon from '@material-ui/icons/AccountCircle';\nimport DealIcon from '@material-ui/icons/MonetizationOn';\nimport { linkToRecord, TextField, ReferenceField, ImageField } from 'react-admin';\nimport { Link } from 'react-router-dom';\n\nimport { ProductAvatar } from './ProductAvatar';\nimport { Product } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        height: 200,\n        width: 185,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        padding: '1em',\n        position: 'relative',\n    },\n    identity: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    name: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    family: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    stats: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        width: '100%',\n    },\n    singleStat: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    statIcon: {\n        marginRight: theme.spacing(1),\n    },\n    image: {\n        width: 28,\n        height: 28,\n    },\n}));\n\nexport const ProductCard = ({ record }: { record: Product }) => {\n    const classes = useStyles();\n    const [elevation, setElevation] = useState(1);\n    return (\n        <MuiLink\n            component={Link}\n            to={linkToRecord('/products', record.id, 'show')}\n            underline=\"none\"\n            onMouseEnter={() => setElevation(3)}\n            onMouseLeave={() => setElevation(1)}\n        >\n            <Paper className={classes.paper} elevation={elevation}>\n                <Box position=\"absolute\" top={10} right={10}>\n                    <ReferenceField\n                        record={record}\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <ImageField \n                            source=\"logo\" \n                            title=\"name\"\n                            classes={classes}\n                        />\n                    </ReferenceField>\n                </Box>\n                <div className={classes.identity}>\n                    <ProductAvatar record={record} />\n                    <div className={classes.name}>\n                        <Box display=\"flex\" alignItems=\"center\">\n                        <Typography variant=\"subtitle2\">\n                            {record.model}\n                        </Typography>\n                        </Box>\n                    </div>\n\n                    <div className={classes.family}>\n                        <Typography variant=\"body2\">\n                            in family{' '}\n                            <ReferenceField\n                                record={record}\n                                source=\"family_id\"\n                                reference=\"productFamilies\"\n                                link=\"show\"\n                            >\n                                <TextField source=\"name\" />\n                            </ReferenceField>\n                        </Typography>\n                    </div>\n\n                </div>\n                <div className={classes.stats}>\n                    <div className={classes.singleStat}>\n                        <ContactsIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_notes}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_notes > 1 ? 'notes' : 'note'}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div className={classes.singleStat}>\n                        <DealIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_properties}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_properties > 1 ? 'properties' : 'property'}\n                            </Typography>\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </MuiLink>\n    );\n};\n","import * as React from 'react';\nimport { Box, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useListContext, Identifier } from 'react-admin';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nimport { ProductCard } from './ProductCard';\nimport { Product } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    gridList: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        width:  '100%',\n        gap: '5px',\n        justifyContent: 'center',\n    },\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: \"center\",\n        padding: '1em',\n        backgroundColor: theme.palette.grey[200],\n    },\n}));\n\nconst times = (nbChildren: number, fn: (key: number) => any) =>\n    Array.from({ length: nbChildren }, (_, key) => fn(key));\n\nconst LoadingGridList = () => {\n    const classes = useStyles();\n    return (\n        <Box className={classes.gridList}>\n            {times(15, key => (\n                <Paper className={classes.paper} key={key} >\n                <Skeleton variant=\"circle\" width={60} height={60}  animation=\"wave\"/>\n                <Skeleton variant=\"text\" animation=\"wave\" width={110}/>\n                <Skeleton variant=\"text\" animation=\"wave\" width={150}/>\n                <Skeleton variant=\"rect\" width={180} height={40} />\n                </Paper>\n            ))}\n        </Box>\n    );\n};\n\nconst LoadedGridList = () => {\n    const { ids, data } = useListContext<Product>();\n    const classes = useStyles();\n\n    if (!ids || !data) return null;\n\n    return (\n        <Box className={classes.gridList}>\n            {ids.map((id: Identifier) => (\n                <ProductCard key={id} record={data[id]} />\n            ))}\n        </Box>\n    );\n};\n\nexport const ProductGridList = () => {\n    const { loaded, loading } = useListContext();\n    return loading ? <LoadingGridList /> : <LoadedGridList /> ;\n};\n","import * as React from 'react';\nimport { useState, ChangeEvent } from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceManyField,\n    SelectField,\n    ReferenceField,\n    ImageField,\n    useShowContext,\n    useRecordContext,\n    useListContext,\n} from 'react-admin';\nimport {\n    Avatar as MuiAvatar,\n    Box,\n    Button,\n    Card,\n    CardContent,\n    Typography,\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemText,\n    ListItemSecondaryAction,\n    Tabs,\n    Tab,\n    Chip,\n    Divider,\n} from '@material-ui/core';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport BusinessIcon from '@material-ui/icons/Business';\n\nimport { Avatar } from '../contacts/Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { sizes } from './sizes';\nimport { LogoField } from './LogoField';\nimport { CompanyAside } from './CompanyAside';\nimport { Company, Deal, Contact } from '../types';\nimport { stageNames } from '../deals/stages';\nimport { NotesIterator } from '../notes';\nimport { CountryField } from './CountryField';\nimport { ProductGridList } from '../products/ProductGridList';\n\nexport const CompanyShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <CompanyShowContent />\n    </ShowBase>\n);\n\nconst CompanyShowContent = () => {\n    const { record, loaded } = useShowContext<Company>();\n    const [value, setValue] = useState(0);\n    const handleChange = (event: ChangeEvent<{}>, newValue: number) => {\n        setValue(newValue);\n    };\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\" mb={1}>\n                            <LogoField record={record as any} />\n                            <Box ml={2} flex=\"1\">\n                                <Box display=\"flex\" gridGap={4}>\n                                    <Typography variant=\"h5\">{record.name}</Typography>\n                                    {record.relation && (\n                                        <Chip \n                                            label={record.relation} \n                                            variant=\"outlined\" \n                                            size=\"small\"\n                                        />\n                                    )}\n                                </Box>\n                                <Typography \n                                    variant=\"body2\" \n                                    color=\"textSecondary\"\n                                >\n                                    {`#${record.id} - `}\n                                </Typography>\n                                {record.sector && (\n                                        <Typography variant=\"body2\">\n                                            <TextField source=\"sector\" />,{' '}\n                                            <SelectField\n                                                source=\"size\"\n                                                choices={sizes}\n                                            />\n                                        </Typography>\n                                )}\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"country_id\"\n                                    reference=\"countries\"\n                                    link={false}\n                                >\n                                    <CountryField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <Tabs\n                            value={value}\n                            indicatorColor=\"primary\"\n                            textColor=\"primary\"\n                            onChange={handleChange}\n                        >\n                            <Tab\n                                label={\n                                    record.nb_notes === 1\n                                        ? '1 Note'\n                                        : `${record.nb_notes} Notes`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_contacts === 1\n                                        ? '1 Contact'\n                                        : `${record.nb_contacts} Contacts`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_deals === 1\n                                        ? '1 Deal'\n                                        : `${record.nb_deals} Deals`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_products === 1\n                                        ? '1 Product'\n                                        : `${record.nb_products} Products`\n                                }\n                            />\n                        </Tabs>\n                        <Divider />\n                        <TabPanel value={value} index={0}>\n                            <ReferenceManyField\n                                reference=\"companyNotes\"\n                                target=\"company_id\"\n                                sort={{ field: 'date', order: 'DESC' }}\n                            >\n                                 <NotesIterator reference=\"companies\" />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={1}>\n                            <ReferenceManyField\n                                reference=\"contacts\"\n                                target=\"company_id\"\n                                sort={{ field: 'last_name', order: 'ASC' }}\n                            >\n                                <ContactsIterator />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={2}>\n                            <ReferenceManyField\n                                reference=\"deals\"\n                                target=\"company_id\"\n                                sort={{ field: 'name', order: 'ASC' }}\n                            >\n                                <DealsIterator />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={3}>\n                            <ReferenceManyField\n                                reference=\"products\"\n                                target=\"company_id\"\n                                label=\"Products\"\n                            >\n                                <ProductGridList />\n                            </ReferenceManyField>\n                        </TabPanel>\n                    </CardContent>\n                </Card>\n            </Box>\n            <CompanyAside record={record} />\n        </Box>\n    );\n};\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`wrapped-tabpanel-${index}`}\n            aria-labelledby={`wrapped-tab-${index}`}\n            {...other}\n        >\n            {children}\n        </div>\n    );\n};\n\nconst ContactsIterator = () => {\n    const { data, ids, loaded } = useListContext<Contact>();\n    const record = useRecordContext();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const contact = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/contacts/${id}/show`}\n                        >\n                            <ListItemAvatar>\n                                <Avatar record={contact} />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={`${contact.first_name} ${contact.last_name}`}\n                                secondary={\n                                    <>\n                                        {contact.title}{' '}\n                                        {`- ${contact.nb_notes} notes `}\n                                        <TagsList record={contact} />\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography variant=\"body2\" color=\"textSecondary\">\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(contact.last_seen),\n                                        now\n                                    )}{' '}\n                                    ago <Status status={contact.status} />\n                                </Typography>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    );\n                })}\n            </List>\n            <Box textAlign=\"center\" mt={1}>\n                <CreateRelatedContactButton record={record} />\n            </Box>\n        </Box>\n    );\n};\n\nconst CreateRelatedContactButton = ({ record }: any) => (\n    <Button\n        component={RouterLink}\n        to={{\n            pathname: '/contacts/create',\n            state: { record: { company_id: record.id } },\n        }}\n        color=\"primary\"\n        variant=\"contained\"\n        size=\"small\"\n        startIcon={<PersonAddIcon />}\n    >\n        Add contact\n    </Button>\n);\n\nconst DealsIterator = () => {\n    const { data, ids, loaded } = useListContext<Deal>();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const deal = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/deals/${id}/show`}\n                        >\n                            <ListItemText\n                                primary={deal.name}\n                                secondary={\n                                    <>\n                                        {/* @ts-ignore */}\n                                        {stageNames[deal.stage]},{' '}\n                                        {deal.amount.toLocaleString('en-US', {\n                                            notation: 'compact',\n                                            style: 'currency',\n                                            currency: 'USD',\n                                            currencyDisplay: 'narrowSymbol',\n                                            minimumSignificantDigits: 3,\n                                        })}\n                                        , {deal.type}\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                    component=\"span\"\n                                >\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(deal.updated_at),\n                                        now\n                                    )}{' '}\n                                    ago{' '}\n                                </Typography>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    );\n                })}\n            </List>\n        </Box>\n    );\n};\n","import * as React from 'react';\nimport {\n    Edit,\n    EditProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    useRecordContext,\n    AutocompleteInput,\n    ReferenceArrayInput,\n    AutocompleteArrayInput,\n    FormDataConsumer,\n    required,\n} from 'react-admin';\nimport { Box, CardContent, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { CompanyAside } from './CompanyAside';\nimport { LogoField } from './LogoField';\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\nimport { relations } from './relations';\nimport DistributorInput from './DistributorInput';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst renderDistributor = (choice: any) => {\n\n}\n\nexport const CompanyEdit = (props: EditProps) => {\n    const classes = useStyles();\n    return (\n        <Edit {...props} aside={<CompanyAside link=\"show\" />} actions={false}>\n            <SimpleForm component={CustomLayout} redirect=\"show\">\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <SelectInput\n                    source=\"relation\"\n                    choices={relations}\n                    formClassName={classes.inline}\n                />\n                <FormDataConsumer>\n                    {({ formData, ...rest }) => formData.relation != 'Distributor' &&\n                        <ReferenceInput\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                            filter={{ relation: 'Distributor' }}\n                        >\n                            <DistributorInput />\n                        </ReferenceInput>\n                    }\n                </FormDataConsumer>\n\n                <ReferenceArrayInput source=\"use_products\" reference=\"products\">\n                    <AutocompleteArrayInput optionText=\"model\" />\n                </ReferenceArrayInput>\n\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <ReferenceInput\n                    source=\"country_id\"\n                    reference=\"countries\"\n                >\n                    <AutocompleteInput optionText=\"nicename\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Edit>\n    );\n};\n\nconst CustomLayout = (props: any) => {\n    const record = useRecordContext(props);\n    return (\n        <CardContent>\n            <Box display=\"flex\">\n                <LogoField record={record as any} />\n                <Box ml={2} flex=\"1\" maxWidth={796}>\n                    {props.children}\n                </Box>\n            </Box>\n        </CardContent>\n    );\n};\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport { CompanyList } from './CompanyList';\nimport { CompanyCreate } from './CompanyCreate';\nimport { CompanyShow } from './CompanyShow';\nimport { CompanyEdit } from './CompanyEdit';\nimport BusinessIcon from '@material-ui/icons/Business';\n\nexport default {\n    list: CompanyList,\n    create: CompanyCreate,\n    edit: CompanyEdit,\n    show: CompanyShow,\n    icon: BusinessIcon,\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    EmailField,\n    DateField,\n    ReferenceManyField,\n    useListContext,\n    ReferenceField,\n    FunctionField,\n} from 'react-admin';\nimport { Box, Typography, Divider, List, ListItem } from '@material-ui/core';\nimport { TagsListEdit } from '../tags/TagsListEdit';\n\nimport { Contact, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const ContactAside = ({ \n    record, \n    link = 'edit',\n}: {\n    record?: Contact;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/contacts\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst TasksIterator = () => {\n    const { data, ids, loading } = useListContext();\n    if (loading || ids.length === 0) return null;\n    return (\n            <List>\n                {ids.map(id => {\n                    const task = data[id];\n                    return (\n                        <ListItem key={id} disableGutters>\n                            <Box>\n                                <Typography variant=\"body2\">\n                                    {task.text}\n                                </Typography>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                >\n                                    due{' '}\n                                    <DateField\n                                        source=\"due_date\"\n                                        record={task}\n                                    />\n                                </Typography>\n                            </Box>\n                        </ListItem>\n                    );\n                })}\n            </List>\n    );\n};\n\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Contact;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Personal info</Typography>\n            <Divider />\n\n            <Box mt={2}>\n                <EmailField source=\"email\" />\n            </Box>\n\n            <Box mt={1}>\n                <TextField source=\"phone_number1\" />{' '}\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                    Work\n                </Typography>\n            </Box>\n\n            <Box mb={1}>\n                <TextField source=\"phone_number2\" />{' '}\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                    Home\n                </Typography>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"body2\">\n                    {record.gender === 'male' ? 'He/Him' : 'She/Her'}\n                </Typography>\n            </Box>\n\n            <Typography variant=\"subtitle2\">Background</Typography>\n            <Divider />\n\n            <Box mt={2}>{record && record.background}</Box>\n            <Box mt={1} mb={3}>\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Added on\n                </Typography>{' '}\n                <DateField\n                    source=\"first_seen\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Last seen on\n                </Typography>{' '}\n                <DateField\n                    source=\"last_seen\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Followed by\n                </Typography>{' '}\n                <ReferenceField\n                    resource=\"contacts\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                >\n                    <FunctionField<Sale>\n                        source=\"last_name\"\n                        render={record =>\n                            record ? `${record.first_name} ${record.last_name}` : ''\n                        }\n                    />\n                </ReferenceField>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Tags</Typography>\n                <Divider />\n                <TagsListEdit record={record} reference=\"contacts\" />\n            </Box>\n\n            <Box>\n                <Typography variant=\"subtitle2\">Tasks</Typography>\n                <Divider />\n                <ReferenceManyField\n                    resource=\"contacts\"\n                    target=\"contact_id\"\n                    reference=\"tasks\"\n                >\n                    <TasksIterator />\n                </ReferenceManyField>\n            </Box>\n        </>\n    ) : null;","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { Contact } from '../types';\n\nexport const ContactShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ContactShowContent />\n    </ShowBase>\n);\n\nconst ContactShowContent = () => {\n    const { record, loaded } = useShowContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Avatar record={record} />\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.first_name} {record.last_name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {`#${record.id} - `}\n                                    {record.title} at{' '}\n                                    <ReferenceField\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        link=\"show\"\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                </Typography>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <ReferenceManyField\n                            target=\"contact_id\"\n                            reference=\"contactNotes\"\n                            sort={{ field: 'date', order: 'DESC' }}\n                        >\n                            <NotesIterator showStatus reference=\"contacts\" />\n                        </ReferenceManyField>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ContactAside record={record} />\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport { endOfYesterday, startOfWeek, startOfMonth, subMonths } from 'date-fns';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Status } from '../misc/Status';\nimport { TagChip } from '../tags/TagChip';\nimport { Tag } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        order: -1,\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        minWidth: '13em',\n        [theme.breakpoints.down('xs')]: {\n            display: 'none',\n        }\n    },\n}));\n\nexport const ContactListFilter = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const { data, ids } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n            <FilterList label=\"Last seen\" icon={<AccessTimeIcon />}>\n                <FilterListItem\n                    label=\"Today\"\n                    value={{\n                        last_seen_gte: endOfYesterday().toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"This week\"\n                    value={{\n                        last_seen_gte: startOfWeek(new Date()).toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this week\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfWeek(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfMonth(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before last month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: subMonths(\n                            startOfMonth(new Date()),\n                            1\n                        ).toISOString(),\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Status\" icon={<TrendingUpIcon />}>\n                <FilterListItem\n                    label={\n                        <>\n                            Cold <Status status=\"cold\" />\n                        </>\n                    }\n                    value={{\n                        status: 'cold',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Warm <Status status=\"warm\" />\n                        </>\n                    }\n                    value={{\n                        status: 'warm',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Hot <Status status=\"hot\" />\n                        </>\n                    }\n                    value={{\n                        status: 'hot',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            In contract <Status status=\"in-contract\" />\n                        </>\n                    }\n                    value={{\n                        status: 'in-contract',\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Tags\" icon={<LocalOfferIcon />}>\n                {ids &&\n                    data &&\n                    ids.map(id => (\n                        <FilterListItem\n                            key={id}\n                            label={<TagChip record={data[id]}/>}\n                            value={{ tags: [id] }}\n                        />\n                    ))}\n            </FilterList>\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n    FilterLiveSearch,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from './Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { ContactListFilter } from './ContactListFilter';\nimport { Contact } from '../types';\nimport { ImportButton } from 'react-admin-import-csv';\n\nconst ContactListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        Contact\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const contact = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/contacts/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar record={contact} />\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${contact.first_name} ${contact.last_name}`}\n                            secondary={\n                                <>\n                                    {`#${contact.id} - `}\n                                    {contact.title} at{' '}\n                                    <ReferenceField\n                                        record={contact}\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        basePath=\"/companies\"\n                                        link={false}\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>{' '}\n                                    {!!contact.nb_notes &&\n                                        `- ${contact.nb_notes} notes `}\n                                    <TagsList record={contact} />\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                last activity{' '}\n                                {formatDistance(\n                                    new Date(contact.last_seen),\n                                    now\n                                )}{' '}\n                                ago <Status status={contact.status} />\n                            </Typography>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst ContactListActions = (props: ListActionsProps) => {\n    const classes = useStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['id', 'last_name', 'first_name', 'last_seen']} />\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/contacts\"\n                variant=\"contained\"\n                label=\"New Contact\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nexport const ContactList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<ContactListActions />}\n            aside={<ContactListFilter />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            sort={{ field: 'last_seen', order: 'DESC' }}\n        >\n            <ContactListContent />\n        </RaList>\n    ) : null;\n};\n","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    useEditContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box } from '@material-ui/core';\nimport omit from 'lodash/omit';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { Contact } from '../types';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nconst ContactEditContent = () => {\n    const { record, loaded, save } = useEditContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar record={record} />\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"first_name\" />\n                                                <Spacer />\n                                                <TextInput source=\"last_name\" />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"title\" />\n                                                <Spacer />\n                                                <ReferenceInput\n                                                    source=\"company_id\"\n                                                    reference=\"companies\"\n                                                >\n                                                    <AutocompleteInput optionText=\"name\" />\n                                                </ReferenceInput>\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"email\"\n                                                    fullWidth\n                                                />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"phone_number1\" />\n                                                <Spacer />\n                                                <TextInput source=\"phone_number2\" />\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"background\"\n                                                    multiline\n                                                    fullWidth\n                                                />\n                                                <TextInput\n                                                    source=\"avatar\"\n                                                    fullWidth\n                                                />\n                                                <BooleanInput source=\"has_newsletter\" />\n                                            </Box>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <ContactAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const ContactEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <ContactEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    useCreateContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Contact } from '../types';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const ContactCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    \n    if (!identity) return null;\n\n    const contactDefaultValue = () => ({ sales_id: identity && identity?.id });\n    const transform = (data: Contact) => ({\n        ...data,\n        last_seen: new Date(),\n        tags: [],\n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={contactDefaultValue}\n                transform={transform}\n            >\n                <TextInput \n                    source=\"first_name\" \n                    validate={[required()]} \n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput\n                    source=\"last_name\"\n                    validate={[required()]}\n                    formClassName={classes.inline}\n                />\n                <CustomDivider />\n                <TextInput \n                    source=\"title\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <ReferenceInput\n                    source=\"company_id\"\n                    reference=\"companies\"\n                    formClassName={classes.inline}\n                >\n                    <AutocompleteInput optionText=\"name\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput\n                    source=\"email\"\n                    fullWidth\n                />\n                <TextInput source=\"phone_number1\"\n                    formClassName={clsx(classes.inline, 'first-child')} />\n                <TextInput source=\"phone_number2\"\n                    formClassName={classes.inline} />\n                <CustomDivider />\n                <TextInput\n                    source=\"background\"\n                    multiline\n                    fullWidth\n                />\n                <TextInput\n                    source=\"avatar\"\n                    fullWidth\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n                <BooleanInput source=\"has_newsletter\" />\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar />\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport { ContactShow } from './ContactShow';\nimport { ContactList } from './ContactList';\nimport { ContactEdit } from './ContactEdit';\nimport { ContactCreate } from './ContactCreate';\nimport ContactsIcon from '@material-ui/icons/Contacts';\n\nexport default {\n    list: ContactList,\n    show: ContactShow,\n    edit: ContactEdit,\n    create: ContactCreate,\n    icon: ContactsIcon,\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    EmailField,\n    DateField,\n    ReferenceManyField,\n    EditButton,\n    ShowButton,\n    useListContext,\n    ReferenceField,\n    FunctionField,\n} from 'react-admin';\nimport { Box, Typography, Divider, List, ListItem } from '@material-ui/core';\nimport { TagsListEdit } from '../tags/TagsListEdit';\n\nimport { Sale } from '../types';\n\nexport const TaskAside = ({ record, link = 'edit' }: any) => (\n    <Box ml={4} width={250} minWidth={250}>\n        <Box textAlign=\"center\" mb={2}>\n            {link === 'edit' ? (\n                <EditButton\n                    basePath=\"/Tasks\"\n                    record={record}\n                    label=\"Edit Task\"\n                />\n            ) : (\n                <ShowButton\n                    basePath=\"/Tasks\"\n                    record={record}\n                    label=\"Show Task\"\n                />\n            )}\n        </Box>\n    </Box>\n);\n","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { TaskAside } from './TaskAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { Task } from '../types';\n\nexport const TaskShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <TaskShowContent />\n    </ShowBase>\n);\n\nconst TaskShowContent = () => {\n    const { record, loaded } = useShowContext<Task>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.first_name} {record.last_name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {record.title} at{' '}\n                                    <ReferenceField\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        link=\"show\"\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                </Typography>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                    </CardContent>\n                </Card>\n            </Box>\n            <TaskAside record={record} />\n        </Box>\n    );\n};\n","export const statuses = [\n    {id: 'pending', name: 'Pending', color: '#FFA000'},\n    {id: 'done', name: 'Done', color: '#CDDC39'},\n    {id: 'postponed', name: 'Postponed', color: '#2196F3'},\n]","import * as React from 'react';\nimport { Box } from '@material-ui/core';\n\nimport { statuses } from './status';\n\nexport const TaskStatus = ({ status }: { status: string }) => {\n    const statusItem = statuses.find(item => item.id === status)\n    const statusColor = statusItem ? statusItem.color : \"#000\";\n    return (\n        <Box\n            width={10}\n            height={10}\n            display=\"inline-block\"\n            borderRadius={5}\n            bgcolor={statusColor}\n            component=\"span\"\n        />\n    );\n};","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport { endOfYesterday, startOfWeek, startOfMonth, subMonths } from 'date-fns';\n\nimport { TaskStatus } from './TaskStatus';\nimport { TagChip } from '../tags/TagChip';\nimport { Tag } from '../types';\nimport { statuses } from './status';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nexport const TaskListFilter = () => {\n    const { identity } = useGetIdentity();\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n            <FilterList label=\"Due date\" icon={<AccessTimeIcon />}>\n                <FilterListItem\n                    label=\"Today\"\n                    value={{\n                        due_date_gte: endOfYesterday().toISOString(),\n                        due_date_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"This week\"\n                    value={{\n                        due_date_gte: startOfWeek(new Date()).toISOString(),\n                        due_date_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this week\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: startOfWeek(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this month\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: startOfMonth(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before last month\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: subMonths(\n                            startOfMonth(new Date()),\n                            1\n                        ).toISOString(),\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Status\" icon={<TrendingUpIcon />}>\n                {statuses.map(status =>(\n                    <FilterListItem\n                    label={\n                        <>\n                            {status.name} <TaskStatus status={status.id} />\n                        </>\n                    }\n                    value={{\n                        status: status.id,\n                    }}\n                />\n                ))}\n            </FilterList>\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","// in ./MarkDoneButton.js\nimport * as React from 'react';\nimport { BulkUpdateButton, BulkActionProps } from 'react-admin';\nimport DoneIcon from '@material-ui/icons/Done';\n\nconst doneState = { status: 'Done' };\n\nconst MarkDoneButton = (props: BulkActionProps) => (\n    <BulkUpdateButton\n        {...props}\n        label=\"Mark checked\"\n        data={doneState}\n        icon={<DoneIcon/>}\n        mutationMode=\"pessimistic\"\n    />\n);\n\nexport default MarkDoneButton;","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { Fragment } from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    BulkDeleteButton,\n    useGetIdentity,\n    BulkActionProps,\n    ListActionsProps,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n    Avatar,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport { ImportButton } from \"react-admin-import-csv\";\n\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { TaskListFilter } from './TaskListFilter';\nimport { Task } from '../types';\nimport MarkDoneButton from './MarkDoneButton';\nimport { TaskStatus } from './TaskStatus';\n\nconst TaskListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        Task\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const task = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/Tasks/${id}`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar>\n                                <AssignmentTurnedInIcon />\n                            </Avatar>\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={\n                                <>\n                                {task.text} \n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                due in{' '}\n                                {formatDistance(\n                                    new Date(task.due_date),\n                                    now\n                                )}\n                                {' '}<TaskStatus status={task.status} />\n                            </Typography>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst TaskListActions = (props: ListActionsProps) => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['due_date']} />\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/Tasks\"\n                variant=\"contained\"\n                label=\"New Task\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nconst TaskBulkActionButtons = (props: BulkActionProps) => (\n    <Fragment>\n        <MarkDoneButton {...props} />\n        {/* default bulk delete action */}\n        <BulkDeleteButton {...props} />\n    </Fragment>\n);\n\nexport const TaskList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<TaskListActions />}\n            aside={<TaskListFilter />}\n            bulkActionButtons={<TaskBulkActionButtons />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{ sales_id: identity?.id, status: 'pending' }}\n            sort={{ field: 'due_date', order: 'DESC' }}\n        >\n            <TaskListContent />\n        </RaList>\n    ) : null;\n};\n","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    required,\n    Toolbar,\n    useEditContext,\n    DateInput,\n    SelectInput,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport omit from 'lodash/omit';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { TaskAside } from './TaskAside';\nimport { Task } from '../types';\nimport { statuses } from './status';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst TaskEditContent = () => {\n    const classes = useStyles();\n    const { record, loaded, save } = useEditContext<Task>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                        <Avatar >\n                                            <AssignmentTurnedInIcon />\n                                        </Avatar>\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <TextInput \n                                                source=\"text\"\n                                                label=\"Task\"\n                                                validate={[required()]}\n                                                fullWidth\n                                            />\n                                            <DateInput\n                                                source=\"due_date\"\n                                                formClassName={clsx(classes.inline, 'first-child')}\n                                            />\n                                            <SelectInput\n                                                source=\"status\"\n                                                choices={statuses}\n                                                formClassName={classes.inline}\n                                            />\n                                            <ReferenceInput\n                                                source=\"sales_id\"\n                                                reference=\"sales\"\n                                                label=\"Account manager\"\n                                                helperText={false}\n                                                formClassName={classes.inline}\n                                            >\n                                                <SelectInput\n                                                    optionText={(sales: any) =>\n                                                        `${sales.first_name} ${sales.last_name}`\n                                                    }\n                                                />\n                                            </ReferenceInput>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <TaskAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const TaskEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <TaskEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    DateInput,\n    useCreateContext,\n    SelectField,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\n\n\nimport { Task } from '../types';\nimport { statuses } from './status';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const TaskCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    \n    if (!identity) return null;\n\n    const defaultValue = () => ({\n        due_date: new Date(), \n        status: 'Pending',\n    });\n    const transform = (data: Task) => ({\n        ...data,\n        sales_id: identity && identity?.id, \n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={defaultValue}\n                transform={transform}\n            >\n                <TextInput \n                    source=\"text\"\n                    label=\"Task\"\n                    validate={[required()]}\n                    fullWidth\n                />\n                <DateInput\n                    source=\"due_date\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"status\"\n                    choices={statuses}\n                    formClassName={classes.inline}\n                />\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar >\n                    <AssignmentTurnedInIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport { TaskShow } from './TaskShow';\nimport { TaskList } from './TaskList';\nimport { TaskEdit } from './TaskEdit';\nimport { TaskCreate } from './TaskCreate';\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted';\n\nexport default {\n    list: TaskList,\n    show: TaskShow,\n    edit: TaskEdit,\n    create: TaskCreate,\n    icon: FormatListBulletedIcon,\n};\n","import * as React from 'react';\nimport { ReferenceField, useRedirect } from 'react-admin';\nimport { Card, Typography, Box } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Draggable } from 'react-beautiful-dnd';\n\nimport { LogoField } from '../companies/LogoField';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(1),\n    },\n    cardContent: {\n        padding: theme.spacing(1),\n        display: 'flex',\n    },\n    cardText: {\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nexport const DealCard = ({ deal, index }: { deal: Deal; index: number }) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    if (!deal) return null;\n\n    const handleClick = () => {\n        redirect(`/deals/${deal.id}/show`);\n    };\n    return (\n        <Draggable draggableId={String(deal.id)} index={index}>\n            {(provided, snapshot) => (\n                <div\n                    className={classes.root}\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}\n                    ref={provided.innerRef}\n                    onClick={handleClick}\n                >\n                    <Card\n                        style={{\n                            opacity: snapshot.isDragging ? 0.9 : 1,\n                            transform: snapshot.isDragging\n                                ? 'rotate(-2deg)'\n                                : '',\n                        }}\n                        elevation={snapshot.isDragging ? 3 : 1}\n                    >\n                        <Box p={1} display=\"flex\">\n                            <ReferenceField\n                                source=\"company_id\"\n                                record={deal}\n                                reference=\"companies\"\n                                resource=\"deals\"\n                                basePath=\"/deals\"\n                            >\n                                <LogoField size=\"small\" />\n                            </ReferenceField>\n                            <Box ml={1}>\n                                <Typography variant=\"body2\" gutterBottom>\n                                    {deal.name}\n                                </Typography>\n                                <Typography\n                                    variant=\"caption\"\n                                    color=\"textSecondary\"\n                                >\n                                    {deal.amount.toLocaleString('en-US', {\n                                        notation: 'compact',\n                                        style: 'currency',\n                                        currency: 'USD',\n                                        currencyDisplay: 'narrowSymbol',\n                                        minimumSignificantDigits: 3,\n                                    })}\n                                    , {deal.type}\n                                </Typography>\n                            </Box>\n                        </Box>\n                    </Card>\n                </div>\n            )}\n        </Draggable>\n    );\n};\n","import * as React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Droppable } from 'react-beautiful-dnd';\nimport { Identifier, RecordMap } from 'react-admin';\n\nimport { DealCard } from './DealCard';\nimport { stageNames } from './stages';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles({\n    root: {\n        flex: 1,\n        paddingTop: 8,\n        paddingBottom: 16,\n        backgroundColor: '#eaeaee',\n        '&:first-child': {\n            paddingLeft: 5,\n            borderTopLeftRadius: 5,\n        },\n        '&:last-child': {\n            paddingRight: 5,\n            borderTopRightRadius: 5,\n        },\n    },\n    droppable: {\n        display: 'flex',\n        flexDirection: 'column',\n        borderRadius: 5,\n        padding: 5,\n        '&.isDraggingOver': {\n            backgroundColor: '#dadadf',\n        },\n    },\n});\n\nexport const DealColumn = ({\n    stage,\n    dealIds,\n    data,\n}: {\n    stage: string;\n    dealIds: Identifier[];\n    data: RecordMap<Deal>;\n}) => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <Typography align=\"center\" variant=\"subtitle1\">\n                {/* @ts-ignore */}\n                {stageNames[stage]}\n            </Typography>\n            <Droppable droppableId={stage}>\n                {(droppableProvided, snapshot) => (\n                    <div\n                        ref={droppableProvided.innerRef}\n                        {...droppableProvided.droppableProps}\n                        className={\n                            classes.droppable +\n                            (snapshot.isDraggingOver ? ' isDraggingOver' : '')\n                        }\n                    >\n                        {dealIds.map((id, index) => (\n                            <DealCard key={id} index={index} deal={data[id]} />\n                        ))}\n                        {droppableProvided.placeholder}\n                    </div>\n                )}\n            </Droppable>\n        </div>\n    );\n};\n","import * as React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport {\n    useMutation,\n    Identifier,\n    useListContext,\n    RecordMap,\n    DataProviderContext,\n} from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport { DragDropContext, OnDragEndResponder } from 'react-beautiful-dnd';\nimport isEqual from 'lodash/isEqual';\n\nimport { DealColumn } from './DealColumn';\nimport { stages } from './stages';\nimport { Deal } from '../types';\n\ninterface DealsByColumn {\n    [stage: string]: Identifier[];\n}\n\nconst initialDeals: DealsByColumn = stages.reduce(\n    (obj, stage) => ({ ...obj, [stage]: [] }),\n    {}\n);\n\nconst getDealsByColumn = (\n    ids: Identifier[],\n    data: RecordMap<Deal>\n): DealsByColumn => {\n    // group deals by column\n    const columns = ids.reduce(\n        (acc, id) => {\n            acc[data[id].stage].push(id);\n            return acc;\n        },\n        stages.reduce((obj, stage) => ({ ...obj, [stage]: [] }), {} as any)\n    );\n    // order each column by index\n    stages.forEach(stage => {\n        columns[stage] = columns[stage].sort(\n            (a: Identifier, b: Identifier) => data[a].index - data[b].index\n        );\n    });\n    return columns;\n};\n\nexport const DealListContent = () => {\n    const {\n        data,\n        ids,\n        loaded,\n        page,\n        perPage,\n        currentSort,\n        filterValues,\n    } = useListContext<Deal>();\n\n    const [deals, setDeals] = useState<DealsByColumn>(\n        loaded ? getDealsByColumn(ids, data) : initialDeals\n    );\n    // we use the raw dataProvider to avoid too many updates to the Redux store after updates (which would create junk)\n    const dataProvider = useContext(DataProviderContext);\n\n    // FIXME: use refetch when available\n    const [refresh] = useMutation({\n        resource: 'deals',\n        type: 'getList',\n        payload: {\n            pagination: { page, perPage },\n            sort: currentSort,\n            filter: filterValues,\n        },\n    });\n\n    // update deals by columns when the dataProvider response updates\n    useEffect(() => {\n        if (!loaded) return;\n        const newDeals = getDealsByColumn(ids, data);\n        if (isEqual(deals, newDeals)) {\n            return;\n        }\n        setDeals(newDeals);\n    }, [data, ids, loaded]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    if (!loaded) return null;\n\n    const onDragEnd: OnDragEndResponder = async result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        if (source.droppableId === destination.droppableId) {\n            // moving deal inside the same column\n\n            const column = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const sourceDeal = data[column[source.index]];\n            const destinationDeal = data[column[destination.index]];\n\n            // update local state\n            // remove source deal from column\n            column.splice(source.index, 1);\n            // read source deal at destination\n            column.splice(destination.index, 0, Number(draggableId));\n            setDeals({\n                ...deals,\n                [source.droppableId]: column,\n            });\n\n            // update backend\n            // Fetch all the deals in this stage (because the list may be filtered, but we need to update even non-filtered deals)\n            const { data: columnDeals } = await dataProvider.getList('deals', {\n                sort: { field: 'index', order: 'ASC' },\n                pagination: { page: 1, perPage: 100 },\n                filter: { stage: source.droppableId },\n            });\n\n            if (source.index > destination.index) {\n                // deal moved up, eg\n                // dest   src\n                //  <------\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between destination.index and source.index, increase the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index >= destinationDeal.index &&\n                                deal.index < sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index + 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            } else {\n                // deal moved down, e.g\n                // src   dest\n                //  ------>\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between source.index and destination.index, decrease the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index <= destinationDeal.index &&\n                                deal.index > sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index - 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            }\n        } else {\n            // moving deal across columns\n\n            const sourceColumn = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const destinationColumn = Array.from(\n                deals[destination.droppableId]\n            ); // [4, 7, 23, 5] arrays of ids\n            const sourceDeal = data[sourceColumn[source.index]];\n            const destinationDeal = data[destinationColumn[destination.index]]; // may be undefined if dropping at the end of a column\n\n            // update local state\n            sourceColumn.splice(source.index, 1);\n            destinationColumn.splice(destination.index, 0, draggableId);\n            setDeals({\n                ...deals,\n                [source.droppableId]: sourceColumn,\n                [destination.droppableId]: destinationColumn,\n            });\n\n            // update backend\n            // Fetch all the deals in both stages (because the list may be filtered, but we need to update even non-filtered deals)\n            const [\n                { data: sourceDeals },\n                { data: destinationDeals },\n            ] = await Promise.all([\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: source.droppableId },\n                }),\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: destination.droppableId },\n                }),\n            ]);\n\n            await Promise.all([\n                // decrease index on the deals after the source index in the source columns\n                ...sourceDeals\n                    .filter(deal => deal.index > sourceDeal.index)\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index - 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // increase index on the deals after the destination index in the destination columns\n                ...destinationDeals\n                    .filter(deal =>\n                        destinationDeal\n                            ? deal.index >= destinationDeal.index\n                            : false\n                    )\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index + 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // change the dragged deal to take the destination index and column\n                dataProvider.update('deals', {\n                    id: sourceDeal.id,\n                    data: {\n                        index: destinationDeal\n                            ? destinationDeal.index\n                            : (destinationDeals.length > 0)\n                            ? destinationDeals.pop()!.index + 1 \n                            : 0,\n                        stage: destination.droppableId,\n                    },\n                    previousData: sourceDeal,\n                }),\n            ]);\n\n            refresh();\n        }\n    };\n\n    return (\n        <DragDropContext onDragEnd={onDragEnd}>\n            <Box display=\"flex\">\n                {stages.map(stage => (\n                    <DealColumn\n                        stage={stage}\n                        dealIds={deals[stage]}\n                        data={data}\n                        key={stage}\n                    />\n                ))}\n            </Box>\n        </DragDropContext>\n    );\n};\n","export const types = [\n    'Other',\n    'Copywriting',\n    'Print project',\n    'UI Design',\n    'Website design',\n];\n\nexport const typeChoices = types.map(type => ({ id: type, name: type }));\n","import * as React from 'react';\nimport {\n    Create,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    NumberInput,\n    ReferenceInput,\n    AutocompleteInput,\n    required,\n    useRedirect,\n    useDataProvider,\n    useGetIdentity,\n} from 'react-admin';\nimport { Dialog } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { stageChoices } from './stages';\nimport { typeChoices } from './types';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 500,\n    },\n});\n\nexport const DealCreate = ({ open }: { open: boolean }) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    const dataProvider = useDataProvider();\n    const { identity } = useGetIdentity();\n\n    const handleClose = () => {\n        redirect('/deals');\n    };\n\n    const onSuccess = ({ data: deal }: { data: Deal }) => {\n        redirect('/deals');\n        // increase the index of all deals in the same stage as the new deal\n        dataProvider\n            .getList('deals', {\n                pagination: { page: 1, perPage: 50 },\n                sort: { field: 'id', order: 'ASC' },\n                filter: { stage: deal.stage },\n            })\n            .then(({ data: deals }) =>\n                Promise.all(\n                    deals\n                        .filter(oldDeal => oldDeal.id !== deal.id)\n                        .map(oldDeal =>\n                            dataProvider.update('deals', {\n                                id: oldDeal.id,\n                                data: { index: oldDeal.index + 1 },\n                                previousData: oldDeal,\n                            })\n                        )\n                )\n            );\n    };\n\n    return (\n        <Dialog open={open} onClose={handleClose}>\n            <Create\n                resource=\"deals\"\n                basePath=\"/deals\"\n                className={classes.root}\n                onSuccess={onSuccess}\n            >\n                <SimpleForm initialValues={{ index: 0, sales_id: identity && identity?.id }}>\n                    <TextInput\n                        source=\"name\"\n                        label=\"Deal name\"\n                        fullWidth\n                        validate={[required()]}\n                    />\n                    <TextInput\n                        source=\"description\"\n                        multiline\n                        rows={3}\n                        fullWidth\n                    />\n                    <ReferenceInput\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        fullWidth\n                        validate={[required()]}\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <SelectInput\n                        source=\"stage\"\n                        choices={stageChoices}\n                        fullWidth\n                        validate={[required()]}\n                        defaultValue=\"opportunity\"\n                    />\n                    <SelectInput\n                        source=\"type\"\n                        choices={typeChoices}\n                        fullWidth\n                    />\n                    <NumberInput source=\"amount\" fullWidth defaultValue={0} />\n                    <ReferenceInput\n                        source=\"sales_id\"\n                        reference=\"sales\"\n                        label=\"Account manager\"\n                        helperText={false}\n                        fullWidth\n                    >\n                        <SelectInput\n                            optionText={(sales: any) =>\n                                `${sales.first_name} ${sales.last_name}`\n                            }\n                        />\n                    </ReferenceInput>\n                </SimpleForm>\n            </Create>\n        </Dialog>\n    );\n};\n","import * as React from 'react';\nimport { useListContext } from 'react-admin';\nimport { Link } from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n    ul: {\n        listStyle: 'none',\n        padding: 0,\n        margin: 0,\n        display: 'inline-block',\n    },\n    li: {\n        display: 'inline',\n        '&:after': {\n            content: '\", \"',\n        },\n        '&:last-child:after': {\n            content: '\"\"',\n        },\n    },\n});\n\nexport const ContactList = () => {\n    const { ids, data, loaded } = useListContext();\n    const classes = useStyles();\n    if (!loaded) return <div style={{ height: '2em' }} />;\n    return (\n        <ul className={classes.ul}>\n            {ids.map(id => (\n                <li key={id} className={classes.li}>\n                    <Link\n                        component={RouterLink}\n                        to={`/contacts/${id}`}\n                        variant=\"subtitle1\"\n                    >\n                        {data[id].first_name} {data[id].last_name}\n                    </Link>\n                </li>\n            ))}\n        </ul>\n    );\n};\n","import * as React from 'react';\nimport {\n    ShowBase,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    ReferenceArrayField,\n    useRecordContext,\n    useRedirect,\n    useRefresh,\n    useDataProvider,\n    Identifier,\n} from 'react-admin';\nimport {\n    Box,\n    Dialog,\n    DialogContent,\n    Typography,\n    Divider,\n    Button,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { format } from 'date-fns';\n\nimport { CompanyAvatar } from '../companies/CompanyAvatar';\nimport { NotesIterator } from '../notes';\nimport { ContactList } from './ContactList';\nimport { stageNames } from './stages';\n\nconst useStyles = makeStyles({\n    dialog: {\n        position: 'absolute',\n        top: 50,\n    },\n});\n\nexport const DealShow = ({ open, id }: { open: boolean; id: Identifier }) => {\n    const redirect = useRedirect();\n    const classes = useStyles();\n\n    const handleClose = () => {\n        redirect('/deals');\n    };\n\n    return (\n        <Dialog\n            open={open}\n            onClose={handleClose}\n            fullWidth\n            maxWidth=\"md\"\n            classes={{ paper: classes.dialog }}\n        >\n            <DialogContent>\n                <ShowBase resource=\"deals\" basePath=\"/deals\" id={id}>\n                    <DealShowContent />\n                </ShowBase>\n            </DialogContent>\n        </Dialog>\n    );\n};\n\nconst DealShowContent = () => {\n    const record = useRecordContext();\n    const dataProvider = useDataProvider();\n    const redirect = useRedirect();\n    const refresh = useRefresh();\n    \n    if (!record) return null;\n\n    const onDelete = async() =>{\n        const { data: columnDeals } = await dataProvider.getList('deals', {\n            sort: { field: 'index', order: 'ASC' },\n            pagination: { page: 1, perPage: 100 },\n            filter: { stage: record.droppableId },\n        });\n        await Promise.all([\n            ...columnDeals\n                .filter(\n                    deal => deal.index < record.index\n                )\n                .map(deal =>\n                    dataProvider.update('deals', {\n                        id: deal.id,\n                        data: { index: deal.index - 1 },\n                        previousData: deal,\n                    })\n                ),\n            // for the deal that was moved, update its index\n            dataProvider.delete('deals', {\n                id: record.id,\n                previousData: record,\n            }),\n        ]);\n        redirect('/deals');\n        refresh();\n    };\n\n    return (\n        <>\n            <Box display=\"flex\">\n                <Box\n                    width={100}\n                    display=\"flex\"\n                    flexDirection=\"column\"\n                    alignItems=\"center\"\n                >\n                    <ReferenceField\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <CompanyAvatar />\n                    </ReferenceField>\n                    <ReferenceField\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <TextField\n                            source=\"name\"\n                            align=\"center\"\n                            component=\"div\"\n                        />\n                    </ReferenceField>\n                </Box>\n                <Box ml={2} flex=\"1\">\n                    <Box display=\"flex\" justifyContent=\"space-between\" >\n                        <Typography variant=\"h5\">{record.name}</Typography>\n                        <Button\n                            variant=\"contained\"\n                            startIcon={<DeleteIcon />}            \n                            onClick={(e:any) =>{\n                                e.stopPropagation();\n                                onDelete();\n                            }}\n                        >\n                            Delete\n                        </Button>\n                    </Box>\n\n                    <Box display=\"flex\" mt={2}>\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Start\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {format(new Date(record.start_at), 'PP')}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Budget\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {record.amount.toLocaleString('en-US', {\n                                    notation: 'compact',\n                                    style: 'currency',\n                                    currency: 'USD',\n                                    currencyDisplay: 'narrowSymbol',\n                                    minimumSignificantDigits: 3,\n                                })}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Type\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {record.type}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Stage\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {/* @ts-ignore */}\n                                {stageNames[record.stage]}\n                            </Typography>\n                        </Box>\n                    </Box>\n\n                    <Box mt={2} mb={2}>\n                        <Box\n                            display=\"flex\"\n                            mr={5}\n                            flexDirection=\"column\"\n                            minHeight={48}\n                        >\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Contacts\n                            </Typography>\n                            <ReferenceArrayField\n                                source=\"contact_ids\"\n                                reference=\"contacts\"\n                            >\n                                <ContactList />\n                            </ReferenceArrayField>\n                        </Box>\n                    </Box>\n\n                    <Box mt={2} mb={2} style={{ whiteSpace: 'pre-line' }}>\n                        <Typography color=\"textSecondary\" variant=\"body2\">\n                            Description\n                        </Typography>\n                        <Typography>{record.description}</Typography>\n                    </Box>\n\n                    <Divider />\n\n                    <Box mt={2}>\n                        <ReferenceManyField\n                            target=\"deal_id\"\n                            reference=\"dealNotes\"\n                            sort={{ field: 'date', order: 'DESC' }}\n                        >\n                            <NotesIterator reference=\"deals\" />\n                        </ReferenceManyField>\n                    </Box>\n                </Box>\n            </Box>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { useListFilterContext, useGetIdentity } from 'react-admin';\nimport { Switch, FormControlLabel } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nexport const OnlyMineInput = ({ alwaysOn }: { alwaysOn: boolean }) => {\n    const {\n        filterValues,\n        displayedFilters,\n        setFilters,\n    } = useListFilterContext();\n    const { identity } = useGetIdentity();\n    const classes = useStyles();\n    const handleChange = () => {\n        const newFilterValues = { ...filterValues };\n        if (typeof filterValues.sales_id !== 'undefined') {\n            delete newFilterValues.sales_id;\n        } else {\n            newFilterValues.sales_id = identity && identity?.id;\n        }\n        setFilters(newFilterValues, displayedFilters);\n    };\n    return (\n        <div className={classes.root}>\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={typeof filterValues.sales_id !== 'undefined'}\n                        onChange={handleChange}\n                        color=\"primary\"\n                        name=\"checkedC\"\n                    />\n                }\n                label=\"Only companies I manage\"\n            />\n        </div>\n    );\n};\n\nOnlyMineInput.defaultProps = { source: 'sales_id' };\n","import * as React from 'react';\nimport {\n    CreateButton,\n    ExportButton,\n    FilterButton,\n    List,\n    ListProps,\n    SearchInput,\n    SelectInput,\n    TopToolbar,\n    useGetIdentity,\n} from 'react-admin';\nimport { Route } from 'react-router';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { DealListContent } from './DealListContent';\nimport { DealCreate } from './DealCreate';\nimport { DealShow } from './DealShow';\nimport { OnlyMineInput } from './OnlyMineInput';\nimport { typeChoices } from './types';\n\nexport const DealList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <>\n            <List\n                {...props}\n                perPage={100}\n                sort={{ field: 'index', order: 'ASC' }}\n                filters={dealFilters}\n                filterDefaultValues={{ sales_id: identity && identity?.id }}\n                actions={<DealActions />}\n                pagination={false}\n                component=\"div\"\n            >\n                <DealListContent />\n            </List>\n            <Route path=\"/deals/create\">\n                {({ match }) => <DealCreate open={!!match} />}\n            </Route>\n            <Route path=\"/deals/:id/show\">\n                {({ match }) =>\n                    !!match ? (\n                        <DealShow open={!!match} id={match?.params?.id} />\n                    ) : null\n                }\n            </Route>\n        </>\n    ) : null;\n};\n\nconst dealFilters = [\n    <SearchInput source=\"q\" alwaysOn />,\n    <OnlyMineInput alwaysOn />,\n    <SelectInput source=\"type\" choices={typeChoices} />,\n];\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst DealActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <FilterButton />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/deals\"\n                variant=\"contained\"\n                label=\"New Deal\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { DealList } from './DealList';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\n\nexport default {\n    list: DealList,\n    icon: MonetizationOnIcon,\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport CategoryIcon from '@material-ui/icons/Category';\n\nimport { ProductFamily } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nexport const ProductListFilter = () => {\n    const { identity } = useGetIdentity();\n    const { data: familyData, ids: familyIds } = useGetList<ProductFamily>(\n        'productFamilies',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n\n            <FilterList label=\"Families\" icon={<CategoryIcon />}>\n                {familyIds &&\n                    familyData &&\n                    familyIds.map(id => (\n                        <FilterListItem\n                            key={id}\n                            label={<Chip label={familyData[id].name} size=\"small\"/>}\n                            value={{ family_id: id }}\n                        />\n                    ))}\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","import * as React from 'react';\nimport {\n    List,\n    ListProps,\n    TopToolbar,\n    ExportButton,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n} from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ProductGridList } from './ProductGridList';\nimport { ProductListFilter } from './ProductListFilter';\nimport { ImportButton } from 'react-admin-import-csv';\n\nexport const ProductList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <List\n            {...props}\n            actions={<ProductListActions />}\n            aside={<ProductListFilter />}\n            filterDefaultValues={{ }}\n            pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n            perPage={25}\n            sort={{ field: 'model', order: 'ASC' }}\n            component=\"div\"\n        >\n            <ProductGridList />\n        </List>\n    ) : null;\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst ProductListActions = (props: ListActionsProps) => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/products\"\n                variant=\"contained\"\n                label=\"New Product\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    useCreateSuggestionContext,\n    useCreate,\n    ReferenceInput,\n} from 'react-admin';\nimport {\n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n    DialogTitle,\n } from '@material-ui/core';\n import { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nexport const CreatePropertyType = () => {\n    const classes = useStyles();\n    const { filter, onCancel, onCreate } = useCreateSuggestionContext();\n    const [name, setName] = useState(filter || '');\n    const [unit, setUnit] = useState('');\n    const [synonyms, setSynonyms] = useState('');\n    const [create] = useCreate('propertyTypes');\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        create(\n            {\n                payload: {\n                    data: {\n                        name: name,\n                        unit: unit,\n                        synonyms: synonyms,\n                    },\n                },\n            },\n            {\n                onSuccess: ({ data }: {data: any;}) => {\n                    setName('');\n                    setUnit('');\n                    setSynonyms('');\n                    onCreate(data);\n                },\n            }\n        );\n    };\n\n    return (\n        <Dialog open onClose={onCancel}>\n            <DialogTitle>Add new Product Property Type</DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <div className={classes.root}>\n                        <TextField\n                            label=\"New type name\"\n                            value={name}\n                            onChange={event => setName(event.target.value)}\n                            autoFocus\n                            required\n                        />\n                        <TextField\n                            label=\"Unit\"\n                            value={unit}\n                            onChange={event => setUnit(event.target.value)}\n                        />\n                        <TextField\n                            label=\"Commma separated synonyms\"\n                            value={synonyms}\n                            onChange={event => setSynonyms(event.target.value)}\n                        />\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"submit\" disabled={!name}>Add</Button>\n                    <Button onClick={onCancel}>Cancel</Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n};","import { \n    AutocompleteInput, \n    ReferenceInput, \n    SimpleFormIterator,\n    SimpleFormIteratorProps, \n    TextInput, \n} from \"react-admin\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\nimport { CreatePropertyType } from \"./CreatePropertyType\";\n\nconst useStyles = makeStyles(theme => ({\n    inline: {\n        display: 'inline-block',\n        marginLeft: theme.spacing(1),\n        width: '32%',\n        minWidth: theme.spacing(10),\n        '&.first-child': {\n            marginLeft: 0,\n        },\n        [theme.breakpoints.down('xs')]: {\n            display: 'block',\n            marginLeft: 0,\n            width: '100%',\n            margin: 0,\n        }\n    },\n    \n}));\n\nexport const PropertyFormIterator = (props: SimpleFormIteratorProps) => {\n    const classes = useStyles();\n    return (\n        <SimpleFormIterator {...props} >\n            <ReferenceInput\n                source=\"type_id\"\n                reference=\"propertyTypes\"\n                label=\"Type\"\n                formClassName={classNames(classes.inline, 'first-child')}\n                fullWidth\n            >\n                <AutocompleteInput \n                    optionText=\"name\" \n                    create={<CreatePropertyType />}\n                />\n            </ReferenceInput>\n            <TextInput \n                source=\"property_value\" \n                label=\"Value\"\n                formClassName={classes.inline}\n                fullWidth\n            />\n            <TextInput \n                source=\"condition\"  \n                label=\"Condition\"\n                formClassName={classes.inline}\n                fullWidth\n            />\n        </SimpleFormIterator>\n    );\n};","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    ReferenceInput,\n    TabbedForm,\n    TextInput,\n    FormTab,\n    required,\n    AutocompleteInput,\n    useGetIdentity,\n    ArrayInput,\n    SimpleFormIterator,\n    ReferenceArrayInput,\n} from 'react-admin';\nimport RichTextInput from 'ra-input-rich-text';\nimport { Box, CardContent, Divider, Avatar, useTheme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport clsx from 'clsx';\nimport { CreatePropertyType } from './CreatePropertyType';\nimport { PropertyFormIterator } from './PropertyFormIterator';\n\n\nconst useStyles = makeStyles(theme => ({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n    propertyContainer: {\n        display: 'flex',\n        gap: theme.spacing(1),\n        minWidth: '500px',\n    },\n}));\n\nexport const ProductCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const theme = useTheme();\n\n    const defaultValue = () => ({ });\n\n    return (\n        <Create {...props} actions={false} >\n            <TabbedForm>\n                <FormTab label=\"General\">\n                    <ReferenceInput \n                        label=\"Comapny\" \n                        source=\"company_id\" \n                        reference=\"companies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <ReferenceInput \n                        label=\"Product Family\" \n                        source=\"family_id\" \n                        reference=\"productFamilies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <TextInput source=\"model\" validate={required()} fullWidth />\n                    <TextInput source=\"code\" fullWidth />\n                    <TextInput source=\"website\" fullWidth />\n                    <TextInput source=\"image\" fullWidth />\n                    <TextInput \n                        source=\"description\"\n                        multiline\n                        rows={3} \n                        fullWidth \n                    />\n                </FormTab>\n                <FormTab label=\"Properties\">\n                    <ArrayInput\n                        source=\"properties\"\n                    >\n                        <PropertyFormIterator />\n                    </ArrayInput>\n                </FormTab>\n            </TabbedForm>\n        </Create>\n    );\n};\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar>\n                    <ShoppingCartIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth=\"80%\">\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport { Product } from '../types';\n\nconst useStyles = makeStyles({\n    image: {\n        objectFit: 'contain',\n    },\n});\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const ProductImageField = ({\n    record,\n    source,\n    size = 'medium',\n}: {\n    record?: Product;\n    source?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    if(!record.image) return (\n        <Avatar>\n            <ShoppingCartIcon />\n        </Avatar>\n    )\n    return (\n        <img\n            src={process.env.PUBLIC_URL + record.image}\n            alt={record.model}\n            title={record.model}\n            width={sizeInPixel[size]}\n            height={sizeInPixel[size]}\n            className={classes.image}\n        />\n    );\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    ReferenceField,\n} from 'react-admin';\nimport { Box, Typography, Divider, Link } from '@material-ui/core';\n\nimport { Product, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const ProductAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: Product;\n    link?: string;\n}) =>{\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/products\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Product;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Product info</Typography>\n            <Divider />\n\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                Company: \n                <ReferenceField\n                    record={record}\n                    source=\"company_id\"\n                    reference=\"companies\"\n                    link=\"show\"\n                >\n                    <TextField source=\"name\" />\n                </ReferenceField>\n            </Box>\n\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                Family: \n                <ReferenceField\n                    record={record}\n                    source=\"family_id\"\n                    reference=\"productFamilies\"\n                    link=\"show\"\n                >\n                    <TextField source=\"name\" />\n                </ReferenceField>\n            </Box>\n\n            <Box mt={1}>\n                Code: <TextField source=\"code\" record={record} />\n            </Box>\n            {record.website && (\n                <Box mt={1}>\n                    Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">Link</Link>\n                </Box>\n            )}\n\n            <Box mt={3}>\n                <Typography variant=\"subtitle2\">Description</Typography>\n                <Divider />\n\n                <Box mt={1}>\n                    <TextField source=\"description\" />\n                </Box>\n\n            </Box>\n        </>\n    ) : null;","import * as React from 'react';\nimport { useState, ChangeEvent } from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    EditButton,\n    TextField,\n    ReferenceManyField,\n    SelectField,\n    ReferenceField,\n    ImageField,\n    Datagrid,\n    useShowContext,\n    useRecordContext,\n    useListContext,\n} from 'react-admin';\nimport {\n    Avatar as MuiAvatar,\n    Box,\n    Button,\n    Card,\n    CardContent,\n    Typography,\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemText,\n    ListItemSecondaryAction,\n    Tabs,\n    Tab,\n    Chip,\n    Divider,\n} from '@material-ui/core';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { NotesIterator } from '../notes';\n\n\nimport { ProductImageField } from './ProductImageField';\nimport { ProductAside } from './ProductAside';\nimport { Product, ProductPrperty } from '../types';\nimport { LogoField } from '../companies/LogoField';\n\nexport const ProductShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ProductShowContent />\n    </ShowBase>\n);\n\nconst ProductShowContent = () => {\n    const { record, loaded } = useShowContext<Product>();\n    const [value, setValue] = useState(0);\n    const handleChange = (event: ChangeEvent<{}>, newValue: number) => {\n        setValue(newValue);\n    };\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\" mb={1}>\n                            <ProductImageField record={record as any} />\n                            <Box ml={2} flex=\"1\">\n                                <Box display=\"flex\" gridGap={4}>\n                                    <Typography variant=\"h5\">{record.model}</Typography>\n                                </Box>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <Tabs\n                            value={value}\n                            indicatorColor=\"primary\"\n                            textColor=\"primary\"\n                            onChange={handleChange}\n                        >\n                            <Tab\n                                label={\n                                    record.nb_notes > 1\n                                        ? `${record.nb_notes} Notes`\n                                        : `${record.nb_notes} Note`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_properties > 1\n                                        ? `${record.nb_properties} Properties`\n                                        : `${record.nb_properties} Property`\n                                }\n                            />\n                        </Tabs>\n                        <Divider />\n                        <TabPanel value={value} index={0}>\n                            <ReferenceManyField\n                                reference=\"productNotes\"\n                                target=\"product_id\"\n                            >\n                                 <NotesIterator reference=\"products\" />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={1}>\n                            <ReferenceManyField reference=\"productProperties\" target=\"product_id\" addLabel={false}>\n                                <Datagrid>\n                                    <ReferenceField\n                                            source=\"type_id\"\n                                            reference=\"propertyTypes\"\n                                            link={false}\n                                        >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                    <TextField source=\"property_value\" />\n                                    <ReferenceField\n                                            source=\"type_id\"\n                                            reference=\"propertyTypes\"\n                                            link={false}\n                                        >\n                                        <TextField source=\"unit\" />\n                                    </ReferenceField>\n                                    <TextField source=\"condition\" />\n    \n                                </Datagrid>\n                            </ReferenceManyField>\n                        </TabPanel>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ProductAside record={record} />\n        </Box>\n    );\n};\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`wrapped-tabpanel-${index}`}\n            aria-labelledby={`wrapped-tab-${index}`}\n            {...other}\n        >\n            {children}\n        </div>\n    );\n};\n\nconst ProductPrpertiesIterator = () => {\n    const { data, ids, loaded } = useListContext<ProductPrperty>();\n    const record = useRecordContext();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const productProperty = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/productProperties/${id}/show`}\n                        >\n                            {/* <ListItemAvatar>\n                                <Avatar record={productProperty} />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={`${productProperty.first_name} ${productProperty.last_name}`}\n                                secondary={\n                                    <>\n                                        {productProperty.title}{' '}\n                                        {productProperty.nb_notes &&\n                                        `- ${productProperty.nb_notes} notes `}\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography variant=\"body2\" color=\"textSecondary\">\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(productProperty.last_seen),\n                                        now\n                                    )}{' '}\n                                    ago <Status status={productProperty.status} />\n                                </Typography>\n                            </ListItemSecondaryAction> */}\n                        </ListItem>\n                    );\n                })}\n            </List>\n            <Box textAlign=\"center\" mt={1}>\n                {/* <CreateRelatedProductPrpertyButton record={record} /> */}\n            </Box>\n        </Box>\n    );\n};\n\n// const CreateRelatedProductPrpertyButton = ({ record }: any) => (\n//     <Button\n//         component={RouterLink}\n//         to={{\n//             pathname: '/productProperties/create',\n//             state: { record: { product_id: record.id } },\n//         }}\n//         color=\"primary\"\n//         variant=\"contained\"\n//         size=\"small\"\n//         startIcon={<PersonAddIcon />}\n//     >\n//         Add property\n//     </Button>\n// );\n","import * as React from 'react';\nimport {\n    Edit,\n    EditProps,\n    ReferenceInput,\n    TabbedForm,\n    FormTab,\n    TextInput,\n    SelectInput,\n    useRecordContext,\n    AutocompleteInput,\n    required,\n    ArrayInput,\n    SimpleFormIterator,\n} from 'react-admin';\nimport { Box, CardContent, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { ProductAside } from './ProductAside';\nimport { ProductImageField } from './ProductImageField';\nimport { CreatePropertyType } from './CreatePropertyType';\nimport { PropertyFormIterator } from './PropertyFormIterator';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst renderDistributor = (choice: any) => {\n\n}\n\nexport const ProductEdit = (props: EditProps) => {\n    const classes = useStyles();\n    return (\n        <Edit \n            {...props} \n            aside={<ProductAside link=\"show\" />} \n            actions={false}\n        >\n            <TabbedForm\n                redirect=\"show\"\n            >\n                <FormTab label=\"General\">\n                    <ReferenceInput \n                        label=\"Comapny\" \n                        source=\"company_id\" \n                        reference=\"companies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <ReferenceInput \n                        label=\"Product Family\" \n                        source=\"family_id\" \n                        reference=\"productFamilies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <TextInput source=\"model\" validate={required()} fullWidth />\n                    <TextInput source=\"code\" fullWidth />\n                    <TextInput source=\"website\" fullWidth />\n                    <TextInput source=\"image\" fullWidth />\n                    <TextInput \n                        source=\"description\"\n                        multiline\n                        rows={3} \n                        fullWidth \n                    />\n                </FormTab>\n                <FormTab label=\"Properties\">\n                    <ArrayInput\n                        source=\"properties\"\n                    >\n                        <PropertyFormIterator />\n                    </ArrayInput>\n                </FormTab>\n            </TabbedForm>\n        </Edit>\n    );\n};\n\nconst CustomLayout = (props: any) => {\n    const record = useRecordContext(props);\n    return (\n        <CardContent>\n            <Box display=\"flex\">\n                <ProductImageField record={record as any} />\n                <Box ml={2} flex=\"1\" maxWidth={796}>\n                    {props.children}\n                </Box>\n            </Box>\n        </CardContent>\n    );\n};\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport { ProductList } from './ProductList';\nimport { ProductCreate } from './ProductCreate';\nimport { ProductShow } from './ProductShow';\nimport { ProductEdit } from './ProductEdit';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\n\nexport default {\n    list: ProductList,\n    create: ProductCreate,\n    edit: ProductEdit,\n    show: ProductShow,\n    icon: FiberManualRecordIcon,\n};\n","import * as React from 'react';\nimport { Avatar as MuiAvatar } from '@material-ui/core';\n\nimport { ProductFamily } from '../types';\n\nexport const Avatar = ({ record }: { record: ProductFamily }) => (\n    <MuiAvatar src={record.image}>\n        {record.name}\n    </MuiAvatar>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nexport const ProductFamilyListFilter = () => {\n\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n        </CollapsibleListFilter>\n    );\n};\n","export const categories = [\n    'Safety laser scanners', \n    '2D LiDAR sensors', \n    '3D LiDAR sensors', \n    'Cleaning Robot',\n].map(category => ({ id: category, name: category }));","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    SelectField,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from './Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { ProductFamilyListFilter } from './ProductFamilyListFilter';\nimport { ProductFamily } from '../types';\nimport { categories } from './categories';\n\nconst ProductFamilyListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        ProductFamily\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const record = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/productFamilies/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar record={record} />\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${record.name}`}\n                            secondary={\n                                <>\n                                    {record.name} in{' '}\n                                    <SelectField\n                                        record={record}\n                                        source=\"category\"\n                                        choices={categories}\n                                    />\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst ProductFamilyListActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['last_name', 'first_name', 'last_seen']} />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/productFamilies\"\n                variant=\"contained\"\n                label=\"Add New\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nexport const ProductFamilyList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<ProductFamilyListActions />}\n            aside={<ProductFamilyListFilter />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{  }}\n            // sort={{  }}\n        >\n            <ProductFamilyListContent />\n        </RaList>\n    ) : null;\n};\n","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    useCreateContext,\n    useCreateSuggestionContext,\n    useCreate,\n} from 'react-admin';\nimport { \n    Card, \n    CardContent, \n    Divider, \n    Box, \n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n } from '@material-ui/core';\nimport CategoryIcon from '@material-ui/icons/Category';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { ProductFamily } from '../types';\nimport { categories } from './categories';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const ProductFamilyCreate = (props: CreateProps) => {\n    const classes = useStyles();\n\n    const contactDefaultValue = () => ({ });\n    const transform = (data: ProductFamily) => ({\n        ...data,\n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={contactDefaultValue}\n                transform={transform}\n            >\n                <SelectInput\n                    source=\"category\"\n                    choices={categories}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"name\" fullWidth />\n                <TextInput source=\"website\" fullWidth />\n                <TextInput source=\"image\" fullWidth />\n                <TextInput \n                    source=\"description\"\n                    multiline\n                    rows={3} \n                    fullWidth \n                />\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <CategoryIcon />\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n\n","import * as React from 'react';\nimport {\n    TextField,\n    ReferenceField,\n    SelectField,\n} from 'react-admin';\nimport { \n    Box, \n    Typography, \n    Divider,\n    Link,\n } from '@material-ui/core';\n\nimport { ProductFamily, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\nimport { categories } from './categories';\n\nexport const ProductFamilyAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: ProductFamily;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/productFamilies\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: ProductFamily;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Family info</Typography>\n            <Divider />\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                <Typography>Category:</Typography>\n                <SelectField\n                    source=\"category\"\n                    choices={categories}\n                />\n            </Box>\n\n            {record.website && (\n                <Box mt={1}>\n                    Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">Link</Link>\n                </Box>\n            )}\n        </>\n    ) : null;","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    useEditContext,\n    SelectInput,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box } from '@material-ui/core';\nimport omit from 'lodash/omit';\n\nimport { Avatar } from './Avatar';\nimport { ProductFamilyAside } from './ProductFamilyAside';\nimport { ProductFamily } from '../types';\nimport { categories } from './categories';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nconst ProductFamilyEditContent = () => {\n    const { record, loaded, save } = useEditContext<ProductFamily>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar record={record} />\n                                        </Box>\n                                        <Box flex={1}>\n                                            <SelectInput\n                                                source=\"category\"\n                                                choices={categories}\n                                            />\n                                            <TextInput source=\"name\" fullWidth />\n                                            <TextInput source=\"website\" fullWidth />\n                                            <TextInput source=\"image\" fullWidth />\n                                            <TextInput \n                                                source=\"description\"\n                                                multiline\n                                                rows={3} \n                                                fullWidth \n                                            />\n                                        </Box>\n                                        \n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <ProductFamilyAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const ProductFamilyEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <ProductFamilyEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n    SelectField,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { Avatar } from './Avatar';\nimport { ProductFamilyAside } from './ProductFamilyAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { ProductFamily } from '../types';\nimport { ProductGridList } from '../products/ProductGridList';\nimport { categories } from './categories';\n\nexport const ProductFamilyShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ProductFamilyShowContent />\n    </ShowBase>\n);\n\nconst ProductFamilyShowContent = () => {\n    const { record, loaded } = useShowContext<ProductFamily>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Avatar record={record} />\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {record.title} in{' '}\n                                    <SelectField\n                                        record={record}\n                                        source=\"category\"\n                                        choices={categories}\n                                    />\n                                </Typography>\n                            </Box>\n                        </Box>\n                        <Box mt={2} p={1}>\n                            <ReferenceManyField\n                                reference=\"products\"\n                                target=\"family_id\"\n                                label=\"Products\"\n                            >\n                                <ProductGridList />\n                            </ReferenceManyField>\n                        </Box>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ProductFamilyAside record={record} />\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { ProductFamilyList } from './ProductFamilyList';\nimport { ProductFamilyCreate } from './ProductFamilyCreate';\nimport { ProductFamilyEdit } from './ProductFamilyEdit';\nimport { ProductFamilyShow } from './ProductFamilyShow';\nimport CategoryIcon from '@material-ui/icons/Category';\n\nexport default {\n    list: ProductFamilyList,\n    create: ProductFamilyCreate,\n    edit: ProductFamilyEdit,\n    show: ProductFamilyShow,\n    icon: CategoryIcon,\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n    useTranslate,\n    DashboardMenuItem,\n    MenuItemLink,\n    MenuProps,\n    ReduxState,\n} from 'react-admin';\n\n\nimport SubMenu from './SubMenu';\nimport { AppState } from '../types';\n\nimport companies from '../companies';\nimport contacts from '../contacts';\nimport tasks from '../tasks';\nimport deals from '../deals';\nimport products from '../products';\nimport productFamilies from '../productFamilies';\n\n\n\ntype MenuName = 'menuCrm' | 'menuProduct' | 'menuCustomers';\n\nconst Menu = ({ dense = false }: MenuProps) => {\n    const [state, setState] = useState({\n        menuCrm: true,\n        menuProduct: true,\n        menuCustomers: true,\n    });\n    const translate = useTranslate();\n    const open = useSelector((state: ReduxState) => state.admin.ui.sidebarOpen);\n    useSelector((state: AppState) => state.theme); // force rerender on theme change\n    const classes = useStyles();\n\n    const handleToggle = (menu: MenuName) => {\n        setState(state => ({ ...state, [menu]: !state[menu] }));\n    };\n\n    return (\n        <div\n            className={classnames(classes.root, {\n                [classes.open]: open,\n                [classes.closed]: !open,\n            })}\n        >\n            {' '}\n            <DashboardMenuItem />\n            <SubMenu\n                handleToggle={() => handleToggle('menuCrm')}\n                isOpen={state.menuCrm}\n                name=\"CRM\"\n                icon={<companies.icon />}\n                dense={dense}\n            >\n                <MenuItemLink\n                    to={{\n                        pathname: '/companies',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Companies\"\n                    leftIcon={<companies.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/contacts',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Contacts\"\n                    leftIcon={<contacts.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/deals',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Deals\"\n                    leftIcon={<deals.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/tasks',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Taks\"\n                    leftIcon={<tasks.icon />}\n                    dense={dense}\n                />\n            </SubMenu>\n            <SubMenu\n                handleToggle={() => handleToggle('menuProduct')}\n                isOpen={state.menuProduct}\n                name=\"Products\"\n                icon={<products.icon />}\n                dense={dense}\n            >\n                <MenuItemLink\n                    to={{\n                        pathname: '/products',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Products\"\n                    leftIcon={<products.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/productFamilies',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Families\"\n                    leftIcon={<productFamilies.icon />}\n                    dense={dense}\n                />\n            </SubMenu>\n        </div>\n    );\n};\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n    },\n    open: {\n        width: 200,\n    },\n    closed: {\n        width: 55,\n    },\n}));\n\nexport default Menu;\n","export const darkTheme = {\n    palette: {\n        primary: {\n            main: '#90caf9',\n        },\n        secondary: {\n            main: '#FBBA72',\n        },\n        type: 'dark' as 'dark', // Switching the dark mode on is a single property value change.\n    },\n    sidebar: {\n        width: 200,\n    },\n    overrides: {\n        MuiAppBar: {\n            colorSecondary: {\n                color: '#ffffffb3',\n                backgroundColor: '#616161e6',\n            },\n        },\n        MuiButtonBase: {\n            root: {\n                '&:hover:active::after': {\n                    // recreate a static ripple color\n                    // use the currentColor to make it work both for outlined and contained buttons\n                    // but to dim the background without dimming the text,\n                    // put another element on top with a limited opacity\n                    content: '\"\"',\n                    display: 'block',\n                    width: '100%',\n                    height: '100%',\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    backgroundColor: 'currentColor',\n                    opacity: 0.3,\n                    borderRadius: 'inherit',\n                },\n            },\n        },\n    },\n    props: {\n        MuiButtonBase: {\n            // disable ripple for perf reasons\n            disableRipple: true,\n        },\n    },\n};\n\nexport const lightTheme = {\n    palette: {\n        primary: {\n            main: '#4f3cc9',\n        },\n        secondary: {\n            light: '#5f5fc4',\n            main: '#283593',\n            dark: '#001064',\n            contrastText: '#fff',\n        },\n        background: {\n            default: '#fcfcfe',\n        },\n        type: 'light' as 'light',\n    },\n    shape: {\n        borderRadius: 10,\n    },\n    sidebar: {\n        width: 200,\n    },\n    overrides: {\n        RaMenuItemLink: {\n            root: {\n                borderLeft: '3px solid #fff',\n            },\n            active: {\n                borderLeft: '3px solid #4f3cc9',\n            },\n        },\n        MuiPaper: {\n            elevation1: {\n                boxShadow: 'none',\n            },\n            root: {\n                border: '1px solid #e0e0e3',\n                backgroundClip: 'padding-box',\n            },\n        },\n        MuiButton: {\n            contained: {\n                backgroundColor: '#fff',\n                color: '#4f3cc9',\n                boxShadow: 'none',\n            },\n        },\n        MuiButtonBase: {\n            root: {\n                '&:hover:active::after': {\n                    // recreate a static ripple color\n                    // use the currentColor to make it work both for outlined and contained buttons\n                    // but to dim the background without dimming the text,\n                    // put another element on top with a limited opacity\n                    content: '\"\"',\n                    display: 'block',\n                    width: '100%',\n                    height: '100%',\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    backgroundColor: 'currentColor',\n                    opacity: 0.3,\n                    borderRadius: 'inherit',\n                },\n            },\n        },\n        MuiAppBar: {\n            colorSecondary: {\n                color: '#808080',\n                backgroundColor: '#fff',\n            },\n        },\n        MuiLinearProgress: {\n            colorPrimary: {\n                backgroundColor: '#f5f5f5',\n            },\n            barColorPrimary: {\n                backgroundColor: '#d7d7d7',\n            },\n        },\n        MuiFilledInput: {\n            root: {\n                backgroundColor: 'rgba(0, 0, 0, 0.04)',\n                '&$disabled': {\n                    backgroundColor: 'rgba(0, 0, 0, 0.04)',\n                },\n            },\n        },\n        MuiSnackbarContent: {\n            root: {\n                border: 'none',\n            },\n        },\n    },\n    props: {\n        MuiButtonBase: {\n            // disable ripple for perf reasons\n            disableRipple: true,\n        },\n    },\n};\n","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Layout, LayoutProps } from 'react-admin';\nimport AppBar from './AppBar';\nimport Menu from './Menu';\nimport { darkTheme, lightTheme } from './themes';\nimport { AppState } from '../types';\n\nexport default (props: LayoutProps) => {\n    const theme = useSelector((state: AppState) =>\n        state.theme === 'dark' ? darkTheme : lightTheme\n    );\n    return <Layout {...props} appBar={AppBar} menu={Menu} theme={theme} />;\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, withTypes } from 'react-final-form';\nimport { useLocation, Link as RouterLink  } from 'react-router-dom';\n\nimport {\n    Avatar,\n    Button,\n    Card,\n    CardActions,\n    CircularProgress,\n    TextField,\n    Link,\n    Typography,\n} from '@material-ui/core';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Notification, useTranslate, useLogin, useNotify } from 'react-admin';\n\nimport { lightTheme } from './themes';\n\nconst useStyles = makeStyles(theme => ({\n    main: {\n        display: 'flex',\n        flexDirection: 'column',\n        minHeight: '100vh',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        backgroundImage: 'radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)',\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n    },\n    card: {\n        minWidth: 300,\n        marginTop: '6em',\n    },\n    avatar: {\n        margin: '1em',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    icon: {\n        backgroundColor: theme.palette.secondary.main,\n    },\n    hint: {\n        marginTop: '1em',\n        display: 'flex',\n        justifyContent: 'center',\n        color: theme.palette.grey[500],\n    },\n    form: {\n        padding: '0 1em 1em 1em',\n    },\n    input: {\n        marginTop: '1em',\n    },\n    actions: {\n        padding: '0 1em 1em 1em',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nconst renderInput = ({\n    meta: { touched, error } = { touched: false, error: undefined },\n    input: { ...inputProps },\n    ...props\n}) => (\n    <TextField\n        error={!!(touched && error)}\n        helperText={touched && error}\n        {...inputProps}\n        {...props}\n        fullWidth\n    />\n);\n\ninterface FormValues {\n    username?: string;\n    password?: string;\n}\n\nconst { Form } = withTypes<FormValues>();\n\nconst Login = () => {\n    const [loading, setLoading] = useState(false);\n    const translate = useTranslate();\n    const classes = useStyles();\n    const notify = useNotify();\n    const login = useLogin();\n    const location = useLocation<{ nextPathname: string } | null>();\n\n    const handleSubmit = (auth: FormValues) => {\n        setLoading(true);\n        login(auth, location.state ? location.state.nextPathname : '/').catch(\n            (error: Error) => {\n                setLoading(false);\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : typeof error === 'undefined' || !error.message\n                        ? 'ra.auth.sign_in_error'\n                        : error.message,\n                    'warning',\n                    {\n                        _:\n                            typeof error === 'string'\n                                ? error\n                                : error && error.message\n                                ? error.message\n                                : undefined,\n                    }\n                );\n            }\n        );\n    };\n\n    const validate = (values: FormValues) => {\n        const errors: FormValues = {};\n        if (!values.username) {\n            errors.username = translate('ra.validation.required');\n        }\n        if (!values.password) {\n            errors.password = translate('ra.validation.required');\n        }\n        return errors;\n    };\n\n    return (\n        <Form\n            onSubmit={handleSubmit}\n            validate={validate}\n            render={({ handleSubmit }) => (\n                <form onSubmit={handleSubmit} noValidate>\n                    <div className={classes.main}>\n                        <Card className={classes.card}>\n                            <div className={classes.avatar}>\n                                <Avatar className={classes.icon}>\n                                    <LockIcon />\n                                </Avatar>\n                            </div>\n                            <div className={classes.hint}>\n                                Wecome to Assistor.\n                            </div>\n                            <div className={classes.form}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        name=\"username\"\n                                        // @ts-ignore\n                                        component={renderInput}\n                                        label={translate('ra.auth.username')}\n                                        disabled={loading}\n                                    />\n                                </div>\n                                <div className={classes.input}>\n                                    <Field\n                                        name=\"password\"\n                                        // @ts-ignore\n                                        component={renderInput}\n                                        label={translate('ra.auth.password')}\n                                        type=\"password\"\n                                        disabled={loading}\n                                    />\n                                </div>\n                            </div>\n                            <CardActions className={classes.actions}>\n                                <Button\n                                    variant=\"contained\"\n                                    type=\"submit\"\n                                    color=\"primary\"\n                                    disabled={loading}\n                                    fullWidth\n                                >\n                                    {loading && (\n                                        <CircularProgress\n                                            size={25}\n                                            thickness={2}\n                                        />\n                                    )}\n                                    {translate('ra.auth.sign_in')}\n                                </Button>\n                                <Typography variant=\"body2\">Or</Typography>\n                                <Link\n                                    color=\"textSecondary\"\n                                    component={RouterLink}\n                                    to=\"/register\"\n                                    variant=\"body1\"\n                                >\n                                    Register\n                                </Link>\n                            </CardActions>\n                        </Card>\n                        <Notification />\n                    </div>\n                </form>\n            )}\n        />\n    );\n};\n\nLogin.propTypes = {\n    authProvider: PropTypes.func,\n    previousRoute: PropTypes.string,\n};\n\n// We need to put the ThemeProvider decoration in another component\n// Because otherwise the useStyles() hook used in Login won't get\n// the right theme\nconst LoginWithTheme = (props: any) => (\n    <ThemeProvider theme={createTheme(lightTheme)}>\n        <Login {...props} />\n    </ThemeProvider>\n);\n\nexport default LoginWithTheme;\n","import * as React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Card, Box, Link } from '@material-ui/core';\nimport ContactsIcon from '@material-ui/icons/Contacts';\nimport { useGetList, SimpleList, useGetIdentity } from 'react-admin';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from '../contacts/Avatar';\nimport { Contact } from '../types';\n\nexport const HotContacts = () => {\n    const { identity } = useGetIdentity();\n    const {\n        data: contactData,\n        ids: contactIds,\n        total: contactTotal,\n        loaded: contactsLoaded,\n    } = useGetList<Contact>(\n        'contacts',\n        { page: 1, perPage: 10 },\n        { field: 'last_seen', order: 'DESC' },\n        { status: 'hot', sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    return (\n        <>\n            <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n                <Box ml={2} mr={2} display=\"flex\">\n                    <ContactsIcon color=\"disabled\" fontSize=\"large\" />\n                </Box>\n                <Link\n                    underline=\"none\"\n                    variant=\"h5\"\n                    color=\"textSecondary\"\n                    component={RouterLink}\n                    to=\"/contacts\"\n                >\n                    Hot contacts\n                </Link>\n            </Box>\n            <Card>\n                <SimpleList<Contact>\n                    basePath=\"/contacts\"\n                    linkType=\"show\"\n                    ids={contactIds}\n                    data={contactData}\n                    total={contactTotal}\n                    loaded={contactsLoaded}\n                    primaryText={contact =>\n                        `${contact.first_name} ${contact.last_name}`\n                    }\n                    secondaryText={contact =>\n                        formatDistance(\n                            new Date(contact.last_seen),\n                            new Date(),\n                            {\n                                addSuffix: true,\n                            }\n                        )\n                    }\n                    leftAvatar={contact => <Avatar record={contact} />}\n                />\n            </Card>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Card, CardContent, Typography, Box } from '@material-ui/core';\nimport NoteIcon from '@material-ui/icons/Note';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n    useGetList,\n    useGetIdentity,\n    ReferenceField,\n    TextField,\n    FunctionField,\n} from 'react-admin';\nimport { formatDistance } from 'date-fns';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\n\nimport { Contact as ContactType } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    note: {\n        marginBottom: theme.spacing(2),\n    },\n    noteText: {\n        backgroundColor: theme.palette.grey[200],\n        padding: theme.spacing(1),\n        borderRadius: 10,\n    },\n    noteTextText: {\n        display: '-webkit-box',\n        '-webkit-line-clamp': 3,\n        '-webkit-box-orient': 'vertical',\n        overflow: 'hidden',\n    },\n}));\n\nexport const LatestNotes = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const {\n        data: contactNotesData,\n        ids: contactNotesIds,\n        loaded: contactNotesLoaded,\n    } = useGetList(\n        'contactNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    const {\n        data: dealNotesData,\n        ids: dealNotesIds,\n        loaded: dealNotesLoaded,\n    } = useGetList(\n        'dealNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    const {\n        data: companyNotesData,\n        ids: companyNotesIds,\n        loaded: companyNotesLoaded,\n    } = useGetList(\n        'companyNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    if (!contactNotesLoaded || !dealNotesLoaded || !companyNotesLoaded) {\n        return null;\n    }\n    // TypeScript guards\n    if (\n        !contactNotesIds ||\n        !contactNotesData ||\n        !dealNotesIds ||\n        !dealNotesData ||\n        !companyNotesIds ||\n        !companyNotesData\n    ) {\n        return null;\n    }\n\n    const allNotes = ([] as any[])\n        .concat(\n            contactNotesIds.map(id => ({\n                ...contactNotesData[id],\n                type: 'contactNote',\n            })),\n            dealNotesIds.map(id => ({\n                ...dealNotesData[id], \n                type: 'dealNote' \n            })),\n            companyNotesIds.map(id => ({\n                ...companyNotesData[id], \n                type: 'companyNote' \n            })),\n        )\n        .sort((a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf())\n        .slice(0, 5);\n\n    return (\n        <>\n            <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n                <Box ml={2} mr={2} display=\"flex\">\n                    <NoteIcon color=\"disabled\" fontSize=\"large\" />\n                </Box>\n                <Typography variant=\"h5\" color=\"textSecondary\">\n                    My Latest Notes\n                </Typography>\n            </Box>\n            <Card>\n                <CardContent>\n                    {allNotes.map(note => (\n                        <div\n                            id={`${note.type}_${note.id}`}\n                            key={`${note.type}_${note.id}`}\n                            className={classes.note}\n                        >\n                            <Typography color=\"textSecondary\" gutterBottom>\n                                on{' '}\n                                <NoteSource note={note} />\n                                , added{' '}\n                                {formatDistance(\n                                    new Date(note.date),\n                                    new Date(),\n                                    {\n                                        addSuffix: true,\n                                    }\n                                )}\n                            </Typography>\n                            <div className={classes.noteText}>\n                                <ReactMarkdown children={note.text} remarkPlugins={[remarkGfm]} />\n                            </div>\n                        </div>\n                    ))}\n                </CardContent>\n            </Card>\n        </>\n    );\n};\n\nconst NoteSource = ({ note }: any) => {\n    if (note.type === 'dealNote'){\n        return <Deal note={note} />;\n    }\n    else if (note.type === 'contactNote') {\n        return <Contact note={note} />;\n    }\n    else if (note.type === 'companyNote') {\n        return <Company note={note} />;\n    }\n    return null;\n};\n\nconst Deal = ({ note }: any) => (\n    <>\n        Deal{' '}\n        <ReferenceField\n            record={note}\n            source=\"deal_id\"\n            reference=\"deals\"\n            basePath=\"/deals\"\n            link=\"show\"\n        >\n            <TextField source=\"name\" variant=\"body1\" />\n        </ReferenceField>\n    </>\n);\n\nconst Contact = ({ note }: any) => (\n    <>\n        Contact{' '}\n        <ReferenceField\n            record={note}\n            source=\"contact_id\"\n            reference=\"contacts\"\n            basePath=\"/contacts\"\n            link=\"show\"\n        >\n            <FunctionField<ContactType>\n                variant=\"body1\"\n                render={contact =>\n                    contact ? `${contact.first_name} ${contact.last_name}` : ''\n                }\n            />\n        </ReferenceField>\n    </>\n);\n\nconst Company = ({ note }: any) => (\n    <>\n        Company{' '}\n        <ReferenceField\n            record={note}\n            source=\"company_id\"\n            reference=\"companies\"\n            basePath=\"/companies\"\n            link=\"show\"\n        >\n            <TextField source=\"name\" variant=\"body1\" />\n        </ReferenceField>\n    </>\n);\n","import React, { useState, memo } from \"react\";\nimport { \n    ComposableMap, \n    Geographies, \n    Geography, \n    ZoomableGroup,\n    Marker,\n    Annotation,\n} from 'react-simple-maps';\nimport { scaleQuantile } from 'd3-scale';\nimport { max } from 'd3-array';\nimport { geoCentroid } from \"d3-geo\";\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport ReactTooltip from \"react-tooltip\";\n\nimport { Country } from '../types';\n\nconst geoUrl =\n  \"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\";\n\nconst Map = memo(({setTooltipContent}: any) => {\n    const { data, ids, loaded } = useGetList<Country>(\n        'countries',\n        { perPage: 1000, page: 1 }\n    );\n    if (!loaded) return null;\n\n    const colorScale = scaleQuantile<string>()\n        .domain([0, max(ids.map(id => data[id].nb_companies))])\n        .range([\n            \"#e1f5fe\",\n            \"#b3e5fc\",\n            \"#81d4fa\",\n            \"#4fc3f7\",\n            \"#29b6f6\",\n            \"#03a9f4\",\n            \"#039be5\",\n            \"#0288d1\",\n            \"#0277bd\"\n        ]);\n\n    return (\n        <ComposableMap\n            data-tip=\"\"\n            projection=\"geoAzimuthalEqualArea\"\n            projectionConfig={{\n                rotate: [-25.0, -50.0, 0],\n                scale: 750\n            }}\n        >\n            <ZoomableGroup\n                center={[0, 0]}\n                zoom={1}\n            >\n                <Geographies geography={geoUrl}>\n                    {({ geographies }) => (\n                        <>\n                            {geographies\n                            .map(geo => {\n                                const { ISO_A3 } = geo.properties;\n                                const cur = ids.find(id => data[id].iso3 === ISO_A3);\n                                return (\n                                    <Geography \n                                            key={geo.rsmKey} \n                                            geography={geo} \n                                            fill={cur ? colorScale(data[cur].nb_companies) : \"#D6D6DA\"}\n                                            stroke=\"#EAEAEC\"\n                                            onMouseEnter={() => {\n                                                const { NAME, POP_EST } = geo.properties;\n                                                const nb_companies = cur ? data[cur].nb_companies : 0;\n                                                setTooltipContent(`${NAME} - ${nb_companies}`);\n                                            }}\n                                            onMouseLeave={() => {\n                                                setTooltipContent(\"\");\n                                            }}\n                                        />\n                                );\n                            })}\n                            {/* {geographies.map(geo => {\n                                const centroid = geoCentroid(geo);\n                                const { ISO_A3 } = geo.properties;\n                                const cur = ids.find(id => data[id].iso3 === ISO_A3);\n                                return (\n                                    <g key={geo.rsmKey + \"-name\"}>\n                                        {cur &&\n                                            <Marker coordinates={centroid}>\n                                                <text y=\"2\" fontSize={9} textAnchor=\"middle\">\n                                                {data[cur].nicename}\n                                                </text>\n                                            </Marker>\n                                        }\n                                    </g>\n                                );\n                            })} */}\n                        </>\n                    )}\n                </Geographies>\n            </ZoomableGroup>\n        </ComposableMap>\n    );\n});\n\nexport const CompaniesMap = () => {\n    const [content, setContent] = useState(\"\");\n\n    return (\n        <div>\n            <Map setTooltipContent={setContent} />\n            <ReactTooltip>{content}</ReactTooltip>\n        </div>\n    );\n}","import * as React from 'react';\nimport { Box, Grid } from '@material-ui/core';\n\nimport { Welcome } from './Welcome';\nimport { DealsChart } from './DealsChart';\nimport { HotContacts } from './HotContacts';\nimport { LatestNotes } from './LatestNotes';\nimport { DealsPipeline } from './DealsPipeline';\nimport { CompaniesMap } from './CompaniesMap';\n\nexport const Dashboard = () => {\n    return (\n        <>\n            <Grid container spacing={1}>\n                <Grid item xs={12} sm={8}>\n                    <CompaniesMap />\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                    <HotContacts />\n                </Grid>\n                <Grid item xs={12}>\n                    <LatestNotes />\n                </Grid>\n            </Grid>\n        </>\n    );\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, Form } from 'react-final-form';\nimport { useLocation, Link as RouterLink  } from 'react-router-dom';\nimport {\n    Button,\n    CardActions,\n    CircularProgress,\n    TextField,\n    Grid,\n    CardContent,\n    Typography,\n    Link,\n    Container,\n} from '@material-ui/core';\nimport { Theme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n    useTranslate, \n    useNotify, \n    useLogin, \n    useSafeSetState, \n    useRedirect,\n} from 'ra-core';\nimport axios from 'axios';\n\n\nconst baseURL = \"/auth\";\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    form: {\n        padding: '0 1em 1em 1em',\n    },\n    input: {\n        marginTop: '1em',\n    },\n    button: {\n        width: '100%',\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n    },\n    actions: {\n        padding: '0 1em 1em 1em',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nconst Input = ({\n    meta: { touched, error }, // eslint-disable-line react/prop-types\n    input: inputProps, // eslint-disable-line react/prop-types\n    ...props\n}: {\n    meta: any;\n    input: any;\n}) => (\n    <TextField\n        error={!!(touched && error)}\n        helperText={touched && error}\n        {...inputProps}\n        {...props}\n        fullWidth\n    />\n);\n\nconst RegisterForm = ({ redirectTo }:\n    {redirectTo?: string | undefined;}) => {\n    const [loading, setLoading] = useSafeSetState(false);\n    const translate = useTranslate();\n    const login = useLogin();\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const classes = useStyles();\n\n    const validate = ({ \n        first_name,\n        last_name,\n        email,\n        username, \n        password, \n        confirm \n    }: {\n        first_name: string;\n        last_name: string;\n        email: string;\n        username: string;\n        password: string;\n        confirm: string;\n\n    }) => {\n        const errors = { \n            first_name: !first_name ? translate('ra.validation.required') : undefined, \n            last_name: !last_name ? translate('ra.validation.required') : undefined, \n            email: !email ? translate('ra.validation.required') : undefined, \n            username: !username ? translate('ra.validation.required') : undefined, \n            password: !password ? translate('ra.validation.required') : undefined, \n            confirm: password !== confirm ? 'Confirmation should match password': undefined\n        };\n        return errors;\n    };\n\n    interface ResponseType {\n        message: string;\n    }\n\n    const submit = async ({ \n        first_name,\n        last_name,\n        email,\n        username, \n        password, \n        confirm \n    }: { \n        first_name: string;\n        last_name: string;\n        email: string;\n        username: string;\n        password: string;\n        confirm?: string;\n    }) => {\n        setLoading(true);\n        try{\n        const response = await axios.post<ResponseType>(`${baseURL}/register`, { \n                first_name,\n                last_name,\n                email,\n                username, \n                password\n            })\n        \n        setLoading(false)\n        login({ username, password }, redirectTo)\n        } catch (error: any) {\n            setLoading(false);\n            const response = error.response;\n            if (response.status == 401) {\n                const { message } = error.response.data;\n                notify(`Error:${message}`, 'warning');\n                return Promise.reject(message);\n            }\n            return Promise.reject(error);\n        }\n    };\n\n    return (\n        <Form\n            onSubmit={submit}\n            validate={validate}\n            render={({ handleSubmit }) => (\n                <form className={classes.form} onSubmit={handleSubmit} noValidate>\n                    <CardContent>\n                        <Container maxWidth=\"xs\">\n                        <Grid container spacing={2} >\n                            <Grid item xs={12} sm={6}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"first_name\"\n                                        name=\"first_name\"\n                                        component={Input}\n                                        label=\"First Name\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"last_name\"\n                                        name=\"last_name\"\n                                        component={Input}\n                                        label=\"Last Name\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"email\"\n                                        name=\"email\"\n                                        component={Input}\n                                        label=\"Email Address\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"username\"\n                                        name=\"username\"\n                                        component={Input}\n                                        label={translate('ra.auth.username')}\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        id=\"password\"\n                                        name=\"password\"\n                                        component={Input}\n                                        label={translate('ra.auth.password')}\n                                        type=\"password\"\n                                        disabled={loading}\n                                        autoComplete=\"current-password\"\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        id=\"confirm\"\n                                        name=\"confirm\"\n                                        component={Input}\n                                        label=\"Confirm Password\"\n                                        type=\"password\"\n                                        disabled={loading}\n                                        autoComplete=\"current-password\"\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </Container>\n                    </CardContent>\n                    <CardActions className={classes.actions}>\n                        <Button\n                            variant=\"contained\"\n                            type=\"submit\"\n                            color=\"primary\"\n                            disabled={loading}\n                            className={classes.button}\n                            fullWidth\n                        >\n                            {loading && (\n                                <CircularProgress\n                                    size={25}\n                                    thickness={2}\n                                />\n                            )}\n                            Register\n                        </Button>\n                        <Typography variant=\"body2\">Or</Typography>\n                        <Link\n                            color=\"textSecondary\"\n                            component={RouterLink}\n                            to=\"/login\"\n                            variant=\"body1\"\n                        >\n                            Login\n                        </Link>\n                    </CardActions>\n                </form>\n            )}\n        />\n    );\n};\n\nRegisterForm.propTypes = {\n    redirectTo: PropTypes.string,\n};\n\nexport default RegisterForm;","import React, { ReactNode, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { \n    Card, \n    CardContent, \n    Theme, \n    Avatar,\n    Grid,\n    Link,\n} from '@material-ui/core';\nimport {\n    Notification,\n} from 'react-admin';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport { lightTheme } from '../layout/themes';\n\nimport RegisterForm from './RegisterForm';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n        main: {\n            display: 'flex',\n            flexDirection: 'column',\n            minHeight: '100vh',\n            height: '1px',\n            alignItems: 'center',\n            justifyContent: 'flex-start',\n            backgroundRepeat: 'no-repeat',\n            backgroundSize: 'cover',\n            backgroundImage:\n                'radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)',\n        },\n        card: {\n            minWidth: 300,\n            marginTop: '6em',\n        },\n        avatar: {\n            margin: '1em',\n            display: 'flex',\n            justifyContent: 'center',\n        },\n        icon: {\n            backgroundColor: theme.palette.secondary.main,\n        },\n    }),\n    { name: 'Register' }\n);\n\nconst Register = () => {\n    const classes = useStyles();\n    return (\n            <div className={classes.main}>\n                <Card className={classes.card}>\n                    <div className={classes.avatar}>\n                        <Avatar className={classes.icon}>\n                            <ExitToAppIcon />\n                        </Avatar>\n                    </div>\n                    <RegisterForm />\n                </Card>\n                <Notification />\n            </div>\n    );\n}\n\nconst RegisterWithTheme = (props: any) => (\n    <ThemeProvider theme={createTheme(lightTheme)}>\n        <Register {...props} />\n    </ThemeProvider>\n);\n\nexport default RegisterWithTheme;","import { ThemeName } from '../types';\n\nexport const CHANGE_THEME = 'CHANGE_THEME';\n\nexport const changeTheme = (theme: ThemeName) => ({\n    type: CHANGE_THEME,\n    payload: theme,\n});","import * as React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport { useTranslate, useLocale, useSetLocale, Title } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { changeTheme } from './actions';\nimport { AppState } from '../types';\n\nconst useStyles = makeStyles({\n    label: { width: '10em', display: 'inline-block' },\n    button: { margin: '1em' },\n});\n\nconst Configuration = () => {\n    const translate = useTranslate();\n    const locale = useLocale();\n    const setLocale = useSetLocale();\n    const classes = useStyles();\n    const theme = useSelector((state: AppState) => state.theme);\n    const dispatch = useDispatch();\n    return (\n        <Card>\n            <Title title={translate('pos.configuration')} />\n            <CardContent>\n                <div className={classes.label}>\n                    {translate('pos.theme.name')}\n                </div>\n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={theme === 'light' ? 'primary' : 'default'}\n                    onClick={() => dispatch(changeTheme('light'))}\n                >\n                    {translate('pos.theme.light')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={theme === 'dark' ? 'primary' : 'default'}\n                    onClick={() => dispatch(changeTheme('dark'))}\n                >\n                    {translate('pos.theme.dark')}\n                </Button>\n            </CardContent>\n            <CardContent>\n                <div className={classes.label}>{translate('pos.language')}</div>\n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={locale === 'en' ? 'primary' : 'default'}\n                    onClick={() => setLocale('en')}\n                >\n                    en\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={locale === 'fr' ? 'primary' : 'default'}\n                    onClick={() => setLocale('fr')}\n                >\n                    fr\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    color={locale === 'ja' ? 'primary' : 'default'}\n                    onClick={() => setLocale('ja')}\n                >\n                    ja\n                </Button>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default Configuration;","import * as React from \"react\";\nimport { RouteWithoutLayout } from 'react-admin';\nimport { Route } from 'react-router-dom';\nimport Register from './auth/RegisterPage';\nimport Configuration from './configuration/Configuration';\n\nexport const customRoutes = [\n    <RouteWithoutLayout exact path=\"/register\" component={Register} />,\n    <Route exact path=\"/configuration\" render={() => <Configuration />} />,\n];","import { TranslationMessages } from 'react-admin';\nimport englishMessages from 'ra-language-english';\n\nconst customEnglishMessages: TranslationMessages = {\n    ...englishMessages,\n\n};\n\nexport default customEnglishMessages;","import * as React from 'react';\nimport { Admin, Resource, ListGuesser, EditGuesser, ShowGuesser, defaultTheme } from 'react-admin';\nimport {\n    unstable_createMuiStrictModeTheme,\n    createTheme,\n} from '@material-ui/core/styles';\nimport polyglotI18nProvider from 'ra-i18n-polyglot';\n\nimport { dataProvider } from './dataProvider';\nimport { authProvider } from './authProvider';\nimport { Login, Layout } from './layout';\nimport contacts from './contacts';\nimport companies from './companies';\nimport products from './products';\nimport tasks from './tasks';\nimport productfamiliess from './productFamilies';\nimport deals from './deals';\nimport { Dashboard } from './dashboard/Dashboard';\nimport { customRoutes } from './customRoutes';\n// import Login from './Login'\nimport productFamilies from './productFamilies';\nimport englishMessages from './i18n/en';\n\n// FIXME MUI bug https://github.com/mui-org/material-ui/issues/13394\nconst theme =\n    process.env.NODE_ENV !== 'production'\n        ? unstable_createMuiStrictModeTheme(defaultTheme)\n        : createTheme(defaultTheme);\n\nconst i18nProvider = polyglotI18nProvider(locale => {\n    if (locale === 'fr') {\n        return import('./i18n/fr').then(messages => messages.default);\n    }\n    console.log(locale);\n    if (locale === 'ja') {\n        return import('./i18n/ja').then(messages => messages.default);\n    }\n\n    // Always fallback on english\n    return englishMessages;\n}, 'en');\n\nconst App = () => (\n    <Admin\n        customRoutes={customRoutes}\n        dataProvider={dataProvider}\n        authProvider={authProvider}\n        loginPage={Login}\n        layout={Layout}\n        dashboard={Dashboard}\n        theme={theme}\n        i18nProvider={i18nProvider}\n    >\n        <Resource name=\"deals\" {...deals} />\n        <Resource name=\"contacts\" {...contacts} />\n        <Resource name=\"companies\" {...companies} />\n        <Resource name=\"products\" {...products} />\n        <Resource name=\"productProperties\" />\n        <Resource name=\"propertyTypes\" />\n        <Resource name=\"contactNotes\" />\n        <Resource name=\"companyNotes\" />\n        <Resource name=\"productNotes\" />\n        <Resource name=\"dealNotes\" />\n        <Resource name=\"productFamilies\" {...productFamilies} />\n        <Resource name=\"tasks\" {...tasks} />\n        <Resource name=\"sales\" list={ListGuesser} />\n        <Resource name=\"tags\" list={ListGuesser} />\n        <Resource name=\"countries\" list={ListGuesser} />\n    </Admin>\n);\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import { CssBaseline } from '@material-ui/core';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <CssBaseline />\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}