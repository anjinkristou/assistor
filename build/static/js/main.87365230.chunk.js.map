{"version":3,"sources":["auth.ts","authProvider.ts","dataProvider.ts","layout/Logo.tsx","notifications/NotificationButton.tsx","layout/GlobalSearch.tsx","layout/SwitchLanguage.tsx","linkedin/PinVerificationDialog.tsx","layout/LinkedinLogin.tsx","layout/AppBar.tsx","layout/SubMenu.tsx","companies/sectors.ts","companies/CompanyAvatar.tsx","companies/CountryField.tsx","companies/CompanyCard.tsx","companies/CompanyGridList.tsx","companies/relations.ts","tags/TagChip.tsx","components/CollapsibleListFilter.tsx","companies/CompanyListFilter.tsx","companies/SelectAllButton.tsx","companies/CompanyList.tsx","companies/sizes.ts","companies/DistributorInput.tsx","companies/CompanyCreate.tsx","contacts/Avatar.tsx","misc/Status.tsx","tags/TagsList.tsx","companies/LogoField.tsx","tags/colors.ts","components/RoundButton.tsx","tags/TagsListEdit.tsx","components/CollapsibleAside.tsx","products/ProductsListEdit.tsx","linkedin/UpdateLinkedinCompany.tsx","companies/CompanyAside.tsx","deals/stages.ts","notes/StatusSelector.tsx","notes/NewNote.tsx","notes/Note.tsx","notes/NotesIterator.tsx","products/ProductAvatar.tsx","products/ProductCard.tsx","products/ProductGridList.tsx","companies/CompanyShow.tsx","companies/CompanyEdit.tsx","companies/index.ts","contacts/ContactAside.tsx","contacts/ContactShow.tsx","contacts/ContactListFilter.tsx","contacts/ContactList.tsx","contacts/ContactEdit.tsx","contacts/ContactCreate.tsx","contacts/index.tsx","tasks/TaskAside.tsx","tasks/status.ts","tasks/TaskChip.tsx","tasks/TaskShow.tsx","tasks/TaskStatus.tsx","tasks/TaskListFilter.tsx","tasks/MarkDoneButton.tsx","tasks/TaskList.tsx","tasks/TaskEdit.tsx","tasks/TaskCreate.tsx","tasks/index.ts","deals/DealCard.tsx","deals/DealColumn.tsx","deals/DealListContent.tsx","deals/types.ts","deals/DealCreate.tsx","deals/ContactList.tsx","deals/DealShow.tsx","deals/OnlyMineInput.tsx","deals/DealList.tsx","deals/index.ts","productFamilies/productFamilyCategories.ts","products/ProductListFilter.tsx","products/ProductList.tsx","products/productProprtyCategories.ts","components/ChoiceSelector.tsx","products/CreatePropertyType.tsx","products/PropertyFormIterator.tsx","productFamilies/CreateProductFamily.tsx","products/ProductCreate.tsx","products/ProductImageField.tsx","products/ProductAside.tsx","products/ProductShow.tsx","products/ProductEdit.tsx","products/index.ts","productFamilies/Avatar.tsx","productFamilies/ProductFamilyListFilter.tsx","productFamilies/ProductFamilyList.tsx","productFamilies/ProductFamilyCreate.tsx","productFamilies/ProductFamilyAside.tsx","productFamilies/ProductFamilyEdit.tsx","productFamilies/ProductFamilyShow.tsx","productFamilies/index.ts","layout/Menu.tsx","layout/themes.ts","notifications/NotificationContainer.tsx","layout/Layout.tsx","layout/Login.tsx","dashboard/HotContacts.tsx","dashboard/LatestNotes.tsx","dashboard/CompaniesMap.tsx","dashboard/Dashboard.tsx","auth/RegisterForm.tsx","auth/RegisterPage.tsx","configuration/actions.ts","configuration/GeneralSettings.tsx","configuration/UserSettngs.tsx","configuration/Configuration.tsx","customRoutes.tsx","themeReducer.ts","i18n/en.ts","App.tsx","reportWebVitals.js","index.tsx"],"names":["CREDENTIALS_LOCAL_STORAGE_ITEM","setCredentials","credentials","localStorage","setItem","JSON","stringify","getCredentials","raw","getItem","parse","isTokenValid","access_token","currentDate","Date","decodedToken","decodeJwt","exp","getTime","baseURL","refreshToken","a","token","refresh_token","config","headers","Authorization","axios","post","undefined","response","data","login","username","password","permissions","Promise","resolve","reject","message","msg","status","logout","get","removeItem","register","first_name","last_name","email","getIdentity","id","fullName","avatar","checkError","authProvider","checkAuth","getPermissions","refreshTokenIfInvalid","getList","resource","params","getOne","getMany","getManyReference","create","update","put","updateMany","deleteOne","delete","deleteMany","fetchLinkedinCompany","company_id","loginLinkedin","verifyLoginLinkedin","pin","dataProvider","useStyles","makeStyles","theme","root","display","breakpoints","down","spacing","logoIcon","color","palette","secondary","light","logoText","primary","Logo","classes","className","Typography","variant","AnchorOrigin","vertical","horizontal","TransformOrigin","NotificationButton","props","redirect","useRedirect","identity","useGetIdentity","useState","anchorEl","setAnchorEl","now","useGetList","page","perPage","field","order","status_dif","sales_id","ids","open","loaded","Boolean","hasNotification","length","IconButton","onClick","event","currentTarget","Badge","badgeContent","disableScrollLock","anchorOrigin","transformOrigin","getContentAnchorEl","onClose","map","task","taskOverdue","due_date","toISOString","MenuItem","handleNotificationClick","ListItemAvatar","style","backgroundColor","red","ListItemText","text","formatDistance","createStyles","search","position","borderRadius","shape","alpha","common","white","marginLeft","width","up","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","GlobalSearch","InputBase","placeholder","input","inputProps","menuItem","icon","minWidth","SwitchLanguage","forwardRef","ref","locale","useLocale","setLocale","useSetLocale","e","ListItemIcon","PinVerificationDialog","useDataProvider","notify","useNotify","setPin","handleSubmitPin","Dialog","fullWidth","maxWidth","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","label","type","value","onChange","target","DialogActions","Button","LinkedinLogin","React","setOpen","title","flex","textOverflow","whiteSpace","overflow","spacer","ConfigurationMenu","useTranslate","MenuItemLink","to","primaryText","leftIcon","sidebarIsOpen","CustomUserMenu","UserMenu","CustomAppBar","AppBar","elevation","userMenu","sidebarIsClosed","SubMenu","handleToggle","isOpen","name","children","dense","translate","useSelector","state","admin","ui","sidebarOpen","header","button","Tooltip","placement","Collapse","in","timeout","unmountOnExit","List","component","disablePadding","sectors","sector","main","img","objectFit","small","large","CompanyAvatar","record","size","logo","src","process","alt","imgProps","clsx","image","sizeInPixel","medium","CountryField","source","ImageField","paper","flexDirection","textAlign","marginTop","stats","singleStat","statIcon","marginRight","checkbox","top","right","identifier","lrft","CompanyCard","setElevation","useListContext","onToggleItem","selectedIds","Link","linkToRecord","underline","onMouseEnter","onMouseLeave","Paper","Checkbox","edge","checked","includes","tabIndex","disableRipple","stopPropagation","Box","ReferenceField","reference","link","relation","Chip","SelectField","choices","marginBottom","nb_contacts","nb_notes","gridList","flexWrap","gap","grey","LoadingGridList","nbChildren","fn","key","Array","from","_","LoadedGridList","CompanyGridList","relations","TagChip","border","cursor","sideBig","sideSmall","container","drawerContent","CollapsibleListFilter","childrenWithProps","child","Drawer","anchor","countryList","maxHeight","tagList","CompanyListFilter","tags","tagIds","countries","countryIds","FilterLiveSearch","FilterList","FilterListItem","nicename","country_id","SelectAllButton","onSelect","toolbar","createButton","importOptions","parseConfig","dynamicTyping","CompanyListActions","TopToolbar","SortButton","fields","ExportButton","CreateButton","basePath","sizes","DistributorInput","AutocompleteInput","optionText","country_iso","allowEmpty","resettable","inline","CustomLayout","CardContent","paddingTop","ml","CustomDivider","mb","Divider","Avatar","charAt","getColorFromStatus","Status","bgcolor","ColoredChipField","ChipField","TagsList","ReferenceArrayField","SingleFieldList","linkType","LogoField","imageBroken","setImageBroken","loading","setLoading","useUpdate","refresh","useRefresh","handleClicked","logo_url","CircularProgress","onError","colors","RoundButton","handleClick","selected","TagsListEdit","newTagName","setNewTagName","newTagColor","setNewTagColor","version","setVersion","disabled","setDisabled","allTags","useGetMany","enabled","useCreate","unselectedTagIds","filter","handleAddTag","handleOpenCreateDialog","tag","mt","onDelete","tagId","handleDeleteTag","onSubmit","preventDefault","onSuccess","v","CollapsibleAside","EditButton","ShowButton","ProductsListEdit","use_products","products","handleClose","product","productId","handleDeleteProduct","model","Popover","toString","values","SimpleForm","ReferenceArrayInput","AutocompleteArrayInput","UpdateLinkedinCompany","available","setAvailable","setData","setChecked","onLoad","onSave","arrayData","item","website_url","reduce","x","onCancel","currentIndex","indexOf","newChecked","push","splice","LinearProgress","onToggle","CompanyField","ListItem","CompanyAside","AsideContent","href","website","rel","linkedIn","distributor_id","phone_number","DateField","options","year","month","day","FunctionField","render","stages","stageNames","opportunity","won","lost","delayed","stageChoices","StatusSelector","setStatus","select","buttonSwitcher","previewConatiner","previewRaw","previewMarkdown","paddingRight","borderColor","preview","NewNote","showStatus","setPreview","useRecordContext","useResourceContext","setText","getCurrentDate","date","setDate","foreignKeyMapping","last_seen","multiline","remarkPlugins","remarkGfm","setMinutes","getMinutes","getTimezoneOffset","slice","contacts","deals","companies","metadata","textarea","paddingBottom","lineHeight","buttons","cancel","content","paragraph","fontFamily","typography","fontSize","body1","visibility","Note","note","isLast","isHover","setHover","isEditing","setEditing","noteText","setNoteText","useDelete","mutationMode","handleDelete","showTime","locales","dateStyle","timeStyle","FilledInput","NotesIterator","index","ProductAvatar","family","left","hidden","ProductCard","classNames","nb_properties","Skeleton","animation","ProductGridList","CompanyShowContent","useShowContext","setValue","Card","gridGap","Tabs","indicatorColor","textColor","newValue","scrollButtons","Tab","nb_deals","nb_products","ReferenceManyField","sort","pagination","Pagination","rowsPerPageOptions","TabPanel","other","role","ContactsIterator","contact","RouterLink","ListItemSecondaryAction","CreateRelatedContactButton","pathname","startIcon","CreateRelatedProductButton","DealsIterator","deal","stage","amount","toLocaleString","notation","currency","currencyDisplay","minimumSignificantDigits","updated_at","list","actions","aside","filterDefaultValues","Create","initialValues","TextInput","validate","required","SelectInput","formClassName","FormDataConsumer","formData","ReferenceInput","helperText","sales","edit","show","ShowBase","BusinessIcon","ContactAside","TasksIterator","disableGutters","EmailField","gender","background","ContactShowContent","ContactListFilter","last_seen_gte","endOfYesterday","last_seen_lte","startOfWeek","startOfMonth","subMonths","ContactListContent","SimpleListLoading","hasLeftAvatarOrIcon","hasSecondaryText","ContactListActions","Spacer","ContactEditContent","useEditContext","save","FormWithRedirect","formProps","mr","BooleanInput","Toolbar","omit","EditBase","transform","ContactsIcon","TaskAside","statuses","getStatus","find","TaskChip","statusItem","statusName","statusColor","doneStatus","TaskShowContent","DoneButton","TaskStatus","TaskListFilter","due_date_gte","due_date_lte","endOfToday","endOfWeek","endOfMonth","doneState","MarkDoneButton","BulkUpdateButton","TaskListContent","useActionStyles","TaskListActions","TaskBulkActionButtons","BulkDeleteButton","TaskEditContent","DateInput","bulkActionButtons","FormatListBulletedIcon","cardContent","cardText","DealCard","draggableId","String","provided","snapshot","draggableProps","dragHandleProps","innerRef","opacity","isDragging","p","gutterBottom","borderTopLeftRadius","borderTopRightRadius","droppable","DealColumn","dealIds","align","droppableId","droppableProvided","droppableProps","isDraggingOver","initialDeals","obj","getDealsByColumn","columns","acc","forEach","b","DealListContent","currentSort","filterValues","setDeals","useContext","DataProviderContext","useMutation","payload","useEffect","newDeals","isEqual","onDragEnd","result","destination","column","sourceDeal","destinationDeal","Number","columnDeals","all","previousData","sourceColumn","destinationColumn","sourceDeals","destinationDeals","pop","typeChoices","DealCreate","then","oldDeal","rows","defaultValue","NumberInput","ul","listStyle","li","ContactList","dialog","DealShow","DealShowContent","format","start_at","minHeight","description","OnlyMineInput","alwaysOn","useListFilterContext","displayedFilters","setFilters","FormControlLabel","control","Switch","newFilterValues","defaultProps","dealFilters","SearchInput","DealActions","FilterButton","filters","path","match","MonetizationOnIcon","productFamilyCategories","category","familyList","categoryList","ProductListFilter","familyData","familyIds","family_id","ProductListActions","productProprtyCategories","ChoiceSelector","Select","choice","CreatePropertyType","useCreateSuggestionContext","onCreate","setCategory","setName","unit","setUnit","synonyms","setSynonyms","PropertyFormIterator","SimpleFormIterator","CreateProductFamily","setWebsite","setImage","propertyContainer","ProductImageField","ProductAside","ProductShowContent","nb_used_by","addLabel","Datagrid","useTheme","TabbedForm","FormTab","ArrayInput","FiberManualRecordIcon","ProductFamilyListFilter","ProductFamilyListContent","ProductFamilyListActions","ProductFamilyAside","ProductFamilyEditContent","ProductFamilyShowContent","CategoryIcon","easing","sharp","duration","leavingScreen","closed","Menu","menuCrm","menuProduct","menuCustomers","setState","menu","classnames","DashboardMenuItem","_scrollToTop","tasks","productFamilies","darkTheme","sidebar","overrides","MuiAppBar","colorSecondary","MuiButtonBase","lightTheme","dark","contrastText","default","RaMenuItemLink","borderLeft","active","MuiPaper","elevation1","boxShadow","backgroundClip","MuiButton","contained","MuiLinearProgress","colorPrimary","barColorPrimary","MuiFilledInput","MuiSnackbarContent","NotificationContainer","Notification","autoHideDuration","Layout","appBar","notification","backgroundImage","backgroundRepeat","backgroundSize","card","hint","form","renderInput","meta","touched","error","Form","withTypes","Login","useLogin","location","useLocation","handleSubmit","auth","nextPathname","noValidate","CardActions","thickness","LoginWithTheme","ThemeProvider","createTheme","HotContacts","isInteger","contactData","contactIds","contactTotal","total","contactsLoaded","SimpleList","secondaryText","addSuffix","leftAvatar","noteTextText","LatestNotes","contactNotesData","contactNotesIds","contactNotesLoaded","dealNotesData","dealNotesIds","dealNotesLoaded","companyNotesData","companyNotesIds","companyNotesLoaded","allNotes","concat","valueOf","NoteSource","Deal","Contact","Company","Map","memo","setTooltipContent","countrySelected","colorScale","scaleQuantile","domain","max","nb_companies","range","projectionConfig","rotate","scale","center","zoom","geography","geographies","geo","ISO_A3","properties","cur","iso3","fill","stroke","NAME","POP_EST","rsmKey","CompaniesMap","setContent","Dashboard","Grid","xs","sm","Input","RegisterForm","redirectTo","useAuthProvider","useSafeSetState","submit","confirm","Container","autoComplete","Register","RegisterWithTheme","CHANGE_THEME","GeneralSettings","dispatch","useDispatch","subheader","ListSubheader","changeTheme","iframe","actionItem","LinkedinSettings","userId","setUsername","setPassword","useGetOne","linkedin_username","handleUpdate","linkedin_password","console","log","handleLogin","InputProps","startAdornment","InputAdornment","disablePointerEvents","endIcon","UserSettings","flexGrow","tabPanel","tabs","borderRight","divider","a11yProps","Configuration","orientation","customRoutes","RouteWithoutLayout","exact","themeReducer","previousState","action","customEnglishMessages","englishMessages","i18nProvider","defaultTheme","polyglotI18nProvider","messages","App","Admin","loginPage","layout","dashboard","customReducers","disableTelemetry","Resource","ListGuesser","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.87365230.chunk.js","sourcesContent":["import axios, { AxiosError } from 'axios';\nimport decodeJwt, { JwtPayload } from 'jwt-decode';\n\nconst baseURL = \"/auth\";\n\nexport type Credentials = {\n  access_token: string;\n  refresh_token: string;\n  permissions: string;\n};\n\nconst CREDENTIALS_LOCAL_STORAGE_ITEM = \"credentials\";\n\nexport function isAuthenticated(): boolean {\n  return Boolean(getCredentials());\n}\n\nexport function setCredentials(credentials: Credentials) {\n  localStorage.setItem(\n    CREDENTIALS_LOCAL_STORAGE_ITEM,\n    JSON.stringify(credentials)\n  );\n}\n\nexport function getCredentials(): Credentials | null {\n  const raw = localStorage.getItem(CREDENTIALS_LOCAL_STORAGE_ITEM);\n  if (raw === null) {\n    return null;\n  }\n  return JSON.parse(raw);\n}\n\nexport function removeCredentials(): void {\n  localStorage.removeItem(CREDENTIALS_LOCAL_STORAGE_ITEM);\n}\n\n\nexport const isTokenValid = (access_token: string) => {\n  const currentDate = new Date();\n  const decodedToken: JwtPayload = decodeJwt<JwtPayload>(access_token);\n  return decodedToken && decodedToken.exp && (decodedToken.exp * 1000 > currentDate.getTime());\n}","import { AuthProvider } from 'react-admin';\nimport decodeJwt, { JwtPayload } from 'jwt-decode';\nimport axios, { AxiosError } from 'axios';\nimport {\n    isAuthenticated,\n    setCredentials,\n    getCredentials,\n    removeCredentials,\n    isTokenValid,\n} from \"./auth\"\nimport jwtDecode from 'jwt-decode';\n\ninterface RefreshToken {\n    access_token: string;\n  }\n\nconst baseURL = \"/auth\";\n\ninterface Permission {\n    permissions: string;\n}\n\ninterface LoginToken {\n    access_token: string;\n    refresh_token: string;\n}\n\ninterface UserIdentity {\n    id: number;\n    fullName: string;\n    avatar: string;\n}\n\n\nexport const refreshToken = async () => {\n    const credentials = getCredentials();\n    if(!credentials) return;\n  \n    const token = credentials?.refresh_token;\n  \n    const config = {\n        headers: { Authorization: `Bearer ${token}` }\n    };\n    let response = await axios.post<RefreshToken>(`${baseURL}/refresh`, undefined, config)\n    const { access_token } = response.data;\n    setCredentials({\n        ...credentials,\n        access_token: access_token,\n    });\n};\n\n\nconst login = async ({ username, password }: {username: string; password:string;}) => {\n    try{\n        const response = await axios.post<LoginToken>(`${baseURL}/login`, { username, password })\n        const { access_token, refresh_token } = response.data;\n        const decodedToken = decodeJwt<Permission>(access_token);\n        setCredentials({\n            access_token,\n            refresh_token,\n            permissions: decodedToken.permissions,\n        });\n        return Promise.resolve();\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data.msg, status: response.status});\n    }\n};\n\nconst logout = async () => {\n    await axios.get(`${baseURL}/logout`)\n    removeCredentials();\n    return Promise.resolve('/login');\n}\n\nconst register = async ({ \n    first_name,\n    last_name,\n    email,\n    username, \n    password\n}: { \n    first_name: string;\n    last_name: string;\n    email: string;\n    username: string;\n    password: string;\n}) => {\n    try{\n    const response = await axios.post<ResponseType>(`${baseURL}/register`, { \n            first_name,\n            last_name,\n            email,\n            username, \n            password\n        })\n\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data.msg, status: response.status});\n    }\n}\n\nconst getIdentity = async () => { \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` }\n        };\n        let response = await axios.get<UserIdentity>(`${baseURL}/user`, config)\n        const { id, fullName, avatar } = response.data;\n        \n        return Promise.resolve({ id, fullName, avatar });\n    } catch (error: any) {\n        // const response = error.response;\n        // removeCredentials();\n        // return Promise.reject({message: response.data, status: response.status});\n\n        return Promise.reject(error);\n    }\n };\n\n const checkError = async ({ status }: any) => {\n    if (status === 401 || status === 403 || status === 422) {\n        try{\n            refreshToken();\n        } catch (error: any) {\n            return Promise.reject();\n        }\n    }\n    return Promise.resolve();\n};\n\nconst checkAuth = () => {\n    const credentials = getCredentials();\n    const token = credentials?.access_token;\n    return token && isTokenValid(token)? Promise.resolve() : Promise.reject();\n}\n\nconst getPermissions = () => {\n    return Promise.resolve();\n}\n\nexport const authProvider: AuthProvider =  {\n    login: login,\n    checkError: checkError,\n    checkAuth: checkAuth,\n    logout: logout,\n    getIdentity: getIdentity,\n    getPermissions: getPermissions,\n    register: register,\n};","import axios, { AxiosError } from 'axios';\nimport { \n    GetListResult,\n    GetOneResult,\n    GetManyResult,\n    GetManyReferenceResult,\n    CreateResult,\n    UpdateResult,\n    UpdateManyResult,\n    DeleteResult,\n    DeleteManyResult,\n    Identifier,\n}  from 'react-admin'\n\nimport {\n    getCredentials, \n    isTokenValid,\n} from \"./auth\"\n\nimport { refreshToken } from './authProvider';\n\nconst refreshTokenIfInvalid = () => {\n    const credentials = getCredentials();\n    const token = credentials?.access_token;\n\n    if(token && !isTokenValid(token)){\n        refreshToken();\n    }\n}\n\n\nconst getList = async (resource: string, params: any): Promise<GetListResult<any>> => {\n    refreshTokenIfInvalid();\n\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetListResult<any>>(`/${resource}/list`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getOne = async (resource: string, params: any): Promise<GetOneResult<any>> => {\n    refreshTokenIfInvalid();\n\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetOneResult<any>>(`/${resource}/item`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getMany = async (resource: string, params: any): Promise<GetManyResult<any>> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetManyResult<any>>(`/${resource}/items`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst getManyReference = async (resource: string, params: any): Promise<GetManyReferenceResult<any>>  => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.get<GetManyReferenceResult<any>>(`/${resource}/refs`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst create = async (resource: string, params: any): Promise<CreateResult<any>> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.post<CreateResult<any>>(`/${resource}/item`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst update = async (resource: string, params: any): Promise<UpdateResult<any>> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.put<UpdateResult<any>>(`/${resource}/item`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst updateMany = async (resource: string, params: any): Promise<UpdateManyResult> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.put<UpdateManyResult>(`/${resource}/items`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst deleteOne = async (resource: string, params: any): Promise<DeleteResult<any>> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.delete<DeleteResult<any>>(`/${resource}/item`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst deleteMany = async (resource: string, params: any): Promise<DeleteManyResult> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params,\n        };\n        const response = await axios.delete<DeleteManyResult>(`/${resource}/items`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst fetchLinkedinCompany = async (company_id: Identifier): Promise<any> => {\n    refreshTokenIfInvalid();\n\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n            params: {id: company_id },\n        };\n        const response = await axios.get<any>(`/linkedin/company/fetch`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst loginLinkedin = async (): Promise<any> => {\n    refreshTokenIfInvalid();\n\n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const response = await axios.get<any>(`/linkedin/login`, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nconst verifyLoginLinkedin = async (pin: string) : Promise<any> => {\n    refreshTokenIfInvalid();\n    \n    try{\n        const credentials = getCredentials();\n        const token = credentials?.access_token;\n        const config = {\n            headers: { Authorization: `Bearer ${token}` },\n        };\n        const params = {\n            pin\n        }\n        const response = await axios.post<any>(`/linkedin/login/verify`, params, config)\n        return Promise.resolve(response.data);\n    } catch (error: any) {\n        const response = error.response;\n        return Promise.reject({message: response.data, status: response.status});\n    }\n};\n\nexport const dataProvider = {\n    getList:    getList,\n    getOne:     getOne,\n    getMany:    getMany,\n    getManyReference: getManyReference,\n    create:     create,\n    update:     update,\n    updateMany: updateMany,\n    delete:     deleteOne,\n    deleteMany: deleteMany,\n    // Linkedin\n    fetchLinkedinCompany: fetchLinkedinCompany,\n    loginLinkedin: loginLinkedin,\n    verifyLoginLinkedin: verifyLoginLinkedin,\n}\n","import * as React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        [theme.breakpoints.down(\"xs\")]: {\n            display: \"none\",\n        },\n        alignItems:\"center\",\n        gap: theme.spacing(1)\n    },\n    logoIcon: {\n        color: theme.palette.secondary.light,\n    },\n    logoText: {\n        color: theme.palette.primary.light,\n    }\n}));\n\nconst Logo = () => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <AccountBalanceWalletIcon className={classes.logoIcon} />\n            <Typography variant=\"h6\" className={classes.logoText} >\n                Assistor\n            </Typography>\n        </div>\n    );\n};\n\nexport default Logo;\n","import * as React from 'react';\nimport { useState } from 'react';\n\nimport {\n    Avatar,\n    Badge, \n    IconButton, \n    ListItem, \n    ListItemAvatar, \n    ListItemSecondaryAction, \n    ListItemText, \n    Menu,\n    MenuItem,\n    PopoverOrigin,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { \n    useGetList, \n    useRedirect, \n    ReferenceField,\n    FunctionField,\n    useGetIdentity,\n} from 'react-admin';\nimport { red } from '@material-ui/core/colors';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\n\nimport { Sale, Task } from '../types';\nimport { formatDistance } from 'date-fns';\nimport { TaskStatus } from '../tasks/TaskStatus';\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\n\nconst AnchorOrigin: PopoverOrigin = {\n    vertical: 'bottom',\n    horizontal: 'right',\n};\n\nconst TransformOrigin: PopoverOrigin = {\n    vertical: 'top',\n    horizontal: 'right',\n};\n\nconst NotificationButton = (props: any) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    const { identity } = useGetIdentity();\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n    const now = Date.now();\n\n    const { data, ids, loaded } = useGetList<Task>(\n        'tasks',\n        { page: 1, perPage: 1000 },\n        { field: 'due_date', order: 'ASC' },\n        { status_dif: 'done', sales_id: identity && identity?.id,},\n    );\n\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => setAnchorEl(event.currentTarget);\n    const handleClose = () => setAnchorEl(null);\n\n    const handleNotificationClick = (id: any) => {\n        setAnchorEl(null);\n\n        redirect(`/tasks/${id}/show`);\n    }\n\n    const open = Boolean(anchorEl);\n\n    const hasNotification = ids.length > 0;\n      \n    return (\n        <div {...props}>\n            <IconButton \n                aria-owns={open ? 'notification-menu' : ''}\n                aria-haspopup={true}\n                color=\"inherit\"\n                onClick={handleClick}\n            >\n                <Badge \n                    badgeContent={ids.length} \n                    color=\"error\"\n                > \n                    { hasNotification\n                        ? <NotificationsIcon />\n                        : <NotificationsNoneIcon />\n                    }\n                </Badge>\n            </IconButton>\n            { hasNotification &&\n                <Menu \n                id=\"notification-menu\"\n                disableScrollLock\n                anchorEl={anchorEl}\n                anchorOrigin={AnchorOrigin}\n                transformOrigin={TransformOrigin}\n                getContentAnchorEl={null}\n                open={open}\n                onClose={handleClose}\n                >\n                    {ids.map(id => {\n                        const task = data[id];\n                        const taskOverdue = task.due_date < (new Date()).toISOString();\n                        return (\n                            <MenuItem onClick={() => handleNotificationClick(id)}>\n                                <ListItemAvatar>\n                                <Avatar\n                                    style={taskOverdue ? { backgroundColor: red[400] } : undefined}\n                                >\n                                    {taskOverdue\n                                    ? <NotificationsActiveIcon />\n                                    : <AssignmentTurnedInIcon />\n                                    }\n                                </Avatar>\n                                </ListItemAvatar>\n                                <ListItemText\n                                    primary={\n                                        <>\n                                        {task.text}\n                                        </>\n                                    }\n                                    secondary={\n                                        <>\n                                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                                due in{' '}\n                                                {formatDistance(\n                                                    new Date(task.due_date),\n                                                    now\n                                                    )}\n                                            </Typography>\n                                        </>\n                                    }\n                                    />\n                            </MenuItem>\n                        );\n                    })}\n                </Menu>\n             }\n        </div>\n    )\n}\n\nexport default NotificationButton;","import React from 'react';\nimport InputBase from '@material-ui/core/InputBase';\nimport { createStyles, alpha, Theme, makeStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    search: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: alpha(theme.palette.common.white, 0.15),\n      '&:hover': {\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\n      },\n      marginLeft: 0,\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: theme.spacing(1),\n        width: 'auto',\n      },\n    },\n    searchIcon: {\n      padding: theme.spacing(0, 2),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    inputRoot: {\n      color: 'inherit',\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 0),\n      // vertical padding + font size from searchIcon\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n      transition: theme.transitions.create('width'),\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: '12ch',\n        '&:focus': {\n          width: '20ch',\n        },\n      },\n    },\n  }),\n);\n\nconst GlobalSearch = () => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>\n            <InputBase\n              placeholder=\"Search…\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n            />\n          </div>\n    );\n};\n\nexport default GlobalSearch;","import * as React from 'react';\nimport { forwardRef, memo } from 'react';\nimport { useLocale, useSetLocale } from 'react-admin';\nimport { MenuItem, ListItemIcon, MenuItemProps } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Language from '@material-ui/icons/Language';\n\nconst useStyles = makeStyles(theme => ({\n    menuItem: {\n        color: theme.palette.text.secondary,\n    },\n    icon: { minWidth: theme.spacing(5) },\n}));\n\nconst SwitchLanguage = forwardRef(({onClick, ...props}: MenuItemProps, ref: any) => {\n    const locale = useLocale();\n    const setLocale = useSetLocale();\n    const classes = useStyles();\n    return (\n        <MenuItem\n            ref={ref}\n            className={classes.menuItem}\n            onClick={e => {\n                setLocale(locale === 'en' ? 'ja' : 'en');\n                if(onClick) onClick(e);\n            }}\n        >\n            <ListItemIcon className={classes.icon}>\n                <Language />\n            </ListItemIcon>\n            Switch Language\n        </MenuItem>\n    );\n});\n\nexport default SwitchLanguage;","import React, { useState } from 'react';\nimport { \n    TextField , \n    Button, \n    Dialog, \n    DialogActions, \n    DialogContent, \n    DialogContentText,\n    DialogTitle\n} from '@material-ui/core';\nimport { \n    useDataProvider, \n    useNotify, \n} from 'react-admin';\n\n\n\nconst PinVerificationDialog = ({open, onClose}: any) => {\n    const dataProvider = useDataProvider();\n    const notify = useNotify();\n    const [pin, setPin] = useState('');\n\n    const handleSubmitPin = async () => {\n        try {\n            await dataProvider.verifyLoginLinkedin(pin);\n            notify('Linkedin login successfull', 'info');\n            onClose();\n        } catch (error: any) {\n            const message = error.message;\n            notify('Linkedin login failed', 'warning');\n        }\n    }\n\n    return (\n        <Dialog \n            onClose={onClose} \n            open={open}\n            fullWidth={true}\n            maxWidth=\"sm\"\n        >\n            <DialogTitle>Pin verification</DialogTitle>\n            <DialogContent>\n            <DialogContentText>\n                Check your email and insert the pin number in the field below.\n            </DialogContentText>\n            <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"pin\"\n                label=\"Pin\"\n                type=\"string\"\n                fullWidth\n                value={pin}\n                onChange={e => setPin(e.target.value)}\n            />\n            </DialogContent>\n            <DialogActions>\n                <Button \n                    onClick={handleSubmitPin} \n                    color=\"primary\" \n                    autoFocus\n                >\n                    Submit\n                </Button>\n                <Button \n                    onClick={onClose} \n                    color=\"secondary\" \n                >\n                    Cancel\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default PinVerificationDialog;","import React, { useState } from 'react';\nimport { forwardRef, memo } from 'react';\nimport { useDataProvider, useLocale, useNotify, useSetLocale } from 'react-admin';\nimport { MenuItem, ListItemIcon, MenuItemProps } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Language from '@material-ui/icons/Language';\nimport PinVerificationDialog from '../linkedin/PinVerificationDialog';\nimport LinkedInIcon from '@material-ui/icons/LinkedIn';\n\nconst useStyles = makeStyles(theme => ({\n    menuItem: {\n        color: theme.palette.text.secondary,\n    },\n    icon: { minWidth: theme.spacing(5) },\n}));\n\nconst LinkedinLogin = forwardRef(({onClick, ...props}: MenuItemProps, ref: any) => {\n    const locale = useLocale();\n    const setLocale = useSetLocale();\n    const notify = useNotify();\n    const classes = useStyles();\n    const dataProvider = useDataProvider();\n    const [open, setOpen] = React.useState(false);\n\n    const login = async () => {\n        try {\n            await dataProvider.loginLinkedin();\n            notify('Linkedin login successfull', 'info');\n        } catch (error: any) {\n            const message = error.message;\n            notify('Linkedin login failed', 'warning');\n            setOpen(true);\n        }\n    }\n\n    return (\n        <>\n        <MenuItem\n            ref={ref}\n            className={classes.menuItem}\n            onClick={e => {\n                login();\n                if(onClick) onClick(e);\n            }}\n        >\n            <ListItemIcon className={classes.icon}>\n                <LinkedInIcon />\n            </ListItemIcon>\n            LinkedIn Login\n        </MenuItem>\n        <PinVerificationDialog open={open} onClose={() => setOpen(false)} />\n        </>\n    );\n});\n\nexport default LinkedinLogin;","import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { AppBar, UserMenu, MenuItemLink, useTranslate } from 'react-admin';\nimport Typography from '@material-ui/core/Typography';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Logo from './Logo';\nimport NotificationButton from '../notifications/NotificationButton';\nimport GlobalSearch from './GlobalSearch';\nimport SwitchLanguage from './SwitchLanguage';\nimport LinkedinLogin from './LinkedinLogin';\n\nconst useStyles = makeStyles({\n    title: {\n        flex: 1,\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n    },\n    spacer: {\n        flex: 1,\n    },\n});\n\nconst ConfigurationMenu = forwardRef<any, any>((props, ref) => {\n    const translate = useTranslate();\n    return (\n        <MenuItemLink\n            ref={ref}\n            to=\"/configuration\"\n            primaryText=\"Configuration\"\n            leftIcon={<SettingsIcon />}\n            onClick={props.onClick}\n            sidebarIsOpen\n        />\n    );\n});\n\nconst CustomUserMenu = (props: any) => (\n    <UserMenu {...props}>\n        <ConfigurationMenu />\n        <LinkedinLogin />\n        <SwitchLanguage />\n    </UserMenu>\n);\n\nconst CustomAppBar = (props: any) => {\n    const classes = useStyles();\n    return (\n        <AppBar \n            {...props} \n            elevation={1} \n            userMenu={<CustomUserMenu />\n        }>\n            <Typography\n                variant=\"h6\"\n                color=\"inherit\"\n                className={classes.title}\n                id=\"react-admin-title\"\n            />\n            <Logo />\n            <span className={classes.spacer} />\n            <GlobalSearch />\n            <NotificationButton />\n        </AppBar>\n    );\n};\n\nexport default CustomAppBar;\n","import * as React from 'react';\nimport { Fragment, ReactElement, ReactNode } from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n    List,\n    MenuItem,\n    ListItemIcon,\n    Typography,\n    Collapse,\n    Tooltip,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport { useTranslate, ReduxState } from 'react-admin';\n\nconst useStyles = makeStyles(theme => ({\n    icon: { minWidth: theme.spacing(5) },\n    sidebarIsOpen: {\n        '& a': {\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\n            paddingLeft: theme.spacing(4),\n        },\n    },\n    sidebarIsClosed: {\n        '& a': {\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\n            paddingLeft: theme.spacing(2),\n        },\n    },\n}));\n\ninterface Props {\n    dense: boolean;\n    handleToggle: () => void;\n    icon: ReactElement;\n    isOpen: boolean;\n    name: string;\n    children: ReactNode;\n}\n\nconst SubMenu = (props: Props) => {\n    const { handleToggle, isOpen, name, icon, children, dense } = props;\n    const translate = useTranslate();\n    const classes = useStyles();\n    const sidebarIsOpen = useSelector<ReduxState, boolean>(\n        state => state.admin.ui.sidebarOpen\n    );\n\n    const header = (\n        <MenuItem dense={dense} button onClick={handleToggle}>\n            <ListItemIcon className={classes.icon}>\n                {isOpen ? <ExpandMore /> : icon}\n            </ListItemIcon>\n            <Typography variant=\"inherit\" color=\"textSecondary\">\n                {translate(name)}\n            </Typography>\n        </MenuItem>\n    );\n\n    return (\n        <Fragment>\n            {sidebarIsOpen || isOpen ? (\n                header\n            ) : (\n                <Tooltip title={translate(name)} placement=\"right\">\n                    {header}\n                </Tooltip>\n            )}\n            <Collapse in={isOpen} timeout=\"auto\" unmountOnExit>\n                <List\n                    dense={dense}\n                    component=\"div\"\n                    disablePadding\n                    className={\n                        sidebarIsOpen\n                            ? classes.sidebarIsOpen\n                            : classes.sidebarIsClosed\n                    }\n                >\n                    {children}\n                </List>\n            </Collapse>\n        </Fragment>\n    );\n};\n\nexport default SubMenu;\n","export const sectors = [\n    'Factory Automation',\n    'Logistics Automation',\n    'Warehouse Automation',\n    'Consulting & Development',\n].map(sector => ({ id: sector, name: sector }));\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport clsx from 'clsx';\n\nimport { Company } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    avatar: {\n        width: 60,\n        height: 60,\n        backgroundColor: 'aliceblue',\n        color: theme.palette.secondary.main,\n    },\n    img: {\n        objectFit: 'contain',\n    },\n    small: {\n        width: 20,\n        height: 20,\n    },\n    large: {\n        width: 40,\n        height: 40,\n    },\n}));\n\nexport const CompanyAvatar = ({\n    record,\n    size = 'large',\n}: {\n    record?: Company;\n    size?: 'small' | 'large';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    if(!record.logo) return (\n        <Avatar\n            alt={record.name}\n            className={classes.avatar}\n        >\n            <BusinessIcon />\n        </Avatar>\n    )\n    return (\n        <Avatar\n            src={process.env.PUBLIC_URL + record.logo}\n            alt={record.name}\n            className={classes.avatar}\n            imgProps={{ className: clsx(classes.img, classes[size]) }}\n        />\n    );\n};\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageField } from 'react-admin';\n\nexport interface StyleProps {\n    width: number;\n}\n\nconst useStyles = makeStyles<Theme, StyleProps>(theme => ({\n    image: {\n        width: props => props.width\n    },\n}));\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const CountryField = ({\n    record,\n    source=\"url\",\n    title=\"nicename\",\n    size = 'medium',\n}: {\n    record?: { logo: string; name: string };\n    source?: string;\n    title?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles({width: sizeInPixel[size]});\n    if (!record) return null;\n\n    return (\n        <ImageField \n            record={record as any}\n            source={source} \n            title={title}\n            classes={classes}\n        />\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Paper, Typography, Link as MuiLink, Box, Chip, Checkbox } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContactsIcon from '@material-ui/icons/AccountCircle';\nimport DealIcon from '@material-ui/icons/MonetizationOn';\nimport NoteIcon from '@material-ui/icons/Note';\nimport { linkToRecord, SelectField, ReferenceField, useListContext } from 'react-admin';\nimport { Link } from 'react-router-dom';\n\nimport { sectors } from './sectors';\nimport { CompanyAvatar } from './CompanyAvatar';\nimport { Company } from '../types';\nimport { CountryField } from './CountryField';\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        padding: '1em',\n        position: 'relative',\n    },\n    identity: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    name: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    stats: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        width: '100%',\n    },\n    singleStat: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    statIcon: {\n        marginRight: theme.spacing(1),\n    },\n    checkbox: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n    },\n    identifier: {\n        position: 'absolute',\n        top: theme.spacing(1),\n        lrft: 0,\n    }\n}));\n\nexport const CompanyCard = ({ record }: { record: Company }) => {\n    const classes = useStyles();\n    const [elevation, setElevation] = useState(1);\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<Company>();\n    return (\n        <MuiLink\n            component={Link}\n            to={linkToRecord('/companies', record.id, 'show')}\n            underline=\"none\"\n            onMouseEnter={() => setElevation(3)}\n            onMouseLeave={() => setElevation(1)}\n        >\n            <Paper className={classes.paper} elevation={elevation}>\n                <Checkbox\n                    edge=\"start\"\n                    checked={selectedIds.includes(record.id)}\n                    tabIndex={-1}\n                    disableRipple\n                    className={classes.checkbox}\n                    onClick={(e: any )=> {\n                        e.stopPropagation();\n                        onToggleItem(record.id);\n                    }}\n                />\n                <Typography \n                    variant=\"body2\" \n                    color=\"textSecondary\"\n                    className={classes.identifier}\n                >\n                    {`#${record.id}`}\n                </Typography>\n                <div className={classes.identity}>\n                    <CompanyAvatar record={record} />\n                    <div className={classes.name}>\n                        <Box display=\"flex\" alignItems=\"center\">\n                        <Typography variant=\"subtitle2\">\n                            {record.name}\n                        </Typography>\n                        <ReferenceField\n                            record={record}\n                            source=\"country_id\"\n                            reference=\"countries\"\n                            link={false}\n                        >\n                            <CountryField size='small' />\n                        </ReferenceField>\n                        </Box>\n                        {record.relation && (\n                            <Chip \n                                label={record.relation} \n                                variant=\"outlined\" \n                                size=\"small\"\n                            />\n                        )}\n                        <SelectField\n                            color=\"textSecondary\"\n                            source=\"sector\"\n                            choices={sectors}\n                            record={record}\n                        />\n                    </div>\n                </div>\n                <div className={classes.stats}>\n                    <div className={classes.singleStat}>\n                        <ContactsIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_contacts}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_contacts > 1\n                                    ? 'contacts'\n                                    : 'contact'}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div className={classes.singleStat}>\n                        <NoteIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_notes}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_notes > 1 ? 'notes' : 'note'}\n                            </Typography>\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </MuiLink>\n    );\n};\n","import * as React from 'react';\nimport { Box, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useListContext, Identifier } from 'react-admin';\n\nimport { CompanyCard } from './CompanyCard';\nimport { Company } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    gridList: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        width:  '100%',\n        gap: '5px',\n    },\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: theme.palette.grey[200],\n    },\n}));\n\nconst times = (nbChildren: number, fn: (key: number) => any) =>\n    Array.from({ length: nbChildren }, (_, key) => fn(key));\n\nconst LoadingGridList = () => {\n    const classes = useStyles();\n    return (\n        <Box className={classes.gridList}>\n            {times(15, key => (\n                <Paper className={classes.paper} key={key} />\n            ))}\n        </Box>\n    );\n};\n\nconst LoadedGridList = () => {\n    const { ids, data } = useListContext<Company>();\n    const classes = useStyles();\n\n    if (!ids || !data) return null;\n\n    return (\n        <Box className={classes.gridList}>\n            {ids.map((id: Identifier) => (\n                <CompanyCard key={id} record={data[id]} />\n            ))}\n        </Box>\n    );\n};\n\nexport const CompanyGridList = () => {\n    const { loaded } = useListContext();\n    return loaded ? <LoadedGridList /> : <LoadingGridList />;\n};\n","export const relations = [\n    'Distributor',\n    'End-customer',\n    'Prospect',\n    'Competitor',\n].map(relations => ({ id: relations, name: relations }));","import { Box, Chip } from '@material-ui/core';\nimport { Tag } from '../types'\n\nexport const TagChip = ({ record }: { record: Tag; }) => (\n    <>\n        { record && (\n                <Chip\n                label={record.name}\n                size=\"small\"\n                style={{\n                    backgroundColor: record.color,\n                    border: 0,\n                    cursor: 'pointer',\n                }}\n            />\n        )}\n    </>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { Drawer, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        order: -1,\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    sideBig: {\n        width: 250,\n        minWidth: 250,\n        marginLeft: theme.spacing(2),\n        [theme.breakpoints.down('xs')]:{\n            display: 'none',\n        }\n    },\n    sideSmall: {\n        [theme.breakpoints.up('sm')]:{\n            display: 'none',\n        }\n    },\n    container: {\n        order: -1,\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        minWidth: '13em',\n    },\n    drawerContent: {\n         marginTop: theme.spacing(2),\n         marginLeft: theme.spacing(1),\n         marginRight: theme.spacing(1),\n         maxWidth: theme.spacing(32),\n    }\n}));\n\nexport const CollapsibleListFilter = ({ children }: {children: any;}) => {\n    const classes = useStyles();\n    const [isOpen, setOpen] = useState(false);\n    const childrenWithProps = React.Children.map(children, child => \n        React.isValidElement(child)\n        ? React.cloneElement(child as React.ReactElement<any>, {})\n        : child\n    );\n    return (\n        <div className={classes.root}>\n            <div className={classes.sideBig}>\n                {childrenWithProps}\n            </div>\n            <div className={classes.sideSmall}>\n                <IconButton \n                    onClick={() => setOpen(true)}\n                    color=\"secondary\"\n                >\n                    <ChevronRightIcon />\n                </IconButton>\n            </div>\n            <Drawer \n                anchor=\"left\" \n                open={isOpen} onClose={() => setOpen(false)}\n            >\n                <div className={classes.drawerContent}>\n                    {childrenWithProps}\n                </div>\n            </Drawer>\n        </div>\n    );\n};","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { useState } from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip, Drawer, IconButton, ListItem } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport PublicIcon from '@material-ui/icons/Public';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { sectors } from './sectors';\nimport { relations } from './relations';\nimport { TagChip } from '../tags/TagChip';\nimport { Country, Tag } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minWidth: '13em',\n    },\n    countryList: {\n        maxHeight: theme.spacing(20), \n        overflow: 'auto',\n    },\n    tagList: {\n        maxHeight: theme.spacing(20), \n        overflow: 'auto',\n    }\n}));\n\nexport const CompanyListFilter = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const { data: tags, ids: tagIds } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 500 },\n        { field: 'name', order: 'ASC' }\n    );\n\n    const { data: countries, ids: countryIds } = useGetList<Country>(\n        'countries',\n        { page: 1, perPage: 500 },\n        { field: 'name', order: 'ASC' }\n    );\n\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n\n            <FilterList label=\"Relation\" icon={<BusinessIcon />}>\n                {relations.map(relation => (\n                    <FilterListItem\n                        key={relation.id}\n                        label={relation.name}\n                        value={{ relation: relation.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList label=\"Tags\" icon={<LocalOfferIcon />}>\n                <div className={classes.tagList}>\n                    {tagIds &&\n                        tags &&\n                        tagIds.map(id => (\n                            <FilterListItem\n                                key={id}\n                                label={<TagChip record={tags[id]}/>}\n                                value={{ tags: [id] }}\n                            />\n                    ))}\n                </div>\n            </FilterList>\n\n            <FilterList label=\"Sector\" icon={<LocalShippingIcon />}>\n                {sectors.map(sector => (\n                    <FilterListItem\n                        key={sector.id}\n                        label={sector.name}\n                        value={{ sector: sector.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList label=\"Countries\" icon={<PublicIcon />}>\n                <div className={classes.countryList}>\n                    {countryIds &&\n                        countries &&\n                        countryIds.map(id => (\n                            <FilterListItem\n                            key={id}\n                            label={countries[id].nicename}\n                            value={{ country_id: id }}\n                            />\n                    ))}\n                </div>\n            </FilterList>\n\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","// in ./MarkDoneButton.js\nimport * as React from 'react';\nimport { Button, useListContext } from 'react-admin';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport { Company } from '../types';\n\nconst doneState = { status: 'Done' };\n\nconst SelectAllButton = () => {\n    const { ids, data, onSelect } = useListContext<Company>();\n    return (\n        <Button\n            onClick={(e:any) =>{\n                e.stopPropagation();\n                onSelect(ids);\n            }}\n            label=\"Select All\"\n        >\n            <DoneAllIcon />\n        </Button>\n    );\n};\n\nexport default SelectAllButton;","import * as React from 'react';\nimport {\n    List,\n    ListProps,\n    TopToolbar,\n    ExportButton,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n    SortButton,\n    FilterLiveSearch,\n} from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { CompanyGridList } from './CompanyGridList';\nimport { CompanyListFilter } from './CompanyListFilter';\nimport { ImportButton } from 'react-admin-import-csv';\nimport SelectAllButton from './SelectAllButton';\nimport { Box } from '@material-ui/core';\n\nexport const CompanyList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <List\n            {...props}\n            actions={<CompanyListActions />}\n            aside={<CompanyListFilter />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100, 1000]} />}\n            perPage={25}\n            sort={{ field: 'name', order: 'ASC' }}\n            component=\"div\"\n        >\n            <CompanyGridList />\n        </List>\n    ) : null;\n};\n\nconst useStyles = makeStyles(theme => ({\n    toolbar: {\n        \n    },\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst importOptions = {\n    parseConfig: {\n        // For all options see: https://www.papaparse.com/docs#config\n        dynamicTyping: true\n    }\n}\n\n\nconst CompanyListActions = (props: ListActionsProps) => {\n    const classes = useStyles();\n    return (\n        <TopToolbar className={classes.toolbar} >\n            <SortButton fields={['id', 'name']} />\n            <SelectAllButton />\n            <ExportButton />\n            <ImportButton {...props} {...importOptions}/>\n            <CreateButton\n                basePath=\"/companies\"\n                variant=\"contained\"\n                label=\"New Company\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","export const sizes = [\n    { id: 1, name: '1 employee' },\n    { id: 10, name: '2-9 employees' },\n    { id: 50, name: '10-49 employees' },\n    { id: 250, name: '50-249 employees' },\n    { id: 500, name: '250 or more employees' },\n];\n","import { AutocompleteInput, AutocompleteInputProps } from 'react-admin';\n\nconst DistributorInput = (props: AutocompleteInputProps) => (\n    <AutocompleteInput \n        {...props}\n        optionText={record => record ? record.country_iso ? `${record.name} (${record.country_iso})` : `${record.name}` : ''} \n        allowEmpty\n        resettable\n    />\n);\n\nexport default DistributorInput;","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    required,\n    AutocompleteInput,\n    useGetIdentity,\n    FormDataConsumer,\n    ReferenceArrayInput,\n    AutocompleteArrayInput,\n} from 'react-admin';\nimport { Box, CardContent, Divider, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport clsx from 'clsx';\n\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\nimport { relations } from './relations';\nimport DistributorInput from './DistributorInput';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nexport const CompanyCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n\n    if (!identity) return null;\n\n    const defaultValue = () => ({ sales_id: identity && identity?.id });\n\n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                initialValues={defaultValue}\n                redirect=\"show\"\n            >\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <SelectInput\n                    source=\"relation\"\n                    choices={relations}\n                    formClassName={classes.inline}\n                />\n                <FormDataConsumer>\n                    {({ formData, ...rest }) => formData.relation != 'Distributor' &&\n                        <ReferenceInput\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                            filter={{ relation: 'Distributor' }}\n                        >\n                            <DistributorInput />\n                        </ReferenceInput>\n                    }\n                </FormDataConsumer>\n\n                <ReferenceArrayInput source=\"use_products\" reference=\"products\">\n                    <AutocompleteArrayInput optionText=\"model\" />\n                </ReferenceArrayInput>\n\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <ReferenceInput\n                    source=\"country_id\"\n                    reference=\"countries\"\n                >\n                    <AutocompleteInput optionText=\"nicename\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Create>\n    );\n};\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar>\n                    <BusinessIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","import * as React from 'react';\nimport { Avatar as MuiAvatar } from '@material-ui/core';\n\nimport { Contact } from '../types';\n\nexport const Avatar = ({ record }: { record: Contact }) => (\n    <MuiAvatar src={record.avatar}>\n        {record.first_name.charAt(0)}\n        {record.last_name.charAt(0)}\n    </MuiAvatar>\n);\n","import * as React from 'react';\nimport { Box } from '@material-ui/core';\n\nconst getColorFromStatus = (status: string) =>\n    status === 'cold'\n        ? '#7dbde8'\n        : status === 'warm'\n        ? '#e8cb7d'\n        : status === 'hot'\n        ? '#e88b7d'\n        : status === 'in-contract'\n        ? '#a4e87d'\n        : '#000';\n\nexport const Status = ({ status }: { status: string }) => (\n    <Box\n        width={10}\n        height={10}\n        display=\"inline-block\"\n        borderRadius={5}\n        bgcolor={getColorFromStatus(status)}\n        component=\"span\"\n    />\n);\n","import * as React from 'react';\nimport { ReferenceArrayField, SingleFieldList, ChipField } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Contact } from '../types';\n\nconst ColoredChipField = ({ record, ...props }: any) =>\n    record ? (\n        <ChipField\n            record={record}\n            {...props}\n            style={{ backgroundColor: record.color, border: 0 }}\n            component=\"span\"\n        />\n    ) : null;\n\nconst useStyles = makeStyles({\n    root: {\n        display: 'inline-block',\n    },\n});\n\nexport const TagsList = ({ record }: { record: Contact }) => {\n    const classes = useStyles();\n    if (!record) return null;\n    return (\n        <ReferenceArrayField\n            record={record}\n            basePath=\"/contacts\"\n            resource=\"contacts\"\n            source=\"tags\"\n            reference=\"tags\"\n            className={classes.root}\n        >\n            <SingleFieldList linkType={false} component=\"span\">\n                <ColoredChipField\n                    source=\"name\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                />\n            </SingleFieldList>\n        </ReferenceArrayField>\n    );\n};\n","import React, { useState} from 'react';\nimport { Avatar, CircularProgress, IconButton } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Identifier, useDataProvider, useRefresh, useUpdate } from 'react-admin';\n\nconst useStyles = makeStyles({\n    image: {\n        objectFit: 'contain',\n    },\n});\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const LogoField = ({\n    record,\n    source,\n    size = 'medium',\n}: {\n    record?: { logo: string; name: string; id: Identifier; };\n    source?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles();\n    const [imageBroken, setImageBroken] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const dataProvider = useDataProvider();\n    const [update, { loading: updating }] = useUpdate();\n    const refresh = useRefresh();\n\n    if (!record) return null;\n    if(!record.logo) return (\n        <Avatar>\n            <BusinessIcon />\n        </Avatar>\n    )\n\n\n    const handleClicked = async () => {\n        setLoading(true)\n        try{\n            const response: any = await dataProvider.fetchLinkedinCompany(record.id);\n            await update(\n                'companies',\n                record.id,\n                {\n                    logo: response.data.logo_url,\n                },\n                record,\n            );\n            setImageBroken(false);\n            refresh();\n        }\n        catch(error) {\n\n        }\n        setLoading(false);\n    }\n\n    const onError = () => setImageBroken(true);\n    return (\n        <>\n        {\n        imageBroken\n        ? loading \n        ? <CircularProgress />\n        : <IconButton\n        onClick={handleClicked}\n    >\n        <BrokenImageIcon />\n    </IconButton>\n        : <img\n            src={process.env.PUBLIC_URL + record.logo}\n            alt={record.name}\n            title={record.name}\n            width={sizeInPixel[size]}\n            height={sizeInPixel[size]}\n            className={classes.image}\n            onError={onError}\n        />\n        }\n        </>\n    );\n};\n","export const colors = [\n    '#eddcd2',\n    '#fff1e6',\n    '#fde2e4',\n    '#fad2e1',\n    '#c5dedd',\n    '#dbe7e4',\n    '#f0efeb',\n    '#d6e2e9',\n    '#bcd4e6',\n    '#99c1de',\n];\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 30,\n        height: 30,\n        borderRadius: 15,\n        display: 'inline-block',\n        margin: 8,\n    },\n});\n\nexport const RoundButton = ({ color, handleClick, selected }: any) => {\n    const classes = useStyles();\n    return (\n        <button\n            type=\"button\"\n            className={classes.root}\n            style={{\n                backgroundColor: color,\n                border: selected ? '2px solid grey' : 'none',\n            }}\n            onClick={handleClick}\n        />\n    );\n};","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useGetMany,\n    useCreate,\n    useUpdate,\n    useGetList,\n    Identifier,\n} from 'react-admin';\nimport {\n    Chip,\n    Box,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField,\n    MenuItem,\n    Menu,\n} from '@material-ui/core';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport { colors } from './colors';\nimport { Contact, Company, Product } from '../types';\nimport { Tag } from '../types';\nimport { RoundButton } from '../components/RoundButton';\n\nexport const TagsListEdit = ({ \n    record,\n    reference, \n}: { \n    record: Contact | Company | Product;\n    reference: 'companies' | 'contacts' | 'products';\n}) => {\n    const [open, setOpen] = useState(false);\n    const [newTagName, setNewTagName] = useState('');\n    const [newTagColor, setNewTagColor] = useState(colors[0]);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const [version, setVersion] = useState(0); // used to force the refresh of useGetList without refreshing the whole page\n    const [disabled, setDisabled] = useState(false);\n\n    const { data: allTags, ids } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' },\n        {},\n        { version } as any // FIXME UseDataProviderOptions don't allow [key: string]: any\n    );\n    const { data: tags, loaded } = useGetMany('tags', record.tags, {\n        enabled: record.tags && record.tags.length > 0,\n    });\n    const [update] = useUpdate();\n    const [create] = useCreate();\n\n    const unselectedTagIds = ids && ids.filter(id => !record.tags.includes(id));\n\n    const handleOpen = (event: React.MouseEvent<HTMLDivElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleDeleteTag = (id: Identifier) => {\n        const tags: Identifier[] = record.tags.filter(\n            (tagId: Identifier) => tagId !== id\n        );\n        update(reference, record.id, { tags }, record);\n    };\n\n    const handleAddTag = (id: Identifier) => {\n        const tags: Identifier[] = [...record.tags, id];\n        update(reference, record.id, { tags }, record);\n        setAnchorEl(null);\n    };\n\n    const handleOpenCreateDialog = () => {\n        setOpen(true);\n        setAnchorEl(null);\n        setDisabled(false);\n    };\n\n    const handleNewTagNameChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setNewTagName(event.target.value);\n    };\n\n    const handleCreateTag = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setDisabled(true);\n        create(\n            'tags',\n            { name: newTagName, color: newTagColor },\n            {\n                onSuccess: ({ data }) => {\n                    update(\n                        reference,\n                        record.id,\n                        { tags: [...record.tags, data.id] },\n                        record,\n                        {\n                            onSuccess: () => {\n                                setNewTagName('');\n                                setNewTagColor(colors[0]);\n                                setOpen(false);\n\n                                setVersion(v => v + 1);\n                            },\n                        }\n                    );\n                },\n            }\n        );\n    };\n\n    // if (!loaded || !tags) return null;\n    return (\n        <>\n            {tags.map(tag => (\n                <Box mt={1} mb={1} key={tag.id}>\n                    <Chip\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onDelete={() => handleDeleteTag(tag.id)}\n                        label={tag.name}\n                        style={{ backgroundColor: tag.color, border: 0 }}\n                    />\n                </Box>\n            ))}\n            <Box mt={1}>\n                <Chip\n                    icon={<ControlPointIcon />}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={handleOpen}\n                    label=\"Add tag\"\n                    color=\"primary\"\n                />\n            </Box>\n            <Menu\n                open={Boolean(anchorEl)}\n                onClose={handleClose}\n                anchorEl={anchorEl}\n            >\n                {unselectedTagIds?.map(id => (\n                    <MenuItem key={id} onClick={() => handleAddTag(id)}>\n                        <Chip\n                            size=\"small\"\n                            variant=\"outlined\"\n                            label={allTags && allTags[id].name}\n                            style={{\n                                backgroundColor: allTags && allTags[id].color,\n                                border: 0,\n                            }}\n                            onClick={() => handleAddTag(id)}\n                        />\n                    </MenuItem>\n                ))}\n                <MenuItem onClick={handleOpenCreateDialog}>\n                    <Chip\n                        icon={<EditIcon />}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onClick={handleOpenCreateDialog}\n                        color=\"primary\"\n                        label=\"Create new tag\"\n                    />\n                </MenuItem>\n            </Menu>\n            <Dialog\n                open={open}\n                onClose={() => setOpen(false)}\n                aria-labelledby=\"form-dialog-title\"\n            >\n                <form onSubmit={handleCreateTag}>\n                    <DialogTitle id=\"form-dialog-title\">\n                        Create a new tag\n                    </DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            label=\"Tag name\"\n                            fullWidth\n                            value={newTagName}\n                            onChange={handleNewTagNameChange}\n                        />\n                        <Box display=\"flex\" flexWrap=\"wrap\" width={230} mt={2}>\n                            {colors.map(color => (\n                                <RoundButton\n                                    key={color}\n                                    color={color}\n                                    selected={color === newTagColor}\n                                    handleClick={() => {\n                                        setNewTagColor(color);\n                                    }}\n                                />\n                            ))}\n                        </Box>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={() => setOpen(false)} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            disabled={disabled}\n                        >\n                            Add tag\n                        </Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n    EditButton,\n    ShowButton,\n} from 'react-admin';\nimport { Box, Drawer, IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    sideBig: {\n        width: 250,\n        minWidth: 250,\n        marginLeft: theme.spacing(2),\n        [theme.breakpoints.down('xs')]:{\n            display: 'none',\n        }\n    },\n    sideSmall: {\n        [theme.breakpoints.up('sm')]:{\n            display: 'none',\n        }\n    },\n    drawerContent: {\n         marginTop: theme.spacing(2),\n         marginLeft: theme.spacing(1),\n         marginRight: theme.spacing(1),\n         maxWidth: theme.spacing(32),\n    }\n}));\n\nexport const CollapsibleAside = ({\n    basePath,\n    record,\n    link = 'edit',\n    children,\n}: {\n    basePath: string,\n    record?: any;\n    children: any,\n    link?: string;\n}) => {\n    const classes = useStyles();\n    const [isOpen, setOpen] = useState(false);\n    if (!record) return null;\n\n    const childrenWithProps = React.Children.map(children, child => \n        React.isValidElement(child)\n        ? React.cloneElement(child as React.ReactElement<any>, { record })\n        : child\n    );\n\n    return (\n        <div className={classes.root}>\n            <Box textAlign=\"center\" mb={2}>\n                {link === 'edit' ? (\n                    <EditButton\n                        basePath={basePath}\n                        record={record}\n                        label=\"Edit\"\n                    />\n                ) : (\n                    <ShowButton\n                        basePath={basePath}\n                        record={record}\n                        label=\"Show\"\n                    />\n                )}\n            </Box>\n            <div className={classes.sideBig}>\n                {childrenWithProps}\n            </div>\n            <div className={classes.sideSmall}>\n                <IconButton \n                    onClick={() => setOpen(true)}\n                    color=\"secondary\"\n                >\n                    <ChevronLeftIcon />\n                </IconButton>\n            </div>\n            <Drawer \n                anchor=\"right\" \n                open={isOpen} onClose={() => setOpen(false)}\n            >\n                <div className={classes.drawerContent}>\n                    {childrenWithProps}\n                </div>\n            </Drawer>\n        </div>\n    )\n};\n    \n","import * as React from 'react';\nimport { cloneElement, useState } from 'react';\nimport { \n    AutocompleteArrayInput,\n    Edit,\n    EditContextProvider,\n    Identifier, \n    ReferenceArrayField, \n    ReferenceArrayInput, \n    SimpleForm, \n    SingleFieldList, \n    useEditController, \n    useGetList, \n    useGetMany, \n    useUpdate, \n    useRefresh\n} from 'react-admin';\n\nimport {\n    Chip,\n    Box,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField,\n    MenuItem,\n    Popover,\n    Menu,\n} from '@material-ui/core';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport { Company, Product } from '../types';\nimport { string } from 'prop-types';\n\nexport const ProductsListEdit = ({ \n    record,\n    reference, \n}: { \n    record: Company;\n    reference: 'companies';\n}) => {\n    const [open, setOpen] = useState(false);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const [version, setVersion] = useState(0); // used to force the refresh of useGetList without refreshing the whole page\n    const [update] = useUpdate();\n    const refresh = useRefresh();\n\n\n\n    const { data: products, loaded } = useGetMany('products', record.use_products, {\n        enabled: record.use_products && record.use_products.length > 0,\n    });\n\n    const handleDeleteProduct = (id: Identifier) => {\n        const products: Identifier[] = record.use_products.filter(\n            (productId: Identifier) => productId !== id\n        );\n        update(reference, record.id, { use_products: products }, record);\n    };\n\n    const handleOpen = (event: React.MouseEvent<HTMLDivElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleSucess = (values: any) =>{\n        refresh();\n        handleClose();\n    }\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n\n    if (!record) return null;\n\n     return (\n        <>\n            {loaded && products.map(product => (\n                <Box mt={1} key={product.id}>\n                    <Chip\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onDelete={() => handleDeleteProduct(product.id)}\n                        label={product.model}\n                        style={{ backgroundColor: \"#d4d4d4\", border: 0 }}\n                    />\n                </Box>\n            ))}\n            <Box mt={1}>\n                <Chip\n                    icon={<ControlPointIcon />}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={handleOpen}\n                    label=\"Add product\"\n                    color=\"primary\"\n                />\n            </Box>\n            <Popover\n                open={Boolean(anchorEl)}\n                anchorEl={anchorEl}\n                onClose={handleClose}\n                anchorOrigin={{\n                    vertical: 'center',\n                    horizontal: 'center',\n                }}\n                transformOrigin={{\n                    vertical: 'center',\n                    horizontal: 'center',\n                }}\n            >\n                <Edit\n                    basePath=\"/companies\"\n                    resource={reference}\n                    id={record.id.toString()}\n                    onSuccess={handleSucess}\n                >\n                    <SimpleForm>\n                        <ReferenceArrayInput source=\"use_products\" reference=\"products\">\n                            <AutocompleteArrayInput optionText=\"model\" />\n                        </ReferenceArrayInput>\n                    </SimpleForm>\n                </Edit>\n            </Popover>\n        </>\n    );\n}","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    useCreateSuggestionContext,\n    useCreate,\n    useDataProvider,\n    useUpdate,\n    useRefresh,\n} from 'react-admin';\nimport {\n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n    Select,\n    MenuItem,\n    Box,\n    DialogTitle,\n    IconButton,\n    LinearProgress,\n    List,\n    ListItem,\n    ListItemIcon,\n    Checkbox,\n    ListItemText,\n    ListItemSecondaryAction,\n } from '@material-ui/core';\nimport LinkedInIcon from '@material-ui/icons/LinkedIn';\n\nimport { Company } from '../types';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n    },\n}));\n\ninterface ResponseData {\n    company_size: string;\n    company_type: string;\n    founded: string;\n    headquarters: string;\n    industry: string;\n    logo_url: string;\n    overview: string;\n    page_url: string;\n    people: string;\n    tag_line: string;\n    title: string;\n    website_url: string;\n}\n\nexport const UpdateLinkedinCompany = ({ record }: { record: Company}) => {\n    const classes = useStyles();\n    const dataProvider = useDataProvider();\n    const [open, setOpen] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [available, setAvailable] = useState(false);\n    const [data, setData] = useState<ResponseData>();\n    const [checked, setChecked] = useState<string[]>([]);\n    const [update, { loading: updating }] = useUpdate();\n    const refresh = useRefresh();\n\n    if(!record) return null;\n\n    const onLoad = async () => {\n        setLoading(true)\n        setAvailable(false);\n        try{\n            const data: any = await dataProvider.fetchLinkedinCompany(record.id);\n            setData(data.data as ResponseData);\n            setAvailable(true);\n        }\n        catch(error) {\n\n        }\n        setLoading(false);\n    };\n\n    const onSave = async () => {\n        const arrayData = checked.map(item => {\n            if(item === 'name') return {field: item, value: data?.title};\n            if(item === 'logo') return {field: item, value: data?.logo_url};\n            if(item === 'website') return {field: item, value: data?.website_url};\n        });\n\n        await update(\n            'companies',\n            record.id,\n            arrayData.reduce((a, x: any) => ({...a, [x.field]: x.value}), {}),\n            record,\n        );\n\n        setOpen(false);\n        refresh();\n    }\n\n    const onCancel = () => setOpen(false);\n\n    const handleToggle = (value: string) => () => {\n        const currentIndex = checked.indexOf(value);\n        const newChecked = [...checked];\n\n        if (currentIndex === -1) {\n            newChecked.push(value);\n        } else {\n            newChecked.splice(currentIndex, 1);\n        }\n\n        setChecked(newChecked);\n    };\n\n    return (\n        <>\n            <IconButton\n                onClick={() => setOpen(true)}\n                size='small'\n            >\n                <LinkedInIcon />\n            </IconButton>\n            <Dialog \n                open={open} \n                onClose={onCancel}\n                fullWidth={true}\n                maxWidth=\"sm\"\n            >\n                {loading && <LinearProgress /> }\n                <DialogTitle>Load properties from Linkedin Page</DialogTitle>\n                    <DialogContent>\n                    <List className={classes.root}>\n                        <CompanyField field=\"name\" checked={checked} onToggle={handleToggle} title=\"Title\" value={data?.title} />\n                        <CompanyField field=\"website\" checked={checked} onToggle={handleToggle} title=\"Website\" value={data?.website_url} />\n                        <CompanyField field=\"logo\" checked={checked} onToggle={handleToggle} title=\"Logo\" value={data?.logo_url} />\n                    </List>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={onSave} disabled={!available || (checked.length === 0)}>Save</Button>\n                        <Button onClick={onLoad} disabled={loading}>load</Button>\n                        <Button onClick={onCancel}>Cancel</Button>\n                    </DialogActions>\n            </Dialog>\n        </>\n    );\n};\n\nconst CompanyField = ({field, checked, onToggle, title, value}: any) => {\n    return (\n        <ListItem dense button onClick={onToggle(field)}>\n            <ListItemIcon>\n                <Checkbox\n                    edge=\"start\"\n                    checked={checked.indexOf(field) !== -1}\n                    tabIndex={-1}\n                    disableRipple\n                />\n            </ListItemIcon>\n            <ListItemText primary={value} secondary={title}/>\n        </ListItem>\n    );\n};","import * as React from 'react';\nimport {\n    TextField,\n    DateField,\n    FunctionField,\n    ReferenceField,\n    ReferenceArrayField,\n    SingleFieldList,\n    ChipField,\n    ShowButton,\n} from 'react-admin';\nimport { \n    Box, \n    Typography, \n    Divider, \n    Link,\n} from '@material-ui/core';\nimport { Company, Sale } from '../types';\nimport { TagsListEdit } from '../tags/TagsListEdit';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\nimport { ProductsListEdit } from '../products/ProductsListEdit';\nimport { any } from 'prop-types';\nimport { UpdateLinkedinCompany } from '../linkedin/UpdateLinkedinCompany';\n\nexport const CompanyAside = ({\n    record,\n    link = 'edit',\n    ...props\n}: {\n    record?: Company;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/companies\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n    \n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Company;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Company info</Typography>\n            <Divider />\n\n            <Box mt={2}>\n                Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">{record.website}</Link>\n                <br />\n                \n                {record.linkedIn &&\n                    <>\n                    LinkedIn: <Link href={record.linkedIn} target=\"_blank\" rel=\"noreferrer\">LinkedIn</Link>\n                    <UpdateLinkedinCompany record={record} />\n                    </>\n                }\n            </Box>\n            <Box mt={1}>\n                Relation: <TextField source=\"relation\" record={record} />\n            </Box>\n            {record.distributor_id && (\n                <Box mt={1}>\n                    Distributor: <ReferenceField\n                            record={record}\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                        >\n                            <TextField source=\"name\" record={record} />\n                        </ReferenceField>\n                </Box>\n            )}\n\n            {record.phone_number && (\n                <Box mt={1}>\n                    <TextField source=\"phone_number\" record={record} />{' '}\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">Main</Typography>\n                </Box>\n            )}\n\n            <Box mt={1} mb={3}>\n                <TextField source=\"address\" />\n                <br />\n                <TextField source=\"city\" /> <TextField source=\"zipcode\" />{' '}\n                <TextField source=\"stateAbbr\" />\n            </Box>\n\n            <Typography variant=\"subtitle2\">Background</Typography>\n            <Divider />\n\n            <Box mt={3}>\n                <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    component=\"span\"\n                >\n                    Added on\n                </Typography>{' '}\n                <DateField\n                    source=\"created_at\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography\n                    component=\"span\"\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                >\n                    Followed by\n                </Typography>{' '}\n                <ReferenceField\n                    resource=\"companies\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                >\n                    <FunctionField<Sale>\n                        source=\"last_name\"\n                        render={record =>\n                            record\n                                ? `${record.first_name} ${record.last_name}`\n                                : ''\n                        }\n                    />\n                </ReferenceField>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Tags</Typography>\n                <Divider />\n                <TagsListEdit record={record} reference=\"companies\" />\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Use Products</Typography>\n                <Divider />\n\n                <ProductsListEdit record={record} reference=\"companies\" />\n            </Box>\n        </>\n    ) : null;","export const stages = [\n    'opportunity',\n    'proposal-sent',\n    'in-negociation',\n    'won',\n    'lost',\n    'delayed',\n];\n\nexport const stageNames = {\n    opportunity: 'Opportunity',\n    'proposal-sent': 'Proposal Sent',\n    'in-negociation': 'In Negociation',\n    won: 'Won',\n    lost: 'Lost',\n    delayed: 'Delayed',\n};\n\nexport const stageChoices = stages.map(type => ({\n    id: type,\n    /* @ts-ignore */\n    name: stageNames[type],\n}));\n","import * as React from 'react';\nimport { TextField, MenuItem } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 150,\n    },\n});\n\nexport const StatusSelector = ({ status, setStatus, className = '' }: any) => {\n    const classes = useStyles();\n    return (\n        <TextField\n            select\n            value={status}\n            onChange={(event: React.ChangeEvent<{ value: unknown }>) => {\n                setStatus(event.target.value);\n            }}\n            variant=\"filled\"\n            label={false}\n            margin=\"none\"\n            size=\"small\"\n            className={clsx(className, classes.root)}\n        >\n            <MenuItem value=\"cold\">\n                Cold <Status status=\"cold\" />\n            </MenuItem>\n            <MenuItem value=\"warm\">\n                Warm <Status status=\"warm\" />\n            </MenuItem>\n            <MenuItem value=\"hot\">\n                Hot <Status status=\"hot\" />\n            </MenuItem>\n            <MenuItem value=\"in-contract\">\n                In Contract <Status status=\"in-contract\" />\n            </MenuItem>\n        </TextField>\n    );\n};\n","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useRecordContext,\n    useCreate,\n    useUpdate,\n    useRefresh,\n    useNotify,\n    useGetIdentity,\n    Identifier,\n    useResourceContext,\n} from 'react-admin';\nimport { TextField as TextInput, Button, Paper } from '@material-ui/core';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\nimport { StatusSelector } from './StatusSelector';\n\ntype Props = {\n    preview: Boolean;\n}\n\nconst useStyles = makeStyles<Theme, Props>(theme => ({\n    root: {\n        marginTop: theme.spacing(4),\n        marginBottom: theme.spacing(1),\n    },\n    toolbar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginTop: theme.spacing(1),\n    },\n    small: {\n        marginRight: '1em',\n        '& .MuiFilledInput-input': {\n            paddingTop: 10,\n        },\n    },\n    buttonSwitcher: {\n        marginBottom: theme.spacing(1),\n    },\n    previewConatiner: {\n        display: 'flex',\n    },\n    previewRaw: {\n        flex: 1,\n    },\n    previewMarkdown: {\n        flex: 1,\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        borderColor: theme.palette.primary.main,\n        display: ({preview}) => (preview ? 'block' : 'none'),\n    },\n}));\n\nexport const NewNote = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'companies' | 'contacts' | 'deals' | 'products';\n}) => {\n    const [preview, setPreview] = useState(false);\n    const classes = useStyles({preview});\n    const record = useRecordContext();\n    const resource = useResourceContext();\n    const [text, setText] = useState('');\n    const [status, setStatus] = useState(record && record.status);\n    const [date, setDate] = useState(getCurrentDate());\n    const [create, { loading }] = useCreate();\n    const [update] = useUpdate();\n    // FIXME: use refetch instead when ReferenceManyField exposes it in the ListContext\n    const refresh = useRefresh();\n    const notify = useNotify();\n    const { identity } = useGetIdentity();\n    if (!record || !identity) return null;\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const data: any = {\n            [foreignKeyMapping[reference]]: record.id,\n            sales_id: identity.id,\n            date,\n            text,\n        };\n        if (showStatus) {\n            data.status = status;\n        }\n        update(\n            reference,\n            ((record && record.id) as unknown) as Identifier,\n            {\n                last_seen: date,\n                status,\n            },\n            record\n        );\n        create(resource, data, {\n            onSuccess: () => {\n                setText('');\n                notify('Note added successfully', 'info');\n                refresh();\n            },\n        });\n        return false;\n    };\n    return (\n        <div className={classes.root}>\n            <form onSubmit={handleSubmit}>\n                <div className={classes.buttonSwitcher}>\n                    <Button \n                        variant={preview ? \"contained\": \"outlined\"} \n                        color=\"primary\"\n                        onClick={()=> setPreview(!preview)}\n                    >Markdown</Button>\n                </div>\n                <div className={classes.previewConatiner}>\n                    <div className={classes.previewRaw}>\n                        <TextInput\n                            label=\"Add a note\"\n                            variant=\"filled\"\n                            size=\"small\"\n                            fullWidth\n                            multiline\n                            value={text}\n                            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                                setText(event.target.value)\n                            }\n                        />\n                    </div>\n                    <Paper className={classes.previewMarkdown}>\n                        <ReactMarkdown children={text} remarkPlugins={[remarkGfm]} />\n                    </Paper>\n                </div>\n                <div className={classes.toolbar}>\n                    <span>\n                        {text ? (\n                            <>\n                                {showStatus && (\n                                    <StatusSelector\n                                        status={status}\n                                        setStatus={setStatus}\n                                        className={classes.small}\n                                    />\n                                )}\n                                <TextInput\n                                    type=\"datetime-local\"\n                                    variant=\"filled\"\n                                    size=\"small\"\n                                    value={date}\n                                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                                        setDate(event.target.value);\n                                    }}\n                                    className={classes.small}\n                                />\n                            </>\n                        ) : null}\n                    </span>\n                    <Button\n                        type=\"submit\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!text || loading}\n                    >\n                        Add this note\n                    </Button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nconst getCurrentDate = () => {\n    const now = new Date();\n    now.setMinutes(now.getMinutes() - now.getTimezoneOffset());\n    return now.toISOString().slice(0, -8);\n};\n\nconst foreignKeyMapping = {\n    contacts: 'contact_id',\n    deals: 'deal_id',\n    companies: 'company_id',\n    products: 'product_id',\n};\n","import * as React from 'react';\nimport { useState, FormEvent, ChangeEvent } from 'react';\nimport {\n    TextField,\n    ReferenceField,\n    DateField,\n    useResourceContext,\n    useDelete,\n    useUpdate,\n    useNotify,\n    useRecordContext,\n} from 'react-admin';\nimport {\n    Typography,\n    Tooltip,\n    IconButton,\n    FilledInput,\n    Button,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TrashIcon from '@material-ui/icons/Delete';\nimport ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(2),\n    },\n    metadata: {\n        marginBottom: theme.spacing(1),\n        color: theme.palette.text.secondary,\n    },\n    textarea: {\n        paddingTop: 16,\n        paddingLeft: 14,\n        paddingRight: 60,\n        paddingBottom: 14,\n        lineHeight: 1.3,\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginTop: theme.spacing(1),\n    },\n    cancel: {\n        marginRight: theme.spacing(1),\n    },\n    content: {\n        backgroundColor: theme.palette.grey[200],\n        padding: '0 1em',\n        borderRadius: 10,\n        display: 'flex',\n        alignItems: 'stretch',\n        marginBottom: theme.spacing(1),\n    },\n    text: {\n        flex: 1,\n    },\n    paragraph: {\n        fontFamily: theme.typography.fontFamily,\n        fontSize: theme.typography.body1.fontSize,\n        lineHeight: 1,\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    toolbar: {\n        marginLeft: theme.spacing(2),\n        visibility: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-around',\n    },\n}));\n\nexport const Note = ({\n    showStatus,\n    note,\n    isLast,\n    reference,\n}: {\n    showStatus?: boolean;\n    note: any;\n    isLast: boolean;\n    reference: string;\n}) => {\n    const [isHover, setHover] = useState(false);\n    const [isEditing, setEditing] = useState(false);\n    const [noteText, setNoteText] = useState(note.text);\n    const resource = useResourceContext();\n    const record = useRecordContext();\n    const notify = useNotify();\n    const classes = useStyles();\n    const [update, { loading }] = useUpdate();\n\n    const [handleDelete] = useDelete(resource, note.id, note, {\n        mutationMode: 'undoable',\n        onSuccess: () => {\n            notify('Note deleted', 'info', undefined, true);\n            update(\n                reference,\n                record.id,\n                { nb_notes: record.nb_notes - 1 },\n                record\n            );\n        },\n    });\n\n    const handleEnterEditMode = () => {\n        setEditing(true);\n    };\n\n    const handleCancelEdit = () => {\n        setEditing(false);\n        setNoteText(note.text);\n        setHover(false);\n    };\n\n    const handleTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setNoteText(event.target.value);\n    };\n\n    const handleNoteUpdate = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        update(resource, note.id, { text: noteText }, note, {\n            onSuccess: () => {\n                setEditing(false);\n                setNoteText(note.text);\n                setHover(false);\n            },\n        });\n    };\n\n    return (\n        <div\n            className={classes.root}\n            onMouseEnter={() => setHover(true)}\n            onMouseLeave={() => setHover(false)}\n        >\n            <div className={classes.metadata}>\n                <ReferenceField\n                    record={note}\n                    resource=\"contactNotes\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    basePath=\"/contactNotes\"\n                >\n                    <TextField source=\"first_name\" variant=\"body1\" />\n                </ReferenceField>{' '}\n                <Typography component=\"span\" variant=\"body1\">\n                    added a note on{' '}\n                </Typography>\n                <DateField\n                    source=\"date\"\n                    record={note}\n                    variant=\"body1\"\n                    showTime\n                    locales=\"en\"\n                    options={{\n                        dateStyle: 'full',\n                        timeStyle: 'short',\n                    }}\n                />{' '}\n                {showStatus && <Status status={note.status} />}\n            </div>\n            {isEditing ? (\n                <form onSubmit={handleNoteUpdate}>\n                    <FilledInput\n                        value={noteText}\n                        onChange={handleTextChange}\n                        fullWidth\n                        multiline\n                        className={classes.textarea}\n                        autoFocus\n                    />\n                    <div className={classes.buttons}>\n                        <Button\n                            className={classes.cancel}\n                            onClick={handleCancelEdit}\n                            color=\"primary\"\n                        >\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            disabled={loading}\n                        >\n                            Update Note\n                        </Button>\n                    </div>\n                </form>\n            ) : (\n                <div \n                    className={classes.content}\n                    onClick={() => setHover(true)}\n                >\n                    <div className={classes.text}>\n                        <ReactMarkdown children={note.text} remarkPlugins={[remarkGfm]} />\n                    </div>\n                    <div\n                        className={classes.toolbar}\n                        style={{ visibility: isHover ? 'visible' : 'hidden' }}\n                    >\n                        <Tooltip title=\"Edit note\">\n                            <IconButton\n                                size=\"small\"\n                                onClick={handleEnterEditMode}\n                            >\n                                <EditIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Delete note\">\n                            <IconButton size=\"small\" onClick={handleDelete}>\n                                <TrashIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n","import * as React from 'react';\nimport { useListContext } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Note } from './Note';\nimport { NewNote } from './NewNote';\n\nconst useStyles = makeStyles({\n    root: {\n        marginTop: '0.5em',\n    },\n});\n\nexport const NotesIterator = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'companies' | 'contacts' | 'deals' | 'products';\n}) => {\n    const classes = useStyles();\n    const { data, ids, loaded } = useListContext();\n    if (!loaded) return null;\n    return (\n        <>\n            <NewNote showStatus={showStatus} reference={reference} />\n            <div className={classes.root}>\n                {ids.map((id, index) => (\n                    <Note\n                        note={data[id]}\n                        isLast={index === ids.length - 1}\n                        showStatus={showStatus}\n                        reference={reference}\n                        key={index}\n                    />\n                ))}\n            </div>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport clsx from 'clsx';\n\nimport { Product } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    avatar: {\n        width: 60,\n        height: 60,\n        backgroundColor: 'aliceblue',\n        color: theme.palette.secondary.main,\n    },\n    img: {\n        objectFit: 'contain',\n    },\n    small: {\n        width: 20,\n        height: 20,\n    },\n    large: {\n        width: 40,\n        height: 40,\n    },\n}));\n\nexport const ProductAvatar = ({\n    record,\n    size = 'large',\n}: {\n    record?: Product;\n    size?: 'small' | 'large';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n\n\n    return (record.image\n        ? <Avatar\n            src={process.env.PUBLIC_URL + record.image}\n            alt={record.model}\n            className={classes.avatar}\n            imgProps={{ className: clsx(classes.img, classes[size]) }}\n        />\n        : <Avatar\n            alt={record.model}\n            className={classes.avatar}\n        >\n            <ShoppingCartIcon />\n        </Avatar>\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Paper, Typography, Link as MuiLink, Box, Chip, Checkbox } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContactsIcon from '@material-ui/icons/AccountCircle';\nimport DealIcon from '@material-ui/icons/MonetizationOn';\nimport { linkToRecord, TextField, ReferenceField, ImageField, useListContext } from 'react-admin';\nimport { Link } from 'react-router-dom';\n\nimport { ProductAvatar } from './ProductAvatar';\nimport { Product } from '../types';\nimport classNames from 'classnames';\nimport { LogoField } from '../companies/LogoField';\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        padding: '1em',\n        position: 'relative',\n    },\n    identity: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    name: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    family: {\n        textAlign: 'center',\n        marginTop: theme.spacing(1),\n    },\n    stats: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        width: '100%',\n    },\n    singleStat: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    statIcon: {\n        marginRight: theme.spacing(1),\n    },\n    image: {\n        width: 28,\n        height: 28,\n    },\n    checkbox: {\n        position: 'absolute',\n        top: 0,\n        left: theme.spacing(1),\n    },\n    hidden:{\n        display: 'none',\n    }\n}));\n\nexport const ProductCard = ({ record }: { record: Product }) => {\n    const classes = useStyles();\n    const [elevation, setElevation] = useState(1);\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<Product>();\n    return (\n        <MuiLink\n            component={Link}\n            to={linkToRecord('/products', record.id, 'show')}\n            underline=\"none\"\n            onMouseEnter={() => setElevation(3)}\n            onMouseLeave={() => setElevation(1)}\n        >\n            <Paper className={classes.paper} elevation={elevation}>\n                <Checkbox\n                    edge=\"start\"\n                    checked={selectedIds.includes(record.id)}\n                    tabIndex={-1}\n                    disableRipple\n                    className={classNames(classes.checkbox, {[classes.hidden]: !loaded})}\n                    onClick={(e: any )=> {\n                        e.stopPropagation();\n                        onToggleItem(record.id);\n                    }}\n                />\n                <Box position=\"absolute\" top={10} right={10}>\n                    <ReferenceField\n                        record={record}\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <LogoField />\n                    </ReferenceField>\n                </Box>\n                <div className={classes.identity}>\n                    <ProductAvatar record={record} />\n                    <div className={classes.name}>\n                        <Box display=\"flex\" alignItems=\"center\">\n                        <Typography variant=\"subtitle2\">\n                            {record.model}\n                        </Typography>\n                        </Box>\n                    </div>\n\n                    <div className={classes.family}>\n                        <Typography variant=\"body2\">\n                            in family{' '}\n                            <ReferenceField\n                                record={record}\n                                source=\"family_id\"\n                                reference=\"productFamilies\"\n                                link=\"show\"\n                            >\n                                <TextField source=\"name\" />\n                            </ReferenceField>\n                        </Typography>\n                    </div>\n\n                </div>\n                <div className={classes.stats}>\n                    <div className={classes.singleStat}>\n                        <ContactsIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_notes}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_notes > 1 ? 'notes' : 'note'}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div className={classes.singleStat}>\n                        <DealIcon\n                            color=\"disabled\"\n                            className={classes.statIcon}\n                        />\n                        <div>\n                            <Typography\n                                variant=\"subtitle2\"\n                                style={{ marginBottom: -8 }}\n                            >\n                                {record.nb_properties}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                                {record.nb_properties > 1 ? 'properties' : 'property'}\n                            </Typography>\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </MuiLink>\n    );\n};\n","import * as React from 'react';\nimport { Box, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useListContext, Identifier } from 'react-admin';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nimport { ProductCard } from './ProductCard';\nimport { Product } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    gridList: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        width:  '100%',\n        gap: '5px',\n    },\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: \"center\",\n        padding: '1em',\n        backgroundColor: theme.palette.grey[200],\n    },\n}));\n\nconst times = (nbChildren: number, fn: (key: number) => any) =>\n    Array.from({ length: nbChildren }, (_, key) => fn(key));\n\nconst LoadingGridList = () => {\n    const classes = useStyles();\n    return (\n        <Box className={classes.gridList}>\n            {times(15, key => (\n                <Paper className={classes.paper} key={key} >\n                <Skeleton variant=\"circle\" width={60} height={60}  animation=\"wave\"/>\n                <Skeleton variant=\"text\" animation=\"wave\" width={110}/>\n                <Skeleton variant=\"text\" animation=\"wave\" width={150}/>\n                <Skeleton variant=\"rect\" width={180} height={40} />\n                </Paper>\n            ))}\n        </Box>\n    );\n};\n\nconst LoadedGridList = () => {\n    const { ids, data } = useListContext<Product>();\n    const classes = useStyles();\n\n    if (!ids || !data) return null;\n\n    return (\n        <Box className={classes.gridList}>\n            {ids.map((id: Identifier) => (\n                <ProductCard key={id} record={data[id]} />\n            ))}\n        </Box>\n    );\n};\n\nexport const ProductGridList = () => {\n    const { loaded, loading } = useListContext();\n    return loading ? <LoadingGridList /> : <LoadedGridList /> ;\n};\n","import * as React from 'react';\nimport { useState, ChangeEvent } from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceManyField,\n    SelectField,\n    ReferenceField,\n    ImageField,\n    useShowContext,\n    useRecordContext,\n    useListContext,\n    Pagination,\n} from 'react-admin';\nimport {\n    Avatar as MuiAvatar,\n    Box,\n    Button,\n    Card,\n    CardContent,\n    Typography,\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemText,\n    ListItemSecondaryAction,\n    Tabs,\n    Tab,\n    Chip,\n    Divider,\n} from '@material-ui/core';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { Avatar } from '../contacts/Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { sizes } from './sizes';\nimport { LogoField } from './LogoField';\nimport { CompanyAside } from './CompanyAside';\nimport { Company, Deal, Contact } from '../types';\nimport { stageNames } from '../deals/stages';\nimport { NotesIterator } from '../notes';\nimport { CountryField } from './CountryField';\nimport { ProductGridList } from '../products/ProductGridList';\n\nexport const CompanyShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <CompanyShowContent />\n    </ShowBase>\n);\n\nconst CompanyShowContent = () => {\n    const { record, loaded } = useShowContext<Company>();\n    const [value, setValue] = useState(0);\n    const handleChange = (event: ChangeEvent<{}>, newValue: number) => {\n        setValue(newValue);\n    };\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\" mb={1}>\n                            <LogoField record={record as any} />\n                            <Box ml={2} flex=\"1\">\n                                <Box display=\"flex\" gridGap={4}>\n                                    <Typography variant=\"h5\">{record.name}</Typography>\n                                    {record.relation && (\n                                        <Chip \n                                            label={record.relation} \n                                            variant=\"outlined\" \n                                            size=\"small\"\n                                        />\n                                    )}\n                                </Box>\n                                <Typography \n                                    variant=\"body2\" \n                                    color=\"textSecondary\"\n                                >\n                                    {`#${record.id} - `}\n                                </Typography>\n                                {record.sector && (\n                                        <Typography variant=\"body2\">\n                                            <TextField source=\"sector\" />,{' '}\n                                            <SelectField\n                                                source=\"size\"\n                                                choices={sizes}\n                                            />\n                                        </Typography>\n                                )}\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"country_id\"\n                                    reference=\"countries\"\n                                    link={false}\n                                >\n                                    <CountryField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <Tabs\n                            value={value}\n                            indicatorColor=\"primary\"\n                            textColor=\"primary\"\n                            onChange={handleChange}\n                            variant=\"scrollable\"\n                            scrollButtons=\"auto\"\n                        >\n                            <Tab\n                                label={\n                                    record.nb_notes === 1\n                                        ? '1 Note'\n                                        : `${record.nb_notes} Notes`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_contacts === 1\n                                        ? '1 Contact'\n                                        : `${record.nb_contacts} Contacts`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_deals === 1\n                                        ? '1 Deal'\n                                        : `${record.nb_deals} Deals`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_products === 1\n                                        ? '1 Product'\n                                        : `${record.nb_products} Products`\n                                }\n                            />\n                        </Tabs>\n                        <Divider />\n                        <TabPanel value={value} index={0}>\n                            <ReferenceManyField\n                                reference=\"companyNotes\"\n                                target=\"company_id\"\n                                sort={{ field: 'date', order: 'DESC' }}\n                            >\n                                 <NotesIterator reference=\"companies\" />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={1}>\n                            <ReferenceManyField\n                                reference=\"contacts\"\n                                target=\"company_id\"\n                                sort={{ field: 'last_name', order: 'ASC' }}\n                            >\n                                <ContactsIterator />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={2}>\n                            <ReferenceManyField\n                                reference=\"deals\"\n                                target=\"company_id\"\n                                sort={{ field: 'name', order: 'ASC' }}\n                            >\n                                <DealsIterator />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={3}>\n                            <Box mt={1}>\n                                <ReferenceManyField\n                                    reference=\"products\"\n                                    target=\"company_id\"\n                                    label=\"Products\"\n                                    pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n                                    perPage={25}\n                                >\n                                    <ProductGridList />\n                                </ReferenceManyField>\n                            </Box>\n                            <Box textAlign=\"center\" mt={1}>\n                                <CreateRelatedProductButton record={record} />\n                            </Box>\n                        </TabPanel>\n                    </CardContent>\n                </Card>\n            </Box>\n            <CompanyAside record={record} />\n        </Box>\n    );\n};\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`wrapped-tabpanel-${index}`}\n            aria-labelledby={`wrapped-tab-${index}`}\n            {...other}\n        >\n            {children}\n        </div>\n    );\n};\n\nconst ContactsIterator = () => {\n    const { data, ids, loaded } = useListContext<Contact>();\n    const record = useRecordContext();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const contact = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/contacts/${id}/show`}\n                        >\n                            <ListItemAvatar>\n                                <Avatar record={contact} />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={`${contact.first_name} ${contact.last_name}`}\n                                secondary={\n                                    <>\n                                        {contact.title}{' '}\n                                        {`- ${contact.nb_notes} notes `}\n                                        <TagsList record={contact} />\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography variant=\"body2\" color=\"textSecondary\">\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(contact.last_seen),\n                                        now\n                                    )}{' '}\n                                    ago <Status status={contact.status} />\n                                </Typography>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    );\n                })}\n            </List>\n            <Box textAlign=\"center\" mt={1}>\n                <CreateRelatedContactButton record={record} />\n            </Box>\n        </Box>\n    );\n};\n\nconst CreateRelatedContactButton = ({ record }: any) => (\n    <Button\n        component={RouterLink}\n        to={{\n            pathname: '/contacts/create',\n            state: { record: { company_id: record.id } },\n        }}\n        color=\"primary\"\n        variant=\"contained\"\n        size=\"small\"\n        startIcon={<PersonAddIcon />}\n    >\n        Add contact\n    </Button>\n);\n\nconst CreateRelatedProductButton = ({ record }: any) => (\n    <Button\n        component={RouterLink}\n        to={{\n            pathname: '/products/create',\n            state: { record: { company_id: record.id } },\n        }}\n        color=\"primary\"\n        variant=\"contained\"\n        size=\"small\"\n        startIcon={<AddIcon />}\n    >\n        Add product\n    </Button>\n);\n\nconst DealsIterator = () => {\n    const { data, ids, loaded } = useListContext<Deal>();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const deal = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/deals/${id}/show`}\n                        >\n                            <ListItemText\n                                primary={deal.name}\n                                secondary={\n                                    <>\n                                        {/* @ts-ignore */}\n                                        {stageNames[deal.stage]},{' '}\n                                        {deal.amount.toLocaleString('en-US', {\n                                            notation: 'compact',\n                                            style: 'currency',\n                                            currency: 'USD',\n                                            currencyDisplay: 'narrowSymbol',\n                                            minimumSignificantDigits: 3,\n                                        })}\n                                        , {deal.type}\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                    component=\"span\"\n                                >\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(deal.updated_at),\n                                        now\n                                    )}{' '}\n                                    ago{' '}\n                                </Typography>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    );\n                })}\n            </List>\n        </Box>\n    );\n};\n","import * as React from 'react';\nimport {\n    Edit,\n    EditProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    useRecordContext,\n    AutocompleteInput,\n    ReferenceArrayInput,\n    AutocompleteArrayInput,\n    FormDataConsumer,\n    required,\n} from 'react-admin';\nimport { Box, CardContent, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { CompanyAside } from './CompanyAside';\nimport { LogoField } from './LogoField';\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\nimport { relations } from './relations';\nimport DistributorInput from './DistributorInput';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst renderDistributor = (choice: any) => {\n\n}\n\nexport const CompanyEdit = (props: EditProps) => {\n    const classes = useStyles();\n    return (\n        <Edit {...props} aside={<CompanyAside link=\"show\" />} actions={false}>\n            <SimpleForm component={CustomLayout} redirect=\"show\">\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <SelectInput\n                    source=\"relation\"\n                    choices={relations}\n                    formClassName={classes.inline}\n                />\n                <FormDataConsumer>\n                    {({ formData, ...rest }) => formData.relation != 'Distributor' &&\n                        <ReferenceInput\n                            source=\"distributor_id\"\n                            reference=\"companies\"\n                            filter={{ relation: 'Distributor' }}\n                        >\n                            <DistributorInput />\n                        </ReferenceInput>\n                    }\n                </FormDataConsumer>\n\n                <ReferenceArrayInput source=\"use_products\" reference=\"products\">\n                    <AutocompleteArrayInput optionText=\"model\" />\n                </ReferenceArrayInput>\n\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <ReferenceInput\n                    source=\"country_id\"\n                    reference=\"countries\"\n                >\n                    <AutocompleteInput optionText=\"nicename\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Edit>\n    );\n};\n\nconst CustomLayout = (props: any) => {\n    const record = useRecordContext(props);\n    return (\n        <CardContent>\n            <Box display=\"flex\">\n                <LogoField record={record as any} />\n                <Box ml={2} flex=\"1\" maxWidth={796}>\n                    {props.children}\n                </Box>\n            </Box>\n        </CardContent>\n    );\n};\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport { CompanyList } from './CompanyList';\nimport { CompanyCreate } from './CompanyCreate';\nimport { CompanyShow } from './CompanyShow';\nimport { CompanyEdit } from './CompanyEdit';\nimport BusinessIcon from '@material-ui/icons/Business';\n\nexport default {\n    list: CompanyList,\n    create: CompanyCreate,\n    edit: CompanyEdit,\n    show: CompanyShow,\n    icon: BusinessIcon,\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    EmailField,\n    DateField,\n    ReferenceManyField,\n    useListContext,\n    ReferenceField,\n    FunctionField,\n} from 'react-admin';\nimport { Box, Typography, Divider, List, ListItem } from '@material-ui/core';\nimport { TagsListEdit } from '../tags/TagsListEdit';\n\nimport { Contact, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const ContactAside = ({ \n    record, \n    link = 'edit',\n}: {\n    record?: Contact;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/contacts\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst TasksIterator = () => {\n    const { data, ids, loading } = useListContext();\n    if (loading || ids.length === 0) return null;\n    return (\n            <List>\n                {ids.map(id => {\n                    const task = data[id];\n                    return (\n                        <ListItem key={id} disableGutters>\n                            <Box>\n                                <Typography variant=\"body2\">\n                                    {task.text}\n                                </Typography>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                >\n                                    due{' '}\n                                    <DateField\n                                        source=\"due_date\"\n                                        record={task}\n                                    />\n                                </Typography>\n                            </Box>\n                        </ListItem>\n                    );\n                })}\n            </List>\n    );\n};\n\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Contact;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Personal info</Typography>\n            <Divider />\n\n            <Box mt={2}>\n                <EmailField source=\"email\" />\n            </Box>\n\n            <Box mt={1}>\n                <TextField source=\"phone_number1\" />{' '}\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                    Work\n                </Typography>\n            </Box>\n\n            <Box mb={1}>\n                <TextField source=\"phone_number2\" />{' '}\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                    Home\n                </Typography>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"body2\">\n                    {record.gender === 'male' ? 'He/Him' : 'She/Her'}\n                </Typography>\n            </Box>\n\n            <Typography variant=\"subtitle2\">Background</Typography>\n            <Divider />\n\n            <Box mt={2}>{record && record.background}</Box>\n            <Box mt={1} mb={3}>\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Added on\n                </Typography>{' '}\n                <DateField\n                    source=\"first_seen\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Last seen on\n                </Typography>{' '}\n                <DateField\n                    source=\"last_seen\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                    Followed by\n                </Typography>{' '}\n                <ReferenceField\n                    resource=\"contacts\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                >\n                    <FunctionField<Sale>\n                        source=\"last_name\"\n                        render={record =>\n                            record ? `${record.first_name} ${record.last_name}` : ''\n                        }\n                    />\n                </ReferenceField>\n            </Box>\n\n            <Box mb={3}>\n                <Typography variant=\"subtitle2\">Tags</Typography>\n                <Divider />\n                <TagsListEdit record={record} reference=\"contacts\" />\n            </Box>\n\n            <Box>\n                <Typography variant=\"subtitle2\">Tasks</Typography>\n                <Divider />\n                <ReferenceManyField\n                    resource=\"contacts\"\n                    target=\"contact_id\"\n                    reference=\"tasks\"\n                >\n                    <TasksIterator />\n                </ReferenceManyField>\n            </Box>\n        </>\n    ) : null;","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { Contact } from '../types';\n\nexport const ContactShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ContactShowContent />\n    </ShowBase>\n);\n\nconst ContactShowContent = () => {\n    const { record, loaded } = useShowContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Avatar record={record} />\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.first_name} {record.last_name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {`#${record.id} - `}\n                                    {record.title} at{' '}\n                                    <ReferenceField\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        link=\"show\"\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                </Typography>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <ReferenceManyField\n                            target=\"contact_id\"\n                            reference=\"contactNotes\"\n                            sort={{ field: 'date', order: 'DESC' }}\n                        >\n                            <NotesIterator showStatus reference=\"contacts\" />\n                        </ReferenceManyField>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ContactAside record={record} />\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport { endOfYesterday, startOfWeek, startOfMonth, subMonths } from 'date-fns';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Status } from '../misc/Status';\nimport { TagChip } from '../tags/TagChip';\nimport { Tag } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        order: -1,\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        minWidth: '13em',\n        [theme.breakpoints.down('xs')]: {\n            display: 'none',\n        }\n    },\n}));\n\nexport const ContactListFilter = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const { data, ids } = useGetList<Tag>(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n            <FilterList label=\"Last seen\" icon={<AccessTimeIcon />}>\n                <FilterListItem\n                    label=\"Today\"\n                    value={{\n                        last_seen_gte: endOfYesterday().toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"This week\"\n                    value={{\n                        last_seen_gte: startOfWeek(new Date()).toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this week\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfWeek(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfMonth(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before last month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: subMonths(\n                            startOfMonth(new Date()),\n                            1\n                        ).toISOString(),\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Status\" icon={<TrendingUpIcon />}>\n                <FilterListItem\n                    label={\n                        <>\n                            Cold <Status status=\"cold\" />\n                        </>\n                    }\n                    value={{\n                        status: 'cold',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Warm <Status status=\"warm\" />\n                        </>\n                    }\n                    value={{\n                        status: 'warm',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Hot <Status status=\"hot\" />\n                        </>\n                    }\n                    value={{\n                        status: 'hot',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            In contract <Status status=\"in-contract\" />\n                        </>\n                    }\n                    value={{\n                        status: 'in-contract',\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Tags\" icon={<LocalOfferIcon />}>\n                {ids &&\n                    data &&\n                    ids.map(id => (\n                        <FilterListItem\n                            key={id}\n                            label={<TagChip record={data[id]}/>}\n                            value={{ tags: [id] }}\n                        />\n                    ))}\n            </FilterList>\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n    FilterLiveSearch,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from './Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { ContactListFilter } from './ContactListFilter';\nimport { Contact } from '../types';\nimport { ImportButton } from 'react-admin-import-csv';\n\nconst ContactListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        Contact\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const contact = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/contacts/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar record={contact} />\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${contact.first_name} ${contact.last_name}`}\n                            secondary={\n                                <>\n                                    {`#${contact.id} - `}\n                                    {contact.title} at{' '}\n                                    <ReferenceField\n                                        record={contact}\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        basePath=\"/companies\"\n                                        link={false}\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>{' '}\n                                    {!!contact.nb_notes &&\n                                        `- ${contact.nb_notes} notes `}\n                                    <TagsList record={contact} />\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                last activity{' '}\n                                {formatDistance(\n                                    new Date(contact.last_seen),\n                                    now\n                                )}{' '}\n                                ago <Status status={contact.status} />\n                            </Typography>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst ContactListActions = (props: ListActionsProps) => {\n    const classes = useStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['id', 'last_name', 'first_name', 'last_seen']} />\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/contacts\"\n                variant=\"contained\"\n                label=\"New Contact\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nexport const ContactList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<ContactListActions />}\n            aside={<ContactListFilter />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            sort={{ field: 'last_seen', order: 'DESC' }}\n        >\n            <ContactListContent />\n        </RaList>\n    ) : null;\n};\n","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    useEditContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box } from '@material-ui/core';\nimport omit from 'lodash/omit';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { Contact } from '../types';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nconst ContactEditContent = () => {\n    const { record, loaded, save } = useEditContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar record={record} />\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"first_name\" />\n                                                <Spacer />\n                                                <TextInput source=\"last_name\" />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"title\" />\n                                                <Spacer />\n                                                <ReferenceInput\n                                                    source=\"company_id\"\n                                                    reference=\"companies\"\n                                                >\n                                                    <AutocompleteInput optionText=\"name\" />\n                                                </ReferenceInput>\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"email\"\n                                                    fullWidth\n                                                />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"phone_number1\" />\n                                                <Spacer />\n                                                <TextInput source=\"phone_number2\" />\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"background\"\n                                                    multiline\n                                                    fullWidth\n                                                />\n                                                <TextInput\n                                                    source=\"avatar\"\n                                                    fullWidth\n                                                />\n                                                <BooleanInput source=\"has_newsletter\" />\n                                            </Box>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <ContactAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const ContactEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <ContactEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    useCreateContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Contact } from '../types';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const ContactCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    \n    if (!identity) return null;\n\n    const contactDefaultValue = () => ({ sales_id: identity && identity?.id });\n    const transform = (data: Contact) => ({\n        ...data,\n        last_seen: new Date(),\n        tags: [],\n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={contactDefaultValue}\n                transform={transform}\n            >\n                <TextInput \n                    source=\"first_name\" \n                    validate={[required()]} \n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput\n                    source=\"last_name\"\n                    validate={[required()]}\n                    formClassName={classes.inline}\n                />\n                <CustomDivider />\n                <TextInput \n                    source=\"title\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <ReferenceInput\n                    source=\"company_id\"\n                    reference=\"companies\"\n                    formClassName={classes.inline}\n                >\n                    <AutocompleteInput optionText=\"name\" />\n                </ReferenceInput>\n                <CustomDivider />\n                <TextInput\n                    source=\"email\"\n                    fullWidth\n                />\n                <TextInput source=\"phone_number1\"\n                    formClassName={clsx(classes.inline, 'first-child')} />\n                <TextInput source=\"phone_number2\"\n                    formClassName={classes.inline} />\n                <CustomDivider />\n                <TextInput\n                    source=\"background\"\n                    multiline\n                    fullWidth\n                />\n                <TextInput\n                    source=\"avatar\"\n                    fullWidth\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n                <BooleanInput source=\"has_newsletter\" />\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar />\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport { ContactShow } from './ContactShow';\nimport { ContactList } from './ContactList';\nimport { ContactEdit } from './ContactEdit';\nimport { ContactCreate } from './ContactCreate';\nimport ContactsIcon from '@material-ui/icons/Contacts';\n\nexport default {\n    list: ContactList,\n    show: ContactShow,\n    edit: ContactEdit,\n    create: ContactCreate,\n    icon: ContactsIcon,\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    EmailField,\n    DateField,\n    ReferenceManyField,\n    EditButton,\n    ShowButton,\n    useListContext,\n    ReferenceField,\n    FunctionField,\n} from 'react-admin';\nimport { Box, Typography, Divider, List, ListItem } from '@material-ui/core';\nimport { TagsListEdit } from '../tags/TagsListEdit';\n\nimport { Task } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const TaskAside = ({\n    record,\n    link = 'edit',\n    ...props\n}: {\n    record?: Task;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/tasks\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Task;\n}) => \n    record ? (\n        <>\n        </>\n    ) : null;","export const statuses = [\n    {id: 'pending', name: 'Pending', color: '#FFA000'},\n    {id: 'done', name: 'Done', color: '#CDDC39'},\n    {id: 'postponed', name: 'Postponed', color: '#2196F3'},\n]\n\nexport const getStatus = (id: string) => statuses.find(status => status.id == id);","import { Box, Chip } from '@material-ui/core';\nimport { Task } from '../types'\nimport { getStatus } from './status';\n\nexport const TaskChip = ({ record }: { record: Task; }) => {\n    const statusItem = getStatus(record.status);\n    const statusName = statusItem ? statusItem.name: '';\n    const statusColor = statusItem ? statusItem.color: '#000'\n    \n    return (\n         <>\n            { record && (\n                    <Chip\n                    label={statusName}\n                    size=\"small\"\n                    style={{\n                        backgroundColor: statusColor,\n                        border: 0,\n                        cursor: 'pointer',\n                    }}\n                />\n            )}\n        </>\n    );\n};","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    Identifier,\n    useShowContext,\n    FunctionField, \n    Button, \n    useUpdate,\n    useRefresh,\n    useNotify\n} from 'react-admin';\nimport { \n    Avatar, \n    Box, \n    Card, \n    CardContent, \n    Chip, \n    Typography,\n} from '@material-ui/core';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport DoneIcon from '@material-ui/icons/Done';\n\nimport { TaskAside } from './TaskAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { Sale, Task } from '../types';\nimport { TaskChip } from './TaskChip';\n\nconst doneStatus = 'done';\n\nexport const TaskShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <TaskShowContent />\n    </ShowBase>\n);\n\nconst TaskShowContent = () => {\n    const { record, loaded } = useShowContext<Task>();\n    const [update] = useUpdate();\n    const refresh = useRefresh();\n    const notify = useNotify();\n\n    if (!loaded || !record) return null;\n\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\" alignItems=\"flex-start\">\n                            <Avatar >\n                                <AssignmentTurnedInIcon />\n                            </Avatar>\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.text} {' '}\n                                    <TaskChip record={record} />\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                                        Assigned to\n                                    </Typography>{' '}\n                                    <ReferenceField\n                                        record={record}\n                                        source=\"sales_id\"\n                                        reference=\"sales\"\n                                    >\n                                        <FunctionField<Sale>\n                                            source=\"last_name\"\n                                            render={record =>\n                                                record ? `${record.first_name} ${record.last_name}` : ''\n                                            }\n                                        />\n                                    </ReferenceField>\n                                </Typography>\n                            </Box>\n                            {\n                                record.status != doneStatus && \n                                <DoneButton record={record} />\n                            }\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                    </CardContent>\n                </Card>\n            </Box>\n            <TaskAside record={record} />\n        </Box>\n    );\n};\n\n\nconst DoneButton = ({\n    record,\n}: {\n    record: Task;\n}) =>{\n    const [update] = useUpdate();\n    const refresh = useRefresh();\n    const notify = useNotify();\n\n    const handleDone = (event: any) => {\n        event.preventDefault();\n        update(\n            'tasks',\n            ((record && record.id) as unknown) as Identifier,\n            {\n                status: doneStatus,\n            },\n            record, {\n                onSuccess: () => {\n                    notify('Task is marked done', 'info');\n                    refresh();\n                },\n            },\n        );\n        return false;\n    };\n    return (\n        <Button\n            label=\"Done\"\n            variant=\"outlined\"\n            onClick={handleDone}\n        >\n            <DoneIcon />\n        </Button>\n    );\n}","import * as React from 'react';\nimport { Box } from '@material-ui/core';\n\nimport { getStatus } from './status';\n\nexport const TaskStatus = ({ status }: { status: string }) => {\n    const statusItem = getStatus(status);\n    const statusColor = statusItem ? statusItem.color : \"#000\";\n    return (\n        <Box\n            width={10}\n            height={10}\n            display=\"inline-block\"\n            borderRadius={5}\n            bgcolor={statusColor}\n            component=\"span\"\n        />\n    );\n};","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport { \n    endOfYesterday, \n    startOfWeek, \n    startOfMonth, \n    subMonths, \n    endOfToday,\n    endOfWeek,\n    addWeeks,\n    endOfMonth,\n } from 'date-fns';\n\nimport { TaskStatus } from './TaskStatus';\nimport { TagChip } from '../tags/TagChip';\nimport { Tag } from '../types';\nimport { statuses } from './status';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nexport const TaskListFilter = () => {\n    const { identity } = useGetIdentity();\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n            <FilterList label=\"Due date\" icon={<AccessTimeIcon />}>                \n                <FilterListItem\n                    label=\"Today\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: endOfToday().toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"This week\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: endOfWeek(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"This month\"\n                    value={{\n                        due_date_gte: undefined,\n                        due_date_lte: endOfMonth(new Date()).toISOString(),\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Status\" icon={<TrendingUpIcon />}>\n                {statuses.map(status =>(\n                    <FilterListItem\n                    label={\n                        <>\n                            {status.name} <TaskStatus status={status.id} />\n                        </>\n                    }\n                    value={{\n                        status: status.id,\n                    }}\n                />\n                ))}\n            </FilterList>\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","// in ./MarkDoneButton.js\nimport * as React from 'react';\nimport { BulkUpdateButton, BulkActionProps } from 'react-admin';\nimport DoneIcon from '@material-ui/icons/Done';\n\nconst doneState = { status: 'done' };\n\nconst MarkDoneButton = (props: BulkActionProps) => (\n    <BulkUpdateButton\n        {...props}\n        label=\"Mark checked\"\n        data={doneState}\n        icon={<DoneIcon/>}\n        mutationMode=\"pessimistic\"\n    />\n);\n\nexport default MarkDoneButton;","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport { Fragment } from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    BulkDeleteButton,\n    useGetIdentity,\n    BulkActionProps,\n    ListActionsProps,\n    FunctionField,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n    Avatar,\n    Chip,\n} from '@material-ui/core';\nimport { red } from '@material-ui/core/colors';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport { ImportButton } from \"react-admin-import-csv\";\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\n\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { TaskListFilter } from './TaskListFilter';\nimport { Sale, Task } from '../types';\nimport MarkDoneButton from './MarkDoneButton';\nimport { TaskStatus } from './TaskStatus';\n\nconst TaskListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        Task\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const task = data[id];\n                const taskOverdue = (task.status !== 'done') &&  (task.due_date < (new Date()).toISOString());\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/Tasks/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar\n                                style={taskOverdue ? { backgroundColor: red[400] } : undefined}\n                            >\n                                {taskOverdue\n                                ? <NotificationsActiveIcon />\n                                : <AssignmentTurnedInIcon />\n                                }\n                            </Avatar>\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={\n                                <>\n                                {task.text}\n                                </>\n                            }\n                            secondary={\n                                <>\n                                    <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                                        Assigned to\n                                    </Typography>{' '}\n                                    <ReferenceField\n                                        record={task}\n                                        source=\"sales_id\"\n                                        reference=\"sales\"\n                                    >\n                                        <FunctionField<Sale>\n                                            source=\"last_name\"\n                                            render={record =>\n                                                record ? `${record.first_name} ${record.last_name}` : ''\n                                            }\n                                        />\n                                    </ReferenceField>\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                due in{' '}\n                                {formatDistance(\n                                    new Date(task.due_date),\n                                    now\n                                )}\n                                {' '}<TaskStatus status={task.status} />\n                            </Typography>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst TaskListActions = (props: ListActionsProps) => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['due_date', 'status']} />\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/Tasks\"\n                variant=\"contained\"\n                label=\"New Task\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nconst TaskBulkActionButtons = (props: BulkActionProps) => (\n    <Fragment>\n        <MarkDoneButton {...props} />\n        {/* default bulk delete action */}\n        <BulkDeleteButton {...props} />\n    </Fragment>\n);\n\nexport const TaskList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<TaskListActions />}\n            aside={<TaskListFilter />}\n            bulkActionButtons={<TaskBulkActionButtons />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{ sales_id: identity?.id, status: 'pending' }}\n            sort={{ field: 'due_date', order: 'ASC' }}\n        >\n            <TaskListContent />\n        </RaList>\n    ) : null;\n};\n","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    required,\n    Toolbar,\n    useEditContext,\n    DateInput,\n    SelectInput,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport omit from 'lodash/omit';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { TaskAside } from './TaskAside';\nimport { Task } from '../types';\nimport { statuses } from './status';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst TaskEditContent = () => {\n    const classes = useStyles();\n    const { record, loaded, save } = useEditContext<Task>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                        <Avatar >\n                                            <AssignmentTurnedInIcon />\n                                        </Avatar>\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <TextInput \n                                                source=\"text\"\n                                                label=\"Task\"\n                                                validate={[required()]}\n                                                fullWidth\n                                            />\n                                            <DateInput\n                                                source=\"due_date\"\n                                                className={clsx(classes.inline, 'first-child')}\n                                            />\n                                            <SelectInput\n                                                source=\"status\"\n                                                choices={statuses}\n                                                className={classes.inline}\n                                            />\n                                            \n                                            <ReferenceInput\n                                                source=\"sales_id\"\n                                                reference=\"sales\"\n                                                label=\"Assigned to\"\n                                                helperText={false}\n                                            >\n                                                <SelectInput\n                                                    optionText={(sales: any) =>\n                                                        `${sales.first_name} ${sales.last_name}`\n                                                    }\n                                                />\n                                            </ReferenceInput>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <TaskAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const TaskEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <TaskEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    DateInput,\n    useCreateContext,\n    SelectField,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\n\n\nimport { Task } from '../types';\nimport { statuses } from './status';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const TaskCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    \n    if (!identity) return null;\n\n    const defaultValue = () => ({\n        due_date: new Date(), \n        status: 'pending',\n        sales_id: identity && identity?.id,\n    });\n    const transform = (data: Task) => ({\n        ...data,\n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={defaultValue}\n                transform={transform}\n            >\n                <TextInput \n                    source=\"text\"\n                    label=\"Task\"\n                    validate={[required()]}\n                    fullWidth\n                />\n                <DateInput\n                    source=\"due_date\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"status\"\n                    choices={statuses}\n                    formClassName={classes.inline}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Assigned to\"\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar >\n                    <AssignmentTurnedInIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);","/* eslint-disable import/no-anonymous-default-export */\nimport { TaskShow } from './TaskShow';\nimport { TaskList } from './TaskList';\nimport { TaskEdit } from './TaskEdit';\nimport { TaskCreate } from './TaskCreate';\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted';\n\nexport default {\n    list: TaskList,\n    show: TaskShow,\n    edit: TaskEdit,\n    create: TaskCreate,\n    icon: FormatListBulletedIcon,\n};\n","import * as React from 'react';\nimport { ReferenceField, useRedirect } from 'react-admin';\nimport { Card, Typography, Box } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Draggable } from 'react-beautiful-dnd';\n\nimport { LogoField } from '../companies/LogoField';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(1),\n    },\n    cardContent: {\n        padding: theme.spacing(1),\n        display: 'flex',\n    },\n    cardText: {\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nexport const DealCard = ({ deal, index }: { deal: Deal; index: number }) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    if (!deal) return null;\n\n    const handleClick = () => {\n        redirect(`/deals/${deal.id}/show`);\n    };\n    return (\n        <Draggable draggableId={String(deal.id)} index={index}>\n            {(provided, snapshot) => (\n                <div\n                    className={classes.root}\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}\n                    ref={provided.innerRef}\n                    onClick={handleClick}\n                >\n                    <Card\n                        style={{\n                            opacity: snapshot.isDragging ? 0.9 : 1,\n                            transform: snapshot.isDragging\n                                ? 'rotate(-2deg)'\n                                : '',\n                        }}\n                        elevation={snapshot.isDragging ? 3 : 1}\n                    >\n                        <Box p={1} display=\"flex\">\n                            <ReferenceField\n                                source=\"company_id\"\n                                record={deal}\n                                reference=\"companies\"\n                                resource=\"deals\"\n                                basePath=\"/deals\"\n                            >\n                                <LogoField size=\"small\" />\n                            </ReferenceField>\n                            <Box ml={1}>\n                                <Typography variant=\"body2\" gutterBottom>\n                                    {deal.name}\n                                </Typography>\n                                <Typography\n                                    variant=\"caption\"\n                                    color=\"textSecondary\"\n                                >\n                                    {deal.amount.toLocaleString('en-US', {\n                                        notation: 'compact',\n                                        style: 'currency',\n                                        currency: 'USD',\n                                        currencyDisplay: 'narrowSymbol',\n                                        minimumSignificantDigits: 3,\n                                    })}\n                                    , {deal.type}\n                                </Typography>\n                            </Box>\n                        </Box>\n                    </Card>\n                </div>\n            )}\n        </Draggable>\n    );\n};\n","import * as React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Droppable } from 'react-beautiful-dnd';\nimport { Identifier, RecordMap } from 'react-admin';\n\nimport { DealCard } from './DealCard';\nimport { stageNames } from './stages';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles({\n    root: {\n        flex: 1,\n        paddingTop: 8,\n        paddingBottom: 16,\n        backgroundColor: '#eaeaee',\n        '&:first-child': {\n            paddingLeft: 5,\n            borderTopLeftRadius: 5,\n        },\n        '&:last-child': {\n            paddingRight: 5,\n            borderTopRightRadius: 5,\n        },\n    },\n    droppable: {\n        display: 'flex',\n        flexDirection: 'column',\n        borderRadius: 5,\n        padding: 5,\n        '&.isDraggingOver': {\n            backgroundColor: '#dadadf',\n        },\n    },\n});\n\nexport const DealColumn = ({\n    stage,\n    dealIds,\n    data,\n}: {\n    stage: string;\n    dealIds: Identifier[];\n    data: RecordMap<Deal>;\n}) => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <Typography align=\"center\" variant=\"subtitle1\">\n                {/* @ts-ignore */}\n                {stageNames[stage]}\n            </Typography>\n            <Droppable droppableId={stage}>\n                {(droppableProvided, snapshot) => (\n                    <div\n                        ref={droppableProvided.innerRef}\n                        {...droppableProvided.droppableProps}\n                        className={\n                            classes.droppable +\n                            (snapshot.isDraggingOver ? ' isDraggingOver' : '')\n                        }\n                    >\n                        {dealIds.map((id, index) => (\n                            <DealCard key={id} index={index} deal={data[id]} />\n                        ))}\n                        {droppableProvided.placeholder}\n                    </div>\n                )}\n            </Droppable>\n        </div>\n    );\n};\n","import * as React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport {\n    useMutation,\n    Identifier,\n    useListContext,\n    RecordMap,\n    DataProviderContext,\n} from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport { DragDropContext, OnDragEndResponder } from 'react-beautiful-dnd';\nimport isEqual from 'lodash/isEqual';\n\nimport { DealColumn } from './DealColumn';\nimport { stages } from './stages';\nimport { Deal } from '../types';\n\ninterface DealsByColumn {\n    [stage: string]: Identifier[];\n}\n\nconst initialDeals: DealsByColumn = stages.reduce(\n    (obj, stage) => ({ ...obj, [stage]: [] }),\n    {}\n);\n\nconst getDealsByColumn = (\n    ids: Identifier[],\n    data: RecordMap<Deal>\n): DealsByColumn => {\n    // group deals by column\n    const columns = ids.reduce(\n        (acc, id) => {\n            acc[data[id].stage].push(id);\n            return acc;\n        },\n        stages.reduce((obj, stage) => ({ ...obj, [stage]: [] }), {} as any)\n    );\n    // order each column by index\n    stages.forEach(stage => {\n        columns[stage] = columns[stage].sort(\n            (a: Identifier, b: Identifier) => data[a].index - data[b].index\n        );\n    });\n    return columns;\n};\n\nexport const DealListContent = () => {\n    const {\n        data,\n        ids,\n        loaded,\n        page,\n        perPage,\n        currentSort,\n        filterValues,\n    } = useListContext<Deal>();\n\n    const [deals, setDeals] = useState<DealsByColumn>(\n        loaded ? getDealsByColumn(ids, data) : initialDeals\n    );\n    // we use the raw dataProvider to avoid too many updates to the Redux store after updates (which would create junk)\n    const dataProvider = useContext(DataProviderContext);\n\n    // FIXME: use refetch when available\n    const [refresh] = useMutation({\n        resource: 'deals',\n        type: 'getList',\n        payload: {\n            pagination: { page, perPage },\n            sort: currentSort,\n            filter: filterValues,\n        },\n    });\n\n    // update deals by columns when the dataProvider response updates\n    useEffect(() => {\n        if (!loaded) return;\n        const newDeals = getDealsByColumn(ids, data);\n        if (isEqual(deals, newDeals)) {\n            return;\n        }\n        setDeals(newDeals);\n    }, [data, ids, loaded]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    if (!loaded) return null;\n\n    const onDragEnd: OnDragEndResponder = async result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        if (source.droppableId === destination.droppableId) {\n            // moving deal inside the same column\n\n            const column = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const sourceDeal = data[column[source.index]];\n            const destinationDeal = data[column[destination.index]];\n\n            // update local state\n            // remove source deal from column\n            column.splice(source.index, 1);\n            // read source deal at destination\n            column.splice(destination.index, 0, Number(draggableId));\n            setDeals({\n                ...deals,\n                [source.droppableId]: column,\n            });\n\n            // update backend\n            // Fetch all the deals in this stage (because the list may be filtered, but we need to update even non-filtered deals)\n            const { data: columnDeals } = await dataProvider.getList('deals', {\n                sort: { field: 'index', order: 'ASC' },\n                pagination: { page: 1, perPage: 100 },\n                filter: { stage: source.droppableId },\n            });\n\n            if (source.index > destination.index) {\n                // deal moved up, eg\n                // dest   src\n                //  <------\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between destination.index and source.index, increase the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index >= destinationDeal.index &&\n                                deal.index < sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index + 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            } else {\n                // deal moved down, e.g\n                // src   dest\n                //  ------>\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between source.index and destination.index, decrease the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index <= destinationDeal.index &&\n                                deal.index > sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index - 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            }\n        } else {\n            // moving deal across columns\n\n            const sourceColumn = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const destinationColumn = Array.from(\n                deals[destination.droppableId]\n            ); // [4, 7, 23, 5] arrays of ids\n            const sourceDeal = data[sourceColumn[source.index]];\n            const destinationDeal = data[destinationColumn[destination.index]]; // may be undefined if dropping at the end of a column\n\n            // update local state\n            sourceColumn.splice(source.index, 1);\n            destinationColumn.splice(destination.index, 0, draggableId);\n            setDeals({\n                ...deals,\n                [source.droppableId]: sourceColumn,\n                [destination.droppableId]: destinationColumn,\n            });\n\n            // update backend\n            // Fetch all the deals in both stages (because the list may be filtered, but we need to update even non-filtered deals)\n            const [\n                { data: sourceDeals },\n                { data: destinationDeals },\n            ] = await Promise.all([\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: source.droppableId },\n                }),\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: destination.droppableId },\n                }),\n            ]);\n\n            await Promise.all([\n                // decrease index on the deals after the source index in the source columns\n                ...sourceDeals\n                    .filter(deal => deal.index > sourceDeal.index)\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index - 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // increase index on the deals after the destination index in the destination columns\n                ...destinationDeals\n                    .filter(deal =>\n                        destinationDeal\n                            ? deal.index >= destinationDeal.index\n                            : false\n                    )\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index + 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // change the dragged deal to take the destination index and column\n                dataProvider.update('deals', {\n                    id: sourceDeal.id,\n                    data: {\n                        index: destinationDeal\n                            ? destinationDeal.index\n                            : (destinationDeals.length > 0)\n                            ? destinationDeals.pop()!.index + 1 \n                            : 0,\n                        stage: destination.droppableId,\n                    },\n                    previousData: sourceDeal,\n                }),\n            ]);\n\n            refresh();\n        }\n    };\n\n    return (\n        <DragDropContext onDragEnd={onDragEnd}>\n            <Box display=\"flex\">\n                {stages.map(stage => (\n                    <DealColumn\n                        stage={stage}\n                        dealIds={deals[stage]}\n                        data={data}\n                        key={stage}\n                    />\n                ))}\n            </Box>\n        </DragDropContext>\n    );\n};\n","export const types = [\n    'Other',\n    'Copywriting',\n    'Print project',\n    'UI Design',\n    'Website design',\n];\n\nexport const typeChoices = types.map(type => ({ id: type, name: type }));\n","import * as React from 'react';\nimport {\n    Create,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    NumberInput,\n    ReferenceInput,\n    AutocompleteInput,\n    required,\n    useRedirect,\n    useDataProvider,\n    useGetIdentity,\n} from 'react-admin';\nimport { Dialog } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { stageChoices } from './stages';\nimport { typeChoices } from './types';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 500,\n    },\n});\n\nexport const DealCreate = ({ open }: { open: boolean }) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    const dataProvider = useDataProvider();\n    const { identity } = useGetIdentity();\n\n    const handleClose = () => {\n        redirect('/deals');\n    };\n\n    const onSuccess = ({ data: deal }: { data: Deal }) => {\n        redirect('/deals');\n        // increase the index of all deals in the same stage as the new deal\n        dataProvider\n            .getList('deals', {\n                pagination: { page: 1, perPage: 50 },\n                sort: { field: 'id', order: 'ASC' },\n                filter: { stage: deal.stage },\n            })\n            .then(({ data: deals }) =>\n                Promise.all(\n                    deals\n                        .filter(oldDeal => oldDeal.id !== deal.id)\n                        .map(oldDeal =>\n                            dataProvider.update('deals', {\n                                id: oldDeal.id,\n                                data: { index: oldDeal.index + 1 },\n                                previousData: oldDeal,\n                            })\n                        )\n                )\n            );\n    };\n\n    return (\n        <Dialog open={open} onClose={handleClose}>\n            <Create\n                resource=\"deals\"\n                basePath=\"/deals\"\n                className={classes.root}\n                onSuccess={onSuccess}\n            >\n                <SimpleForm initialValues={{ index: 0, sales_id: identity && identity?.id }}>\n                    <TextInput\n                        source=\"name\"\n                        label=\"Deal name\"\n                        fullWidth\n                        validate={[required()]}\n                    />\n                    <TextInput\n                        source=\"description\"\n                        multiline\n                        rows={3}\n                        fullWidth\n                    />\n                    <ReferenceInput\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        fullWidth\n                        validate={[required()]}\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <SelectInput\n                        source=\"stage\"\n                        choices={stageChoices}\n                        fullWidth\n                        validate={[required()]}\n                        defaultValue=\"opportunity\"\n                    />\n                    <SelectInput\n                        source=\"type\"\n                        choices={typeChoices}\n                        fullWidth\n                    />\n                    <NumberInput source=\"amount\" fullWidth defaultValue={0} />\n                    <ReferenceInput\n                        source=\"sales_id\"\n                        reference=\"sales\"\n                        label=\"Account manager\"\n                        helperText={false}\n                        fullWidth\n                    >\n                        <SelectInput\n                            optionText={(sales: any) =>\n                                `${sales.first_name} ${sales.last_name}`\n                            }\n                        />\n                    </ReferenceInput>\n                </SimpleForm>\n            </Create>\n        </Dialog>\n    );\n};\n","import * as React from 'react';\nimport { useListContext } from 'react-admin';\nimport { Link } from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n    ul: {\n        listStyle: 'none',\n        padding: 0,\n        margin: 0,\n        display: 'inline-block',\n    },\n    li: {\n        display: 'inline',\n        '&:after': {\n            content: '\", \"',\n        },\n        '&:last-child:after': {\n            content: '\"\"',\n        },\n    },\n});\n\nexport const ContactList = () => {\n    const { ids, data, loaded } = useListContext();\n    const classes = useStyles();\n    if (!loaded) return <div style={{ height: '2em' }} />;\n    return (\n        <ul className={classes.ul}>\n            {ids.map(id => (\n                <li key={id} className={classes.li}>\n                    <Link\n                        component={RouterLink}\n                        to={`/contacts/${id}`}\n                        variant=\"subtitle1\"\n                    >\n                        {data[id].first_name} {data[id].last_name}\n                    </Link>\n                </li>\n            ))}\n        </ul>\n    );\n};\n","import * as React from 'react';\nimport {\n    ShowBase,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    ReferenceArrayField,\n    useRecordContext,\n    useRedirect,\n    useRefresh,\n    useDataProvider,\n    Identifier,\n} from 'react-admin';\nimport {\n    Box,\n    Dialog,\n    DialogContent,\n    Typography,\n    Divider,\n    Button,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { format } from 'date-fns';\n\nimport { CompanyAvatar } from '../companies/CompanyAvatar';\nimport { NotesIterator } from '../notes';\nimport { ContactList } from './ContactList';\nimport { stageNames } from './stages';\n\nconst useStyles = makeStyles({\n    dialog: {\n        position: 'absolute',\n        top: 50,\n    },\n});\n\nexport const DealShow = ({ open, id }: { open: boolean; id: Identifier }) => {\n    const redirect = useRedirect();\n    const classes = useStyles();\n\n    const handleClose = () => {\n        redirect('/deals');\n    };\n\n    return (\n        <Dialog\n            open={open}\n            onClose={handleClose}\n            fullWidth\n            maxWidth=\"md\"\n            classes={{ paper: classes.dialog }}\n        >\n            <DialogContent>\n                <ShowBase resource=\"deals\" basePath=\"/deals\" id={id}>\n                    <DealShowContent />\n                </ShowBase>\n            </DialogContent>\n        </Dialog>\n    );\n};\n\nconst DealShowContent = () => {\n    const record = useRecordContext();\n    const dataProvider = useDataProvider();\n    const redirect = useRedirect();\n    const refresh = useRefresh();\n    \n    if (!record) return null;\n\n    const onDelete = async() =>{\n        const { data: columnDeals } = await dataProvider.getList('deals', {\n            sort: { field: 'index', order: 'ASC' },\n            pagination: { page: 1, perPage: 100 },\n            filter: { stage: record.droppableId },\n        });\n        await Promise.all([\n            ...columnDeals\n                .filter(\n                    deal => deal.index < record.index\n                )\n                .map(deal =>\n                    dataProvider.update('deals', {\n                        id: deal.id,\n                        data: { index: deal.index - 1 },\n                        previousData: deal,\n                    })\n                ),\n            // for the deal that was moved, update its index\n            dataProvider.delete('deals', {\n                id: record.id,\n                previousData: record,\n            }),\n        ]);\n        redirect('/deals');\n        refresh();\n    };\n\n    return (\n        <>\n            <Box display=\"flex\">\n                <Box\n                    width={100}\n                    display=\"flex\"\n                    flexDirection=\"column\"\n                    alignItems=\"center\"\n                >\n                    <ReferenceField\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <CompanyAvatar />\n                    </ReferenceField>\n                    <ReferenceField\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        link=\"show\"\n                    >\n                        <TextField\n                            source=\"name\"\n                            align=\"center\"\n                            component=\"div\"\n                        />\n                    </ReferenceField>\n                </Box>\n                <Box ml={2} flex=\"1\">\n                    <Box display=\"flex\" justifyContent=\"space-between\" >\n                        <Typography variant=\"h5\">{record.name}</Typography>\n                        <Button\n                            variant=\"contained\"\n                            startIcon={<DeleteIcon />}            \n                            onClick={(e:any) =>{\n                                e.stopPropagation();\n                                onDelete();\n                            }}\n                        >\n                            Delete\n                        </Button>\n                    </Box>\n\n                    <Box display=\"flex\" mt={2}>\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Start\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {format(new Date(record.start_at), 'PP')}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Budget\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {record.amount.toLocaleString('en-US', {\n                                    notation: 'compact',\n                                    style: 'currency',\n                                    currency: 'USD',\n                                    currencyDisplay: 'narrowSymbol',\n                                    minimumSignificantDigits: 3,\n                                })}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Type\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {record.type}\n                            </Typography>\n                        </Box>\n\n                        <Box display=\"flex\" mr={5} flexDirection=\"column\">\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Stage\n                            </Typography>\n                            <Typography variant=\"subtitle1\">\n                                {/* @ts-ignore */}\n                                {stageNames[record.stage]}\n                            </Typography>\n                        </Box>\n                    </Box>\n\n                    <Box mt={2} mb={2}>\n                        <Box\n                            display=\"flex\"\n                            mr={5}\n                            flexDirection=\"column\"\n                            minHeight={48}\n                        >\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                Contacts\n                            </Typography>\n                            <ReferenceArrayField\n                                source=\"contact_ids\"\n                                reference=\"contacts\"\n                            >\n                                <ContactList />\n                            </ReferenceArrayField>\n                        </Box>\n                    </Box>\n\n                    <Box mt={2} mb={2} style={{ whiteSpace: 'pre-line' }}>\n                        <Typography color=\"textSecondary\" variant=\"body2\">\n                            Description\n                        </Typography>\n                        <Typography>{record.description}</Typography>\n                    </Box>\n\n                    <Divider />\n\n                    <Box mt={2}>\n                        <ReferenceManyField\n                            target=\"deal_id\"\n                            reference=\"dealNotes\"\n                            sort={{ field: 'date', order: 'DESC' }}\n                        >\n                            <NotesIterator reference=\"deals\" />\n                        </ReferenceManyField>\n                    </Box>\n                </Box>\n            </Box>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { useListFilterContext, useGetIdentity } from 'react-admin';\nimport { Switch, FormControlLabel } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nexport const OnlyMineInput = ({ alwaysOn }: { alwaysOn: boolean }) => {\n    const {\n        filterValues,\n        displayedFilters,\n        setFilters,\n    } = useListFilterContext();\n    const { identity } = useGetIdentity();\n    const classes = useStyles();\n    const handleChange = () => {\n        const newFilterValues = { ...filterValues };\n        if (typeof filterValues.sales_id !== 'undefined') {\n            delete newFilterValues.sales_id;\n        } else {\n            newFilterValues.sales_id = identity && identity?.id;\n        }\n        setFilters(newFilterValues, displayedFilters);\n    };\n    return (\n        <div className={classes.root}>\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={typeof filterValues.sales_id !== 'undefined'}\n                        onChange={handleChange}\n                        color=\"primary\"\n                        name=\"checkedC\"\n                    />\n                }\n                label=\"Only companies I manage\"\n            />\n        </div>\n    );\n};\n\nOnlyMineInput.defaultProps = { source: 'sales_id' };\n","import * as React from 'react';\nimport {\n    CreateButton,\n    ExportButton,\n    FilterButton,\n    List,\n    ListProps,\n    SearchInput,\n    SelectInput,\n    TopToolbar,\n    useGetIdentity,\n} from 'react-admin';\nimport { Route } from 'react-router';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { DealListContent } from './DealListContent';\nimport { DealCreate } from './DealCreate';\nimport { DealShow } from './DealShow';\nimport { OnlyMineInput } from './OnlyMineInput';\nimport { typeChoices } from './types';\n\nexport const DealList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <>\n            <List\n                {...props}\n                perPage={100}\n                sort={{ field: 'index', order: 'ASC' }}\n                filters={dealFilters}\n                filterDefaultValues={{ sales_id: identity && identity?.id }}\n                actions={<DealActions />}\n                pagination={false}\n                component=\"div\"\n            >\n                <DealListContent />\n            </List>\n            <Route path=\"/deals/create\">\n                {({ match }) => <DealCreate open={!!match} />}\n            </Route>\n            <Route path=\"/deals/:id/show\">\n                {({ match }) =>\n                    !!match ? (\n                        <DealShow open={!!match} id={match?.params?.id} />\n                    ) : null\n                }\n            </Route>\n        </>\n    ) : null;\n};\n\nconst dealFilters = [\n    <SearchInput source=\"q\" alwaysOn />,\n    <OnlyMineInput alwaysOn />,\n    <SelectInput source=\"type\" choices={typeChoices} />,\n];\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst DealActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <FilterButton />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/deals\"\n                variant=\"contained\"\n                label=\"New Deal\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { DealList } from './DealList';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\n\nexport default {\n    list: DealList,\n    icon: MonetizationOnIcon,\n};\n","export const productFamilyCategories = [\n    'Safety laser scanners', \n    '2D LiDAR sensors', \n    '3D LiDAR sensors', \n    'Cleaning Robot',\n].map(category => ({ id: category, name: category }));","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CategoryIcon from '@material-ui/icons/Category';\n\nimport { ProductFamily } from '../types';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\nimport { productFamilyCategories } from '../productFamilies/productFamilyCategories';\n\nconst useStyles = makeStyles(theme => ({\n    familyList: {\n        maxHeight: theme.spacing(20), \n        overflow: 'auto',\n    },\n    categoryList: {\n        maxHeight: theme.spacing(20), \n        overflow: 'auto',\n    }\n}));\n\nexport const ProductListFilter = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const { data: familyData, ids: familyIds } = useGetList<ProductFamily>(\n        'productFamilies',\n        { page: 1, perPage: 1000 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n\n            <FilterList label=\"Families\" icon={<CategoryIcon />}>\n                <div className={classes.familyList}>\n                    {familyIds &&\n                        familyData &&\n                        familyIds.map(id => (\n                            <FilterListItem\n                                key={id}\n                                label={<Chip label={familyData[id].name} size=\"small\"/>}\n                                value={{ family_id: id }}\n                            />\n                        ))}\n                </div>\n            </FilterList>\n\n            <FilterList label=\"Categories\" icon={<CategoryIcon />}>\n                <div className={classes.categoryList}>\n                    {productFamilyCategories.map(category => (\n                            <FilterListItem\n                                key={category.id}\n                                label={category.name}\n                                value={{ 'family.category': category.id }}\n                            />\n                    ))}\n                </div>\n            </FilterList>\n        </CollapsibleListFilter>\n    );\n};\n","import * as React from 'react';\nimport {\n    List,\n    ListProps,\n    TopToolbar,\n    ExportButton,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    ListActionsProps,\n} from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ProductGridList } from './ProductGridList';\nimport { ProductListFilter } from './ProductListFilter';\nimport { ImportButton } from 'react-admin-import-csv';\n\nexport const ProductList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <List\n            {...props}\n            actions={<ProductListActions />}\n            aside={<ProductListFilter />}\n            filterDefaultValues={{ }}\n            pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n            perPage={25}\n            sort={{ field: 'model', order: 'ASC' }}\n            component=\"div\"\n        >\n            <ProductGridList />\n        </List>\n    ) : null;\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\n\nconst ProductListActions = (props: ListActionsProps) => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <ExportButton />\n            <ImportButton {...props} />\n            <CreateButton\n                basePath=\"/products\"\n                variant=\"contained\"\n                label=\"New Product\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","export const productProprtyCategories = [\n    'General', \n    'Safety', \n    'Mechanics/Electronics', \n    'Performance', \n    'Interfaces', \n    'Ambient data',  \n].map(category => ({ id: category, name: category }));","import Reacct from 'react';\nimport {\n    Select,\n    MenuItem,\n } from '@material-ui/core';\n\nconst ChoiceSelector = (props: ChoiceSelectorProps) => {\n    const { label, value, onChange, choices} = props;\n    return (\n        <Select\n            label={label}\n            value={value}\n            onChange={(event:any) => onChange(event.target.value)}\n        >\n            <MenuItem value=\"\"><em>None</em></MenuItem>\n            {choices.map(choice => (\n                <MenuItem\n                    key={choice.id}\n                    value={choice.id}\n                >\n                    {choice.name}\n                </MenuItem>\n            ))}\n        </Select>\n    );\n};\n\ninterface Choice {\n    id: string;\n    name: String;\n};\n\nexport interface ChoiceSelectorProps {\n    label: string;\n    value: string;\n    onChange: any;\n    choices: Choice[];\n};\n\nexport default ChoiceSelector;","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    useCreateSuggestionContext,\n    useCreate,\n    ReferenceInput,\n} from 'react-admin';\nimport {\n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n    DialogTitle,\n    Select,\n    MenuItem,\n } from '@material-ui/core';\n import { makeStyles } from '@material-ui/core/styles';\nimport { productProprtyCategories } from './productProprtyCategories';\nimport ChoiceSelector from '../components/ChoiceSelector';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nexport const CreatePropertyType = () => {\n    const classes = useStyles();\n    const { filter, onCancel, onCreate } = useCreateSuggestionContext();\n    const [category, setCategory] = useState('');\n    const [name, setName] = useState(filter || '');\n    const [unit, setUnit] = useState('');\n    const [synonyms, setSynonyms] = useState('');\n    const [create] = useCreate('propertyTypes');\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        create(\n            {\n                payload: {\n                    data: {\n                        name: name,\n                        unit: unit,\n                        synonyms: synonyms,\n                        category: category,\n                    },\n                },\n            },\n            {\n                onSuccess: ({ data }: {data: any;}) => {\n                    setName('');\n                    setUnit('');\n                    setSynonyms('');\n                    setCategory('');\n                    onCreate(data);\n                },\n            }\n        );\n    };\n\n    return (\n        <Dialog open onClose={onCancel}>\n            <DialogTitle>Add new Product Property Type</DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <div className={classes.root}>\n                        <ChoiceSelector\n                            label=\"Category\"\n                            value={category}\n                            onChange={setCategory}\n                            choices={productProprtyCategories}\n                        />\n                        <TextField\n                            label=\"New type name\"\n                            value={name}\n                            onChange={event => setName(event.target.value)}\n                            autoFocus\n                            required\n                        />\n                        <TextField\n                            label=\"Unit\"\n                            value={unit}\n                            onChange={event => setUnit(event.target.value)}\n                        />\n                        <TextField\n                            label=\"Commma separated synonyms\"\n                            value={synonyms}\n                            onChange={event => setSynonyms(event.target.value)}\n                        />\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"submit\" disabled={!name}>Add</Button>\n                    <Button onClick={onCancel}>Cancel</Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n};","import { \n    AutocompleteInput, \n    ReferenceInput, \n    SimpleFormIterator,\n    SimpleFormIteratorProps, \n    TextInput, \n} from \"react-admin\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\nimport { CreatePropertyType } from \"./CreatePropertyType\";\n\nconst useStyles = makeStyles(theme => ({\n    inline: {\n        display: 'inline-block',\n        marginLeft: theme.spacing(1),\n        width: '32%',\n        minWidth: theme.spacing(10),\n        '&.first-child': {\n            marginLeft: 0,\n        },\n        [theme.breakpoints.down('xs')]: {\n            display: 'block',\n            marginLeft: 0,\n            width: '100%',\n            margin: 0,\n        }\n    },\n    \n}));\n\nexport const PropertyFormIterator = (props: SimpleFormIteratorProps) => {\n    const classes = useStyles();\n    return (\n        <SimpleFormIterator {...props} >\n            <ReferenceInput\n                source=\"type_id\"\n                reference=\"propertyTypes\"\n                label=\"Type\"\n                formClassName={classNames(classes.inline, 'first-child')}\n                fullWidth\n            >\n                <AutocompleteInput \n                    optionText=\"name\" \n                    create={<CreatePropertyType />}\n                />\n            </ReferenceInput>\n            <TextInput \n                source=\"property_value\" \n                label=\"Value\"\n                formClassName={classes.inline}\n                fullWidth\n            />\n            <TextInput \n                source=\"condition\"  \n                label=\"Condition\"\n                formClassName={classes.inline}\n                fullWidth\n            />\n        </SimpleFormIterator>\n    );\n};","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    useCreateSuggestionContext,\n    useCreate,\n} from 'react-admin';\nimport {\n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n    Select,\n    MenuItem,\n    Box,\n    DialogTitle,\n } from '@material-ui/core';\n import { ProductFamily } from '../types';\n import { productFamilyCategories } from './productFamilyCategories';\nimport ChoiceSelector from '../components/ChoiceSelector';\n\nexport const CreateProductFamily = () => {\n    const { filter, onCancel, onCreate } = useCreateSuggestionContext();\n    const [name, setName] = useState(filter || '');\n    const [category, setCategory] = useState('');\n    const [website, setWebsite] = useState('');\n    const [image, setImage] = useState('');\n    const [create] = useCreate('productFamilies');\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        create(\n            {\n                payload: {\n                    data: {\n                        name: name,\n                        image: image,\n                        website: website,\n                        category: category,\n                    },\n                },\n            },\n            {\n                onSuccess: ({ data }: {data: ProductFamily;}) => {\n                    setName('');\n                    setImage('');\n                    setWebsite('');\n                    setCategory('');\n                    onCreate(data);\n                },\n            }\n        );\n    };\n\n    return (\n        <Dialog open onClose={onCancel}>\n            <DialogTitle>New Product Category</DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <Box display=\"flex\" flexDirection=\"column\">\n                        <ChoiceSelector\n                            label=\"Category\"\n                            value={category}\n                            onChange={setCategory}\n                            choices={productFamilyCategories}\n                        />\n\n                        <TextField\n                            label=\"New category name\"\n                            value={name}\n                            onChange={event => setName(event.target.value)}\n                            autoFocus\n                        />\n                        <TextField\n                            label=\"Website\"\n                            value={website}\n                            onChange={event => setWebsite(event.target.value)}\n                            autoFocus\n                        />\n                        <TextField\n                            label=\"Image\"\n                            value={image}\n                            onChange={event => setImage(event.target.value)}\n                            autoFocus\n                        />\n                    </Box>\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"submit\">Save</Button>\n                    <Button onClick={onCancel}>Cancel</Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n};","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    ReferenceInput,\n    TabbedForm,\n    TextInput,\n    FormTab,\n    required,\n    AutocompleteInput,\n    useGetIdentity,\n    ArrayInput,\n    SimpleFormIterator,\n    ReferenceArrayInput,\n} from 'react-admin';\nimport RichTextInput from 'ra-input-rich-text';\nimport { Box, CardContent, Divider, Avatar, useTheme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport clsx from 'clsx';\nimport { CreatePropertyType } from './CreatePropertyType';\nimport { PropertyFormIterator } from './PropertyFormIterator';\nimport { CreateProductFamily } from '../productFamilies/CreateProductFamily';\n\n\nconst useStyles = makeStyles(theme => ({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n    propertyContainer: {\n        display: 'flex',\n        gap: theme.spacing(1),\n        minWidth: '500px',\n    },\n}));\n\nexport const ProductCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const theme = useTheme();\n\n    const defaultValue = () => ({ });\n\n    return (\n        <Create {...props} actions={false} >\n            <TabbedForm redirect=\"show\">\n                <FormTab label=\"General\">\n                    <ReferenceInput \n                        label=\"Comapny\" \n                        source=\"company_id\" \n                        reference=\"companies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <ReferenceInput \n                        label=\"Product Family\" \n                        source=\"family_id\" \n                        reference=\"productFamilies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput \n                            optionText=\"name\" \n                            create={<CreateProductFamily />}\n                        />\n                    </ReferenceInput>\n                    <TextInput source=\"model\" validate={required()} fullWidth />\n                    <TextInput source=\"code\" fullWidth />\n                    <TextInput source=\"website\" fullWidth />\n                    <TextInput source=\"image\" fullWidth />\n                    <TextInput \n                        source=\"description\"\n                        multiline\n                        rows={3} \n                        fullWidth \n                    />\n                </FormTab>\n                <FormTab label=\"Properties\">\n                    <ArrayInput\n                        source=\"properties\"\n                    >\n                        <PropertyFormIterator />\n                    </ArrayInput>\n                </FormTab>\n            </TabbedForm>\n        </Create>\n    );\n};\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar>\n                    <ShoppingCartIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth=\"80%\">\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport { Product } from '../types';\n\nconst useStyles = makeStyles({\n    image: {\n        objectFit: 'contain',\n    },\n});\n\nconst sizeInPixel = {\n    medium: 42,\n    small: 20,\n};\n\nexport const ProductImageField = ({\n    record,\n    source,\n    size = 'medium',\n}: {\n    record?: Product;\n    source?: string;\n    size?: 'small' | 'medium';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    if(!record.image) return (\n        <Avatar>\n            <ShoppingCartIcon />\n        </Avatar>\n    )\n    return (\n        <img\n            src={process.env.PUBLIC_URL + record.image}\n            alt={record.model}\n            title={record.model}\n            width={sizeInPixel[size]}\n            height={sizeInPixel[size]}\n            className={classes.image}\n        />\n    );\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    ReferenceField,\n} from 'react-admin';\nimport { Box, Typography, Divider, Link } from '@material-ui/core';\n\nimport { Product, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\n\nexport const ProductAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: Product;\n    link?: string;\n}) =>{\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/products\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: Product;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Product info</Typography>\n            <Divider />\n\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                Company: \n                <ReferenceField\n                    record={record}\n                    source=\"company_id\"\n                    reference=\"companies\"\n                    link=\"show\"\n                >\n                    <TextField source=\"name\" />\n                </ReferenceField>\n            </Box>\n\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                Family: \n                <ReferenceField\n                    record={record}\n                    source=\"family_id\"\n                    reference=\"productFamilies\"\n                    link=\"show\"\n                >\n                    <TextField source=\"name\" />\n                </ReferenceField>\n            </Box>\n\n            <Box mt={1}>\n                Code: <TextField source=\"code\" record={record} />\n            </Box>\n            {record.website && (\n                <Box mt={1}>\n                    Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">Link</Link>\n                </Box>\n            )}\n\n            <Box mt={3}>\n                <Typography variant=\"subtitle2\">Description</Typography>\n                <Divider />\n\n                <Box mt={1}>\n                    <TextField source=\"description\" />\n                </Box>\n\n            </Box>\n        </>\n    ) : null;","import * as React from 'react';\nimport { useState, ChangeEvent } from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    EditButton,\n    TextField,\n    ReferenceManyField,\n    SelectField,\n    ReferenceField,\n    ImageField,\n    Datagrid,\n    useShowContext,\n    useRecordContext,\n    useListContext,\n    ReferenceArrayField,\n    SingleFieldList,\n    ChipField,\n    Pagination,\n} from 'react-admin';\nimport {\n    Avatar as MuiAvatar,\n    Box,\n    Button,\n    Card,\n    CardContent,\n    Typography,\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemText,\n    ListItemSecondaryAction,\n    Tabs,\n    Tab,\n    Chip,\n    Divider,\n} from '@material-ui/core';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { NotesIterator } from '../notes';\n\n\nimport { ProductImageField } from './ProductImageField';\nimport { ProductAside } from './ProductAside';\nimport { Product, ProductPrperty } from '../types';\nimport { LogoField } from '../companies/LogoField';\nimport { CompanyGridList } from '../companies/CompanyGridList';\nimport { CompanyCard } from '../companies/CompanyCard';\n\nexport const ProductShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ProductShowContent />\n    </ShowBase>\n);\n\nconst ProductShowContent = () => {\n    const { record, loaded } = useShowContext<Product>();\n    const [value, setValue] = useState(0);\n    const handleChange = (event: ChangeEvent<{}>, newValue: number) => {\n        setValue(newValue);\n    };\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\" mb={1}>\n                            <ProductImageField record={record as any} />\n                            <Box ml={2} flex=\"1\">\n                                <Box display=\"flex\" gridGap={4}>\n                                    <Typography variant=\"h5\">{record.model}</Typography>\n                                </Box>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <Tabs\n                            value={value}\n                            indicatorColor=\"primary\"\n                            textColor=\"primary\"\n                            onChange={handleChange}\n                            variant=\"scrollable\"\n                            scrollButtons=\"auto\"\n                        >\n                            <Tab\n                                label={\n                                    record.nb_notes > 1\n                                        ? `${record.nb_notes} Notes`\n                                        : `${record.nb_notes} Note`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_properties > 1\n                                        ? `${record.nb_properties} Properties`\n                                        : `${record.nb_properties} Property`\n                                }\n                            />\n                            <Tab\n                                label={\n                                    record.nb_used_by > 1\n                                        ? `Used by ${record.nb_used_by} Companies`\n                                        : `Used by ${record.nb_used_by} Company`\n                                }\n                            />\n                        </Tabs>\n                        <Divider />\n                        <TabPanel value={value} index={0}>\n                            <ReferenceManyField\n                                reference=\"productNotes\"\n                                target=\"product_id\"\n                            >\n                                 <NotesIterator reference=\"products\" />\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={1}>\n                            <ReferenceManyField reference=\"productProperties\" target=\"product_id\" addLabel={false}>\n                                <Datagrid>\n                                    <ReferenceField\n                                            source=\"type_id\"\n                                            reference=\"propertyTypes\"\n                                            link={false}\n                                        >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                    <TextField source=\"property_value\" />\n                                    <ReferenceField\n                                            source=\"type_id\"\n                                            reference=\"propertyTypes\"\n                                            link={false}\n                                        >\n                                        <TextField source=\"unit\" />\n                                    </ReferenceField>\n                                    <TextField source=\"condition\" />\n    \n                                </Datagrid>\n                            </ReferenceManyField>\n                        </TabPanel>\n                        <TabPanel value={value} index={2}>\n                            <Box mt={1}>\n                            <ReferenceArrayField\n                                reference=\"companies\"\n                                source=\"used_by_companies\"\n                                pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n                                perPage={25}\n                            >\n                                <CompanyGridList />\n                            </ReferenceArrayField>\n                            </Box>\n                        </TabPanel>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ProductAside record={record} />\n        </Box>\n    );\n};\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`wrapped-tabpanel-${index}`}\n            aria-labelledby={`wrapped-tab-${index}`}\n            {...other}\n        >\n            {children}\n        </div>\n    );\n};\n\nconst ProductPrpertiesIterator = () => {\n    const { data, ids, loaded } = useListContext<ProductPrperty>();\n    const record = useRecordContext();\n\n    const now = Date.now();\n    if (!loaded) return null;\n    return (\n        <Box>\n            <List>\n                {ids.map(id => {\n                    const productProperty = data[id];\n                    return (\n                        <ListItem\n                            button\n                            key={id}\n                            component={RouterLink}\n                            to={`/productProperties/${id}/show`}\n                        >\n                            {/* <ListItemAvatar>\n                                <Avatar record={productProperty} />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={`${productProperty.first_name} ${productProperty.last_name}`}\n                                secondary={\n                                    <>\n                                        {productProperty.title}{' '}\n                                        {productProperty.nb_notes &&\n                                        `- ${productProperty.nb_notes} notes `}\n                                    </>\n                                }\n                            />\n                            <ListItemSecondaryAction>\n                                <Typography variant=\"body2\" color=\"textSecondary\">\n                                    last activity{' '}\n                                    {formatDistance(\n                                        new Date(productProperty.last_seen),\n                                        now\n                                    )}{' '}\n                                    ago <Status status={productProperty.status} />\n                                </Typography>\n                            </ListItemSecondaryAction> */}\n                        </ListItem>\n                    );\n                })}\n            </List>\n            <Box textAlign=\"center\" mt={1}>\n                {/* <CreateRelatedProductPrpertyButton record={record} /> */}\n            </Box>\n        </Box>\n    );\n};\n\n// const CreateRelatedProductPrpertyButton = ({ record }: any) => (\n//     <Button\n//         component={RouterLink}\n//         to={{\n//             pathname: '/productProperties/create',\n//             state: { record: { product_id: record.id } },\n//         }}\n//         color=\"primary\"\n//         variant=\"contained\"\n//         size=\"small\"\n//         startIcon={<PersonAddIcon />}\n//     >\n//         Add property\n//     </Button>\n// );\n","import * as React from 'react';\nimport {\n    Edit,\n    EditProps,\n    ReferenceInput,\n    TabbedForm,\n    FormTab,\n    TextInput,\n    SelectInput,\n    useRecordContext,\n    AutocompleteInput,\n    required,\n    ArrayInput,\n    SimpleFormIterator,\n} from 'react-admin';\nimport { Box, CardContent, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { ProductAside } from './ProductAside';\nimport { ProductImageField } from './ProductImageField';\nimport { CreatePropertyType } from './CreatePropertyType';\nimport { PropertyFormIterator } from './PropertyFormIterator';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nconst renderDistributor = (choice: any) => {\n\n}\n\nexport const ProductEdit = (props: EditProps) => {\n    const classes = useStyles();\n    return (\n        <Edit \n            {...props} \n            aside={<ProductAside link=\"show\" />} \n            actions={false}\n        >\n            <TabbedForm\n                redirect=\"show\"\n            >\n                <FormTab label=\"General\">\n                    <ReferenceInput \n                        label=\"Comapny\" \n                        source=\"company_id\" \n                        reference=\"companies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <ReferenceInput \n                        label=\"Product Family\" \n                        source=\"family_id\" \n                        reference=\"productFamilies\"\n                        fullWidth\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <TextInput source=\"model\" validate={required()} fullWidth />\n                    <TextInput source=\"code\" fullWidth />\n                    <TextInput source=\"website\" fullWidth />\n                    <TextInput source=\"image\" fullWidth />\n                    <TextInput \n                        source=\"description\"\n                        multiline\n                        rows={3} \n                        fullWidth \n                    />\n                </FormTab>\n                <FormTab label=\"Properties\">\n                    <ArrayInput\n                        source=\"properties\"\n                    >\n                        <PropertyFormIterator />\n                    </ArrayInput>\n                </FormTab>\n            </TabbedForm>\n        </Edit>\n    );\n};\n\nconst CustomLayout = (props: any) => {\n    const record = useRecordContext(props);\n    return (\n        <CardContent>\n            <Box display=\"flex\">\n                <ProductImageField record={record as any} />\n                <Box ml={2} flex=\"1\" maxWidth={796}>\n                    {props.children}\n                </Box>\n            </Box>\n        </CardContent>\n    );\n};\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport { ProductList } from './ProductList';\nimport { ProductCreate } from './ProductCreate';\nimport { ProductShow } from './ProductShow';\nimport { ProductEdit } from './ProductEdit';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\n\nexport default {\n    list: ProductList,\n    create: ProductCreate,\n    edit: ProductEdit,\n    show: ProductShow,\n    icon: FiberManualRecordIcon,\n};\n","import * as React from 'react';\nimport { Avatar as MuiAvatar } from '@material-ui/core';\n\nimport { ProductFamily } from '../types';\n\nexport const Avatar = ({ record }: { record: ProductFamily }) => (\n    <MuiAvatar src={record.image}>\n        {record.name}\n    </MuiAvatar>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport { CollapsibleListFilter } from '../components/CollapsibleListFilter';\n\nexport const ProductFamilyListFilter = () => {\n\n    return (\n        <CollapsibleListFilter>\n            <FilterLiveSearch />\n        </CollapsibleListFilter>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n    SelectField,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from './Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from '../tags/TagsList';\nimport { ProductFamilyListFilter } from './ProductFamilyListFilter';\nimport { ProductFamily } from '../types';\nimport { productFamilyCategories } from './productFamilyCategories';\n\nconst ProductFamilyListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        ProductFamily\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const record = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/productFamilies/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar record={record} />\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${record.name}`}\n                            secondary={\n                                <>\n                                    {record.name} in{' '}\n                                    <SelectField\n                                        record={record}\n                                        source=\"category\"\n                                        choices={productFamilyCategories}\n                                    />\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst ProductFamilyListActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['last_name', 'first_name', 'last_seen']} />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/productFamilies\"\n                variant=\"contained\"\n                label=\"Add New\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nexport const ProductFamilyList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<ProductFamilyListActions />}\n            aside={<ProductFamilyListFilter />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{  }}\n            // sort={{  }}\n        >\n            <ProductFamilyListContent />\n        </RaList>\n    ) : null;\n};\n","import Reacct, { useState, FormEvent } from 'react';\nimport {\n    Create,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    SelectInput,\n    AutocompleteInput,\n    BooleanInput,\n    SimpleForm,\n    Toolbar,\n    required,\n    useGetIdentity,\n    useCreateContext,\n    useCreateSuggestionContext,\n    useCreate,\n} from 'react-admin';\nimport { \n    Card, \n    CardContent, \n    Divider, \n    Box, \n    Dialog, \n    DialogContent,\n    DialogActions,\n    TextField,\n    Button,\n } from '@material-ui/core';\nimport CategoryIcon from '@material-ui/icons/Category';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { ProductFamily } from '../types';\nimport { productFamilyCategories } from './productFamilyCategories';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\n\nexport const ProductFamilyCreate = (props: CreateProps) => {\n    const classes = useStyles();\n\n    const contactDefaultValue = () => ({ });\n    const transform = (data: ProductFamily) => ({\n        ...data,\n    });\n    \n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm \n                component={CustomLayout} \n                redirect=\"show\"\n                initialValues={contactDefaultValue}\n                transform={transform}\n            >\n                <SelectInput\n                    source=\"category\"\n                    choices={productFamilyCategories}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"name\" fullWidth />\n                <TextInput source=\"website\" fullWidth />\n                <TextInput source=\"image\" fullWidth />\n                <TextInput \n                    source=\"description\"\n                    multiline\n                    rows={3} \n                    fullWidth \n                />\n            </SimpleForm>\n        </Create>\n    );\n};\n\n\nconst CustomLayout = ({ children }: \n    {children: any;}) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <CategoryIcon />\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n\n","import * as React from 'react';\nimport {\n    TextField,\n    ReferenceField,\n    SelectField,\n} from 'react-admin';\nimport { \n    Box, \n    Typography, \n    Divider,\n    Link,\n } from '@material-ui/core';\n\nimport { ProductFamily, Sale } from '../types';\nimport { CollapsibleAside } from '../components/CollapsibleAside';\nimport { productFamilyCategories } from './productFamilyCategories';\n\nexport const ProductFamilyAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: ProductFamily;\n    link?: string;\n}) => {\n    if (!record) return null;\n\n    return (\n        <CollapsibleAside record={record} link={link} basePath=\"/productFamilies\">\n            <AsideContent />\n        </CollapsibleAside>\n    );\n};\n\nconst AsideContent = ({ \n    record \n}: { \n    record?: ProductFamily;\n}) => \n    record ? (\n        <>\n            <Typography variant=\"subtitle2\">Family info</Typography>\n            <Divider />\n            <Box mt={1} display=\"flex\" gridGap={2}>\n                <Typography>Category:</Typography>\n                <SelectField\n                    source=\"category\"\n                    choices={productFamilyCategories}\n                />\n            </Box>\n\n            {record.website && (\n                <Box mt={1}>\n                    Website: <Link href={record.website} target=\"_blank\" rel=\"noreferrer\">Link</Link>\n                </Box>\n            )}\n        </>\n    ) : null;","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    useEditContext,\n    SelectInput,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box } from '@material-ui/core';\nimport omit from 'lodash/omit';\n\nimport { Avatar } from './Avatar';\nimport { ProductFamilyAside } from './ProductFamilyAside';\nimport { ProductFamily } from '../types';\nimport { productFamilyCategories } from './productFamilyCategories';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nconst ProductFamilyEditContent = () => {\n    const { record, loaded, save } = useEditContext<ProductFamily>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar record={record} />\n                                        </Box>\n                                        <Box flex={1}>\n                                            <SelectInput\n                                                source=\"category\"\n                                                choices={productFamilyCategories}\n                                            />\n                                            <TextInput source=\"name\" fullWidth />\n                                            <TextInput source=\"website\" fullWidth />\n                                            <TextInput source=\"image\" fullWidth />\n                                            <TextInput \n                                                source=\"description\"\n                                                multiline\n                                                rows={3} \n                                                fullWidth \n                                            />\n                                        </Box>\n                                        \n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <ProductFamilyAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const ProductFamilyEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <ProductFamilyEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n    SelectField,\n    Pagination,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { Avatar } from './Avatar';\nimport { ProductFamilyAside } from './ProductFamilyAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { ProductFamily } from '../types';\nimport { ProductGridList } from '../products/ProductGridList';\nimport { productFamilyCategories } from './productFamilyCategories';\n\nexport const ProductFamilyShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ProductFamilyShowContent />\n    </ShowBase>\n);\n\nconst ProductFamilyShowContent = () => {\n    const { record, loaded } = useShowContext<ProductFamily>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Avatar record={record} />\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {record.title} in{' '}\n                                    <SelectField\n                                        record={record}\n                                        source=\"category\"\n                                        choices={productFamilyCategories}\n                                    />\n                                </Typography>\n                            </Box>\n                        </Box>\n                        <Box mt={2} p={1}>\n                            <ReferenceManyField\n                                reference=\"products\"\n                                target=\"family_id\"\n                                label=\"Products\"\n                                pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n                                perPage={25}\n                            >\n                                <ProductGridList />\n                            </ReferenceManyField>\n                        </Box>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ProductFamilyAside record={record} />\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { ProductFamilyList } from './ProductFamilyList';\nimport { ProductFamilyCreate } from './ProductFamilyCreate';\nimport { ProductFamilyEdit } from './ProductFamilyEdit';\nimport { ProductFamilyShow } from './ProductFamilyShow';\nimport CategoryIcon from '@material-ui/icons/Category';\n\nexport default {\n    list: ProductFamilyList,\n    create: ProductFamilyCreate,\n    edit: ProductFamilyEdit,\n    show: ProductFamilyShow,\n    icon: CategoryIcon,\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n    useTranslate,\n    DashboardMenuItem,\n    MenuItemLink,\n    MenuProps,\n    ReduxState,\n} from 'react-admin';\n\n\nimport SubMenu from './SubMenu';\nimport { AppState } from '../types';\n\nimport companies from '../companies';\nimport contacts from '../contacts';\nimport tasks from '../tasks';\nimport deals from '../deals';\nimport products from '../products';\nimport productFamilies from '../productFamilies';\n\n\n\ntype MenuName = 'menuCrm' | 'menuProduct' | 'menuCustomers';\n\nconst Menu = ({ dense = false }: MenuProps) => {\n    const [state, setState] = useState({\n        menuCrm: true,\n        menuProduct: true,\n        menuCustomers: true,\n    });\n    const translate = useTranslate();\n    const open = useSelector((state: ReduxState) => state.admin.ui.sidebarOpen);\n    useSelector((state: AppState) => state.theme); // force rerender on theme change\n    const classes = useStyles();\n\n    const handleToggle = (menu: MenuName) => {\n        setState(state => ({ ...state, [menu]: !state[menu] }));\n    };\n\n    return (\n        <div\n            className={classnames(classes.root, {\n                [classes.open]: open,\n                [classes.closed]: !open,\n            })}\n        >\n            {' '}\n            <DashboardMenuItem />\n            <SubMenu\n                handleToggle={() => handleToggle('menuCrm')}\n                isOpen={state.menuCrm}\n                name=\"CRM\"\n                icon={<companies.icon />}\n                dense={dense}\n            >\n                <MenuItemLink\n                    to={{\n                        pathname: '/companies',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Companies\"\n                    leftIcon={<companies.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/contacts',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Contacts\"\n                    leftIcon={<contacts.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/deals',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Deals\"\n                    leftIcon={<deals.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/tasks',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Taks\"\n                    leftIcon={<tasks.icon />}\n                    dense={dense}\n                />\n            </SubMenu>\n            <SubMenu\n                handleToggle={() => handleToggle('menuProduct')}\n                isOpen={state.menuProduct}\n                name=\"Products\"\n                icon={<products.icon />}\n                dense={dense}\n            >\n                <MenuItemLink\n                    to={{\n                        pathname: '/products',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Products\"\n                    leftIcon={<products.icon />}\n                    dense={dense}\n                />\n                <MenuItemLink\n                    to={{\n                        pathname: '/productFamilies',\n                        state: { _scrollToTop: true },\n                    }}\n                    primaryText=\"Families\"\n                    leftIcon={<productFamilies.icon />}\n                    dense={dense}\n                />\n            </SubMenu>\n        </div>\n    );\n};\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n    },\n    open: {\n        width: 200,\n    },\n    closed: {\n        width: 55,\n    },\n}));\n\nexport default Menu;\n","export const darkTheme = {\n    palette: {\n        primary: {\n            main: '#90caf9',\n        },\n        secondary: {\n            main: '#FBBA72',\n        },\n        type: 'dark' as 'dark', // Switching the dark mode on is a single property value change.\n    },\n    sidebar: {\n        width: 200,\n    },\n    overrides: {\n        MuiAppBar: {\n            colorSecondary: {\n                color: '#ffffffb3',\n                backgroundColor: '#616161e6',\n            },\n        },\n        MuiButtonBase: {\n            root: {\n                '&:hover:active::after': {\n                    // recreate a static ripple color\n                    // use the currentColor to make it work both for outlined and contained buttons\n                    // but to dim the background without dimming the text,\n                    // put another element on top with a limited opacity\n                    content: '\"\"',\n                    display: 'block',\n                    width: '100%',\n                    height: '100%',\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    backgroundColor: 'currentColor',\n                    opacity: 0.3,\n                    borderRadius: 'inherit',\n                },\n            },\n        },\n    },\n    props: {\n        MuiButtonBase: {\n            // disable ripple for perf reasons\n            disableRipple: true,\n        },\n    },\n};\n\nexport const lightTheme = {\n    palette: {\n        primary: {\n            main: '#4f3cc9',\n        },\n        secondary: {\n            light: '#5f5fc4',\n            main: '#283593',\n            dark: '#001064',\n            contrastText: '#fff',\n        },\n        background: {\n            default: '#fcfcfe',\n        },\n        type: 'light' as 'light',\n    },\n    shape: {\n        borderRadius: 10,\n    },\n    sidebar: {\n        width: 200,\n    },\n    overrides: {\n        RaMenuItemLink: {\n            root: {\n                borderLeft: '3px solid #fff',\n            },\n            active: {\n                borderLeft: '3px solid #4f3cc9',\n            },\n        },\n        MuiPaper: {\n            elevation1: {\n                boxShadow: 'none',\n            },\n            root: {\n                border: '1px solid #e0e0e3',\n                backgroundClip: 'padding-box',\n            },\n        },\n        MuiButton: {\n            contained: {\n                backgroundColor: '#fff',\n                color: '#4f3cc9',\n                boxShadow: 'none',\n            },\n        },\n        MuiButtonBase: {\n            root: {\n                '&:hover:active::after': {\n                    // recreate a static ripple color\n                    // use the currentColor to make it work both for outlined and contained buttons\n                    // but to dim the background without dimming the text,\n                    // put another element on top with a limited opacity\n                    content: '\"\"',\n                    display: 'block',\n                    width: '100%',\n                    height: '100%',\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    backgroundColor: 'currentColor',\n                    opacity: 0.3,\n                    borderRadius: 'inherit',\n                },\n            },\n        },\n        MuiAppBar: {\n            colorSecondary: {\n                color: '#808080',\n                backgroundColor: '#fff',\n            },\n        },\n        MuiLinearProgress: {\n            colorPrimary: {\n                backgroundColor: '#f5f5f5',\n            },\n            barColorPrimary: {\n                backgroundColor: '#d7d7d7',\n            },\n        },\n        MuiFilledInput: {\n            root: {\n                backgroundColor: 'rgba(0, 0, 0, 0.04)',\n                '&$disabled': {\n                    backgroundColor: 'rgba(0, 0, 0, 0.04)',\n                },\n            },\n        },\n        MuiSnackbarContent: {\n            root: {\n                border: 'none',\n            },\n        },\n    },\n    props: {\n        MuiButtonBase: {\n            // disable ripple for perf reasons\n            disableRipple: true,\n        },\n    },\n};\n","import * as React from 'react';\n\n\nimport { \n    Notification, \n    NotificationProps,\n} from 'react-admin';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\nconst NotificationContainer = (props: any) => {\n    const classes = useStyles();\n    return (\n        <Notification {...props} autoHideDuration={5000} />\n    )\n}\n\nexport default NotificationContainer;","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Layout, LayoutProps } from 'react-admin';\nimport AppBar from './AppBar';\nimport Menu from './Menu';\nimport { darkTheme, lightTheme } from './themes';\nimport { AppState } from '../types';\nimport NotificationContainer from '../notifications/NotificationContainer';\n\nexport default (props: LayoutProps) => {\n    const theme = useSelector((state: AppState) =>\n        state.theme === 'dark' ? darkTheme : lightTheme\n    );\n\n    return (\n        <Layout \n            {...props} \n            appBar={AppBar} \n            menu={Menu} \n            theme={theme} \n            notification={NotificationContainer}\n        />\n    );\n};\n","import * as React from 'react';\nimport { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, withTypes } from 'react-final-form';\nimport { useLocation, Link as RouterLink  } from 'react-router-dom';\n\nimport {\n    Avatar,\n    Button,\n    Card,\n    CardActions,\n    CircularProgress,\n    TextField,\n    Link,\n    Typography,\n} from '@material-ui/core';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Notification, useTranslate, useLogin, useNotify } from 'react-admin';\n\nimport { lightTheme } from './themes';\n\nconst useStyles = makeStyles(theme => ({\n    main: {\n        display: 'flex',\n        flexDirection: 'column',\n        minHeight: '100vh',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundImage: 'radial-gradient(circle at 50% 50%, #313264 0%, #00023b 50%, #00023b 100%)',\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n    },\n    card: {\n        minWidth: 300,\n        // marginTop: '6em',\n    },\n    avatar: {\n        margin: '1em',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    icon: {\n        backgroundColor: theme.palette.secondary.main,\n    },\n    hint: {\n        marginTop: '1em',\n        display: 'flex',\n        justifyContent: 'center',\n        color: theme.palette.grey[500],\n    },\n    form: {\n        padding: '0 1em 1em 1em',\n    },\n    input: {\n        marginTop: '1em',\n    },\n    actions: {\n        padding: '0 1em 1em 1em',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nconst renderInput = ({\n    meta: { touched, error } = { touched: false, error: undefined },\n    input: { ...inputProps },\n    ...props\n}) => (\n    <TextField\n        error={!!(touched && error)}\n        helperText={touched && error}\n        {...inputProps}\n        {...props}\n        fullWidth\n    />\n);\n\ninterface FormValues {\n    username?: string;\n    password?: string;\n}\n\nconst { Form } = withTypes<FormValues>();\n\nconst Login = () => {\n    const [loading, setLoading] = useState(false);\n    const translate = useTranslate();\n    const classes = useStyles();\n    const notify = useNotify();\n    const login = useLogin();\n    const location = useLocation<{ nextPathname: string } | null>();\n\n    const handleSubmit = async (auth: FormValues) => {\n        setLoading(true);\n        try{\n            const response = await login(auth, location.state ? location.state.nextPathname : '/');\n        } catch (error: any) {\n            setLoading(false);\n            notify(error.message, 'warning');\n        }\n    };\n\n    const validate = ({\n        username,\n        password,\n    }: FormValues) => {\n        const errors = { \n            username: !username ? translate('ra.validation.required') : undefined, \n            password: !password ? translate('ra.validation.required') : undefined,\n        };\n        return errors;\n    };\n\n    return (\n        <Form\n            onSubmit={handleSubmit}\n            validate={validate}\n            render={({ handleSubmit }) => (\n                <form onSubmit={handleSubmit} noValidate>\n                    <div className={classes.main}>\n                        <Card className={classes.card}>\n                            <div className={classes.avatar}>\n                                <Avatar className={classes.icon}>\n                                    <LockIcon />\n                                </Avatar>\n                            </div>\n                            <div className={classes.hint}>\n                                Wecome to Assistor.\n                            </div>\n                            <div className={classes.form}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        name=\"username\"\n                                        // @ts-ignore\n                                        component={renderInput}\n                                        label={translate('ra.auth.username')}\n                                        disabled={loading}\n                                    />\n                                </div>\n                                <div className={classes.input}>\n                                    <Field\n                                        name=\"password\"\n                                        // @ts-ignore\n                                        component={renderInput}\n                                        label={translate('ra.auth.password')}\n                                        type=\"password\"\n                                        disabled={loading}\n                                    />\n                                </div>\n                            </div>\n                            <CardActions className={classes.actions}>\n                                <Button\n                                    variant=\"contained\"\n                                    type=\"submit\"\n                                    color=\"primary\"\n                                    disabled={loading}\n                                    fullWidth\n                                >\n                                    {loading && (\n                                        <CircularProgress\n                                            size={25}\n                                            thickness={2}\n                                        />\n                                    )}\n                                    {translate('ra.auth.sign_in')}\n                                </Button>\n                                <Typography variant=\"body2\">Or</Typography>\n                                <Link\n                                    color=\"textSecondary\"\n                                    component={RouterLink}\n                                    to=\"/register\"\n                                    variant=\"body1\"\n                                >\n                                    Register\n                                </Link>\n                            </CardActions>\n                        </Card>\n                        <Notification />\n                    </div>\n                </form>\n            )}\n        />\n    );\n};\n\nLogin.propTypes = {\n    authProvider: PropTypes.func,\n    previousRoute: PropTypes.string,\n};\n\n// We need to put the ThemeProvider decoration in another component\n// Because otherwise the useStyles() hook used in Login won't get\n// the right theme\nconst LoginWithTheme = (props: any) => (\n    <ThemeProvider theme={createTheme(lightTheme)}>\n        <Login {...props} />\n    </ThemeProvider>\n);\n\nexport default LoginWithTheme;\n","import * as React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Card, Box, Link } from '@material-ui/core';\nimport ContactsIcon from '@material-ui/icons/Contacts';\nimport { useGetList, SimpleList, useGetIdentity } from 'react-admin';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from '../contacts/Avatar';\nimport { Contact } from '../types';\n\nexport const HotContacts = () => {\n    const { identity } = useGetIdentity();\n    const {\n        data: contactData,\n        ids: contactIds,\n        total: contactTotal,\n        loaded: contactsLoaded,\n    } = useGetList<Contact>(\n        'contacts',\n        { page: 1, perPage: 10 },\n        { field: 'last_seen', order: 'DESC' },\n        { status: 'hot', sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    return (\n        <>\n            <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n                <Box ml={2} mr={2} display=\"flex\">\n                    <ContactsIcon color=\"disabled\" fontSize=\"large\" />\n                </Box>\n                <Link\n                    underline=\"none\"\n                    variant=\"h5\"\n                    color=\"textSecondary\"\n                    component={RouterLink}\n                    to=\"/contacts\"\n                >\n                    Hot contacts\n                </Link>\n            </Box>\n            <Card>\n                <SimpleList<Contact>\n                    basePath=\"/contacts\"\n                    linkType=\"show\"\n                    ids={contactIds}\n                    data={contactData}\n                    total={contactTotal}\n                    loaded={contactsLoaded}\n                    primaryText={contact =>\n                        `${contact.first_name} ${contact.last_name}`\n                    }\n                    secondaryText={contact =>\n                        formatDistance(\n                            new Date(contact.last_seen),\n                            new Date(),\n                            {\n                                addSuffix: true,\n                            }\n                        )\n                    }\n                    leftAvatar={contact => <Avatar record={contact} />}\n                />\n            </Card>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Card, CardContent, Typography, Box } from '@material-ui/core';\nimport NoteIcon from '@material-ui/icons/Note';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n    useGetList,\n    useGetIdentity,\n    ReferenceField,\n    TextField,\n    FunctionField,\n} from 'react-admin';\nimport { formatDistance } from 'date-fns';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\n\nimport { Contact as ContactType } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    note: {\n        marginBottom: theme.spacing(2),\n    },\n    noteText: {\n        backgroundColor: theme.palette.grey[200],\n        padding: theme.spacing(1),\n        borderRadius: 10,\n    },\n    noteTextText: {\n        display: '-webkit-box',\n        '-webkit-line-clamp': 3,\n        '-webkit-box-orient': 'vertical',\n        overflow: 'hidden',\n    },\n}));\n\nexport const LatestNotes = () => {\n    const classes = useStyles();\n    const { identity } = useGetIdentity();\n    const {\n        data: contactNotesData,\n        ids: contactNotesIds,\n        loaded: contactNotesLoaded,\n    } = useGetList(\n        'contactNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    const {\n        data: dealNotesData,\n        ids: dealNotesIds,\n        loaded: dealNotesLoaded,\n    } = useGetList(\n        'dealNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    const {\n        data: companyNotesData,\n        ids: companyNotesIds,\n        loaded: companyNotesLoaded,\n    } = useGetList(\n        'companyNotes',\n        { page: 1, perPage: 5 },\n        { field: 'date', order: 'DESC' },\n        { sales_id: identity?.id },\n        { enabled: Number.isInteger(identity?.id) }\n    );\n    if (!contactNotesLoaded || !dealNotesLoaded || !companyNotesLoaded) {\n        return null;\n    }\n    // TypeScript guards\n    if (\n        !contactNotesIds ||\n        !contactNotesData ||\n        !dealNotesIds ||\n        !dealNotesData ||\n        !companyNotesIds ||\n        !companyNotesData\n    ) {\n        return null;\n    }\n\n    const allNotes = ([] as any[])\n        .concat(\n            contactNotesIds.map(id => ({\n                ...contactNotesData[id],\n                type: 'contactNote',\n            })),\n            dealNotesIds.map(id => ({\n                ...dealNotesData[id], \n                type: 'dealNote' \n            })),\n            companyNotesIds.map(id => ({\n                ...companyNotesData[id], \n                type: 'companyNote' \n            })),\n        )\n        .sort((a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf())\n        .slice(0, 5);\n\n    return (\n        <>\n            <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n                <Box ml={2} mr={2} display=\"flex\">\n                    <NoteIcon color=\"disabled\" fontSize=\"large\" />\n                </Box>\n                <Typography variant=\"h5\" color=\"textSecondary\">\n                    My Latest Notes\n                </Typography>\n            </Box>\n            <Card>\n                <CardContent>\n                    {allNotes.map(note => (\n                        <div\n                            id={`${note.type}_${note.id}`}\n                            key={`${note.type}_${note.id}`}\n                            className={classes.note}\n                        >\n                            <Typography color=\"textSecondary\" gutterBottom>\n                                on{' '}\n                                <NoteSource note={note} />\n                                , added{' '}\n                                {formatDistance(\n                                    new Date(note.date),\n                                    new Date(),\n                                    {\n                                        addSuffix: true,\n                                    }\n                                )}\n                            </Typography>\n                            <div className={classes.noteText}>\n                                <ReactMarkdown children={note.text} remarkPlugins={[remarkGfm]} />\n                            </div>\n                        </div>\n                    ))}\n                </CardContent>\n            </Card>\n        </>\n    );\n};\n\nconst NoteSource = ({ note }: any) => {\n    if (note.type === 'dealNote'){\n        return <Deal note={note} />;\n    }\n    else if (note.type === 'contactNote') {\n        return <Contact note={note} />;\n    }\n    else if (note.type === 'companyNote') {\n        return <Company note={note} />;\n    }\n    return null;\n};\n\nconst Deal = ({ note }: any) => (\n    <>\n        Deal{' '}\n        <ReferenceField\n            record={note}\n            source=\"deal_id\"\n            reference=\"deals\"\n            basePath=\"/deals\"\n            link=\"show\"\n        >\n            <TextField source=\"name\" variant=\"body1\" />\n        </ReferenceField>\n    </>\n);\n\nconst Contact = ({ note }: any) => (\n    <>\n        Contact{' '}\n        <ReferenceField\n            record={note}\n            source=\"contact_id\"\n            reference=\"contacts\"\n            basePath=\"/contacts\"\n            link=\"show\"\n        >\n            <FunctionField<ContactType>\n                variant=\"body1\"\n                render={contact =>\n                    contact ? `${contact.first_name} ${contact.last_name}` : ''\n                }\n            />\n        </ReferenceField>\n    </>\n);\n\nconst Company = ({ note }: any) => (\n    <>\n        Company{' '}\n        <ReferenceField\n            record={note}\n            source=\"company_id\"\n            reference=\"companies\"\n            basePath=\"/companies\"\n            link=\"show\"\n        >\n            <TextField source=\"name\" variant=\"body1\" />\n        </ReferenceField>\n    </>\n);\n","import React, { useState, memo } from \"react\";\nimport { \n    ComposableMap, \n    Geographies, \n    Geography, \n    ZoomableGroup,\n    Marker,\n    Annotation,\n} from 'react-simple-maps';\nimport { scaleQuantile } from 'd3-scale';\nimport { max } from 'd3-array';\nimport { geoCentroid } from \"d3-geo\";\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport ReactTooltip from \"react-tooltip\";\n\nimport { Country } from '../types';\n\nconst geoUrl =\n  \"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\";\n\nconst Map = memo(({setTooltipContent, countrySelected}: any) => {\n    const { data, ids, loaded } = useGetList<Country>(\n        'countries',\n        { perPage: 1000, page: 1 }\n    );\n    if (!loaded) return null;\n\n    const colorScale = scaleQuantile<string>()\n        .domain([0, max(ids.map(id => data[id].nb_companies))])\n        .range([\n            \"#e1f5fe\",\n            \"#b3e5fc\",\n            \"#81d4fa\",\n            \"#4fc3f7\",\n            \"#29b6f6\",\n            \"#03a9f4\",\n            \"#039be5\",\n            \"#0288d1\",\n            \"#0277bd\"\n        ]);\n\n    return (\n        <ComposableMap\n            data-tip=\"\"\n            projectionConfig={{\n                rotate: [-10, 0, 0],\n                scale: 850\n            }}\n        >\n            <ZoomableGroup\n                center={[25, 50]}\n                zoom={1}\n            >\n                <Geographies geography={geoUrl}>\n                    {({ geographies }) => (\n                        <>\n                            {geographies\n                            .map(geo => {\n                                const { ISO_A3 } = geo.properties;\n                                const cur = ids.find(id => data[id].iso3 === ISO_A3);\n                                return (\n                                    <Geography \n                                            key={geo.rsmKey} \n                                            geography={geo} \n                                            fill={cur ? colorScale(data[cur].nb_companies) : \"#D6D6DA\"}\n                                            stroke=\"#EAEAEC\"\n                                            onMouseEnter={() => {\n                                                const { NAME, POP_EST } = geo.properties;\n                                                const nb_companies = cur ? data[cur].nb_companies : 0;\n                                                setTooltipContent(`${NAME} - ${nb_companies}`);\n                                            }}\n                                            onMouseLeave={() => {\n                                                setTooltipContent(\"\");\n                                            }}\n                                            onClick={() => countrySelected(cur ? data[cur] : null)}\n                                        />\n                                );\n                            })}\n                            {/* {geographies.map(geo => {\n                                const centroid = geoCentroid(geo);\n                                const { ISO_A3 } = geo.properties;\n                                const cur = ids.find(id => data[id].iso3 === ISO_A3);\n                                return (\n                                    <g key={geo.rsmKey + \"-name\"}>\n                                        {cur &&\n                                            <Marker coordinates={centroid}>\n                                                <text y=\"2\" fontSize={9} textAnchor=\"middle\">\n                                                {data[cur].nicename}\n                                                </text>\n                                            </Marker>\n                                        }\n                                    </g>\n                                );\n                            })} */}\n                        </>\n                    )}\n                </Geographies>\n            </ZoomableGroup>\n        </ComposableMap>\n    );\n});\n\nexport const CompaniesMap = () => {\n    const [content, setContent] = useState(\"\");\n\n    return (\n        <div>\n            <Map setTooltipContent={setContent} />\n            <ReactTooltip>{content}</ReactTooltip>\n        </div>\n    );\n}","import * as React from 'react';\nimport { Box, Grid } from '@material-ui/core';\n\nimport { Welcome } from './Welcome';\nimport { DealsChart } from './DealsChart';\nimport { HotContacts } from './HotContacts';\nimport { LatestNotes } from './LatestNotes';\nimport { DealsPipeline } from './DealsPipeline';\nimport { CompaniesMap } from './CompaniesMap';\n\nexport const Dashboard = () => {\n    return (\n        <>\n            <Grid container spacing={1}>\n                <Grid item xs={12} sm={8}>\n                    <CompaniesMap />\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                    <HotContacts />\n                </Grid>\n                <Grid item xs={12}>\n                    <LatestNotes />\n                </Grid>\n            </Grid>\n        </>\n    );\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, Form } from 'react-final-form';\nimport { useLocation, Link as RouterLink  } from 'react-router-dom';\nimport {\n    Button,\n    CardActions,\n    CircularProgress,\n    TextField,\n    Grid,\n    CardContent,\n    Typography,\n    Link,\n    Container,\n} from '@material-ui/core';\nimport { Theme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n    useTranslate, \n    useNotify, \n    useLogin, \n    useSafeSetState, \n    useRedirect,\n    useAuthProvider,\n} from 'react-admin';\nimport axios from 'axios';\n\n\nconst baseURL = \"/auth\";\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    form: {\n        padding: '0 1em 1em 1em',\n    },\n    input: {\n        marginTop: '1em',\n    },\n    button: {\n        width: '100%',\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n    },\n    actions: {\n        padding: '0 1em 1em 1em',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n}));\n\nconst Input = ({\n    meta: { touched, error }, // eslint-disable-line react/prop-types\n    input: inputProps, // eslint-disable-line react/prop-types\n    ...props\n}: {\n    meta: any;\n    input: any;\n}) => (\n    <TextField\n        error={!!(touched && error)}\n        helperText={touched && error}\n        {...inputProps}\n        {...props}\n        fullWidth\n    />\n);\n\ninterface FormValues {\n    first_name: string;\n    last_name: string;\n    email: string;\n    username: string;\n    password: string;\n    confirm: string;\n}\n\nconst RegisterForm = ({ redirectTo }:\n    {redirectTo?: string | undefined;}) => {\n    const authProvider = useAuthProvider();\n    const [loading, setLoading] = useSafeSetState(false);\n    const translate = useTranslate();\n    const login = useLogin();\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const classes = useStyles();\n\n    const validate = ({ \n        first_name,\n        last_name,\n        email,\n        username, \n        password, \n        confirm \n    }: FormValues) => {\n        const errors = { \n            first_name: !first_name ? translate('ra.validation.required') : undefined, \n            last_name: !last_name ? translate('ra.validation.required') : undefined, \n            email: !email ? translate('ra.validation.required') : undefined, \n            username: !username ? translate('ra.validation.required') : undefined, \n            password: !password ? translate('ra.validation.required') : undefined, \n            confirm: password !== confirm ? 'Confirmation should match password': undefined\n        };\n        return errors;\n    };\n\n    interface ResponseType {\n        message: string;\n    }\n\n    const submit = async ({ \n        first_name,\n        last_name,\n        email,\n        username, \n        password,\n    }: FormValues) => {\n        setLoading(true);\n        try{\n            const response = await authProvider.register({ \n                    first_name,\n                    last_name,\n                    email,\n                    username, \n                    password\n                });\n        \n            setLoading(false)\n            login({ username, password }, redirectTo)\n        } catch (error: any) {\n            setLoading(false);\n            notify(error.message, 'warning');\n        }\n    };\n\n    return (\n        <Form\n            onSubmit={submit}\n            validate={validate}\n            render={({ handleSubmit }) => (\n                <form className={classes.form} onSubmit={handleSubmit} noValidate>\n                    <CardContent>\n                        <Container maxWidth=\"xs\">\n                        <Grid container spacing={2} >\n                            <Grid item xs={12} sm={6}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"first_name\"\n                                        name=\"first_name\"\n                                        component={Input}\n                                        label=\"First Name\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"last_name\"\n                                        name=\"last_name\"\n                                        component={Input}\n                                        label=\"Last Name\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"email\"\n                                        name=\"email\"\n                                        component={Input}\n                                        label=\"Email Address\"\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        autoFocus\n                                        id=\"username\"\n                                        name=\"username\"\n                                        component={Input}\n                                        label={translate('ra.auth.username')}\n                                        disabled={loading}\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        id=\"password\"\n                                        name=\"password\"\n                                        component={Input}\n                                        label={translate('ra.auth.password')}\n                                        type=\"password\"\n                                        disabled={loading}\n                                        autoComplete=\"current-password\"\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.input}>\n                                    <Field\n                                        id=\"confirm\"\n                                        name=\"confirm\"\n                                        component={Input}\n                                        label=\"Confirm Password\"\n                                        type=\"password\"\n                                        disabled={loading}\n                                        autoComplete=\"current-password\"\n                                        required\n                                    />\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </Container>\n                    </CardContent>\n                    <CardActions className={classes.actions}>\n                        <Button\n                            variant=\"contained\"\n                            type=\"submit\"\n                            color=\"primary\"\n                            disabled={loading}\n                            className={classes.button}\n                            fullWidth\n                        >\n                            {loading && (\n                                <CircularProgress\n                                    size={25}\n                                    thickness={2}\n                                />\n                            )}\n                            Register\n                        </Button>\n                        <Typography variant=\"body2\">Or</Typography>\n                        <Link\n                            color=\"textSecondary\"\n                            component={RouterLink}\n                            to=\"/login\"\n                            variant=\"body1\"\n                        >\n                            Login\n                        </Link>\n                    </CardActions>\n                </form>\n            )}\n        />\n    );\n};\n\nRegisterForm.propTypes = {\n    redirectTo: PropTypes.string,\n};\n\nexport default RegisterForm;","import React, { ReactNode, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { \n    Card, \n    CardContent, \n    Theme, \n    Avatar,\n    Grid,\n    Link,\n} from '@material-ui/core';\nimport {\n    Notification,\n} from 'react-admin';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport { lightTheme } from '../layout/themes';\n\nimport RegisterForm from './RegisterForm';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n        main: {\n            display: 'flex',\n            flexDirection: 'column',\n            minHeight: '100vh',\n            // height: '1px',\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundRepeat: 'no-repeat',\n            backgroundSize: 'cover',\n            backgroundImage:\n                'radial-gradient(circle at 50% 50%, #313264 0%, #00023b 50%, #00023b 100%)',\n        },\n        card: {\n            minWidth: 300,\n            // marginTop: '6em',\n        },\n        avatar: {\n            margin: '1em',\n            display: 'flex',\n            justifyContent: 'center',\n        },\n        icon: {\n            backgroundColor: theme.palette.secondary.main,\n        },\n        hint: {\n            marginTop: '1em',\n            display: 'flex',\n            justifyContent: 'center',\n            color: theme.palette.grey[500],\n        },\n    }),\n    { name: 'Register' }\n);\n\nconst Register = () => {\n    const classes = useStyles();\n    return (\n            <div className={classes.main}>\n                <Card className={classes.card}>\n                    <div className={classes.avatar}>\n                        <Avatar className={classes.icon}>\n                            <ExitToAppIcon />\n                        </Avatar>\n                    </div>\n                    <div className={classes.hint}>\n                                Register to Assistor.\n                            </div>\n                    <RegisterForm />\n                </Card>\n                <Notification />\n            </div>\n    );\n}\n\nconst RegisterWithTheme = (props: any) => (\n    <ThemeProvider theme={createTheme(lightTheme)}>\n        <Register {...props} />\n    </ThemeProvider>\n);\n\nexport default RegisterWithTheme;","import { ThemeName } from '../types';\n\nexport const CHANGE_THEME = 'CHANGE_THEME';\n\nexport const changeTheme = (theme: ThemeName) => ({\n    type: CHANGE_THEME,\n    payload: theme,\n});","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport BluetoothIcon from '@material-ui/icons/Bluetooth';\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\n\nimport { changeTheme } from './actions';\nimport { AppState } from '../types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      maxWidth: 360,\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n);\n\nconst GeneralSettings = () => {\n    const classes = useStyles();  \n    const theme = useSelector((state: AppState) => state.theme);\n    const dispatch = useDispatch();\n\n    const handleDarkModeToggle = (event: React.ChangeEvent<HTMLInputElement>, checked: boolean) => {\n        dispatch(changeTheme(checked ? 'dark': 'light'));\n    };\n\n    return (\n    <List subheader={<ListSubheader>Settings</ListSubheader>} className={classes.root}>\n      <ListItem>\n        <ListItemIcon>\n          <Brightness4Icon />\n        </ListItemIcon>\n        <ListItemText primary=\"Dark mode\" />\n        <ListItemSecondaryAction>\n          <Switch\n            edge=\"end\"\n            onChange={handleDarkModeToggle}\n            checked={theme === 'dark'}\n            inputProps={{ 'aria-labelledby': 'switch-list-label-dark-mode' }}\n          />\n        </ListItemSecondaryAction>\n      </ListItem>\n    </List>\n    );\n};\n\nexport default GeneralSettings;","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Icon, IconButton, InputAdornment, TextField , Button, Paper, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle} from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { Identifier, useDataProvider, useGetIdentity, useGetOne, useNotify, useUpdate } from 'react-admin';\nimport Frame from 'react-frame-component';\nimport SendIcon from '@material-ui/icons/Send';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { ControlCameraOutlined } from '@material-ui/icons';\nimport PinVerificationDialog from '../linkedin/PinVerificationDialog';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      maxWidth: 360,\n      backgroundColor: theme.palette.background.paper,\n    },\n    iframe: {\n        width: '100%',\n        minHeight: '1200px',\n    },\n    actionItem: {\n        display: 'flex',\n        justifyContent: 'center',\n        gap: '1em',\n    },\n    dialog: {\n        minWidth: '20em',\n    }\n  }),\n);\n\nconst UserSettings = () => {\n    const classes = useStyles();  \n    const { identity, loaded } = useGetIdentity();\n    // const { data, loading: userLoading, error } = useGetOne('sales', identity ? identity.id : 0, { enabled: loaded });\n    \n    if (!loaded) return null;\n\n    // setUsername(data?.linkedin_username);\n\n    \n    return (\n    <div \n        className={classes.root}\n    >\n        {identity && <LinkedinSettings userId={identity.id}/>}\n    </div>\n    );\n};\n\nconst LinkedinSettings = ({userId}: {userId: Identifier}) => {\n    const classes = useStyles();  \n    const notify = useNotify();\n    const dataProvider = useDataProvider();\n    const [open, setOpen] = React.useState(false);\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const { data, loaded, error } = useGetOne(\n        'sales', \n        userId, \n        { onSuccess: () => setUsername(data?.linkedin_username)}\n    );\n    const [update, { loading }] = useUpdate();\n\n\n    if(!loaded) return <LinearProgress />\n\n    const handleUpdate = async () => {\n        try {\n            await update(\n                'sales',\n                userId,\n                { \n                    linkedin_username: username,\n                    linkedin_password: password,\n                },\n                data,\n            );\n\n            notify('Linkedin account updated', 'info');\n        } catch (error: any) {\n            const message = error.message;\n            notify('Linkedin account failed', 'warning');\n            console.log(error);\n        }\n        \n    }\n\n    const handleLogin = async () => {\n        try {\n            await dataProvider.loginLinkedin();\n            notify('Linkedin login successfull', 'info');\n        } catch (error: any) {\n            const message = error.message;\n            notify('Linkedin login failed', 'warning');\n            setOpen(true);\n        }\n    }\n\n    return (\n        <>\n        <List subheader={<ListSubheader>LinkedIn Account</ListSubheader>}>\n            <ListItem>\n                <TextField \n                    label=\"Username\" \n                    value={username}\n                    onChange={e => setUsername(e.target.value)}\n                    InputProps={{\n                        startAdornment: (\n                            <InputAdornment position=\"start\" disablePointerEvents>\n                                <AccountBoxIcon />\n                            </InputAdornment>\n                        ),\n                    }}\n                    style={{ width: '100%'}}\n                />\n            </ListItem>\n            <ListItem>\n                <TextField \n                    label=\"Password\" \n                    type=\"password\"\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    InputProps={{\n                        startAdornment: (\n                            <InputAdornment position=\"start\" disablePointerEvents>\n                                <LockIcon />\n                            </InputAdornment>\n                        ),\n                    }}\n                    style={{ width: '100%'}}\n                />\n            </ListItem>\n            <ListItem\n                className={classes.actionItem}\n            >\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    endIcon={<SendIcon />}\n                    onClick={handleUpdate}\n                    disabled={loading}\n                >\n                    Send\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    endIcon={<LockOpenIcon />}\n                    onClick={handleLogin}\n                    disabled={loading}\n                >\n                    Login\n                </Button>\n            </ListItem>\n        </List>\n        <PinVerificationDialog open={open} onClose={() => setOpen(false)} />\n        </>\n    );\n};\n\n\nexport default UserSettings;","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { useTranslate, useLocale, useSetLocale, Title } from 'react-admin';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { changeTheme } from './actions';\nimport { AppState } from '../types';\nimport { \n    Card,\n    CardContent,\n    Tabs, \n    Tab,\n} from '@material-ui/core';\nimport GeneralSettings from './GeneralSettings';\nimport UserSettings from './UserSettngs';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        flexGrow: 1,\n        backgroundColor: theme.palette.background.paper,\n        display: 'flex',\n    },\n    tabPanel: {\n        flexGrow: 1,\n    },\n    tabs: {\n        borderRight: `1px solid ${theme.palette.divider}`,\n    },\n}));\n\nfunction a11yProps(index: any) {\n    return {\n        id: `vertical-tab-${index}`,\n        'aria-controls': `vertical-tabpanel-${index}`,\n    };\n}\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n    const classes = useStyles();\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`wrapped-tabpanel-${index}`}\n            aria-labelledby={`wrapped-tab-${index}`}\n            {...other}\n            className={classes.tabPanel}\n        >\n            {children}\n        </div>\n    );\n};\n\nconst Configuration = () => {\n    const classes = useStyles();\n    const [value, setValue] = useState(0);\n\n    const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n        setValue(newValue);\n      };\n\n    return (\n        <Card>\n            <CardContent className={classes.root}>\n                <Tabs\n                    orientation=\"vertical\"\n                    variant=\"scrollable\"\n                    value={value}\n                    onChange={handleChange}\n                    aria-label=\"Vertical tabs example\"\n                    className={classes.tabs}\n                >\n                    <Tab label=\"General\" {...a11yProps(0)} />\n                    <Tab label=\"User\" {...a11yProps(1)} />\n                </Tabs>\n                <TabPanel value={value} index={0}>\n                    <GeneralSettings />\n                </TabPanel>\n                <TabPanel value={value} index={1}>\n                    <UserSettings />\n                </TabPanel>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default Configuration;\n\n","import * as React from \"react\";\nimport { RouteWithoutLayout } from 'react-admin';\nimport { Route } from 'react-router-dom';\nimport Register from './auth/RegisterPage';\nimport Configuration from './configuration/Configuration';\n\nexport const customRoutes = [\n    <RouteWithoutLayout exact path=\"/register\" component={Register} />,\n    <Route exact path=\"/configuration\" render={() => <Configuration />} />,\n];","import { Reducer } from 'redux';\nimport { CHANGE_THEME, changeTheme } from './configuration/actions';\nimport { ThemeName } from './types';\n\ntype State = ThemeName;\ntype Action =\n    | ReturnType<typeof changeTheme>\n    | { type: 'OTHER_ACTION'; payload?: any };\n\nconst themeReducer: Reducer<State, Action> = (\n    previousState = 'light',\n    action\n) => {\n    if (action.type === CHANGE_THEME) {\n        return action.payload;\n    }\n    return previousState;\n};\n\nexport default themeReducer;","import { TranslationMessages } from 'react-admin';\nimport englishMessages from 'ra-language-english';\n\nconst customEnglishMessages: TranslationMessages = {\n    ...englishMessages,\n\n};\n\nexport default customEnglishMessages;","import * as React from 'react';\nimport { Admin, Resource, ListGuesser, EditGuesser, ShowGuesser, defaultTheme } from 'react-admin';\nimport {\n    unstable_createMuiStrictModeTheme,\n    createTheme,\n} from '@material-ui/core/styles';\nimport polyglotI18nProvider from 'ra-i18n-polyglot';\n\nimport { dataProvider } from './dataProvider';\nimport { authProvider } from './authProvider';\nimport { Login, Layout } from './layout';\nimport contacts from './contacts';\nimport companies from './companies';\nimport products from './products';\nimport tasks from './tasks';\nimport productfamiliess from './productFamilies';\nimport deals from './deals';\nimport { Dashboard } from './dashboard/Dashboard';\nimport { customRoutes } from './customRoutes';\nimport themeReducer from './themeReducer';\n// import Login from './Login'\nimport productFamilies from './productFamilies';\nimport englishMessages from './i18n/en';\n\n// FIXME MUI bug https://github.com/mui-org/material-ui/issues/13394\nconst theme =\n    process.env.NODE_ENV !== 'production'\n        ? unstable_createMuiStrictModeTheme(defaultTheme)\n        : createTheme(defaultTheme);\n\nconst i18nProvider = polyglotI18nProvider(locale => {\n    if (locale === 'fr') {\n        return import('./i18n/fr').then(messages => messages.default);\n    }\n    \n    if (locale === 'ja') {\n        return import('./i18n/ja').then(messages => messages.default);\n    }\n\n    // Always fallback on english\n    return englishMessages;\n}, 'en');\n\nconst App = () => (\n    <Admin\n        customRoutes={customRoutes}\n        dataProvider={dataProvider}\n        authProvider={authProvider}\n        loginPage={Login}\n        layout={Layout}\n        dashboard={Dashboard}\n        customReducers={{ theme: themeReducer }}\n        i18nProvider={i18nProvider}\n        disableTelemetry\n    >\n        <Resource name=\"deals\" {...deals} />\n        <Resource name=\"contacts\" {...contacts} />\n        <Resource name=\"companies\" {...companies} />\n        <Resource name=\"products\" {...products} />\n        <Resource name=\"productProperties\" />\n        <Resource name=\"propertyTypes\" />\n        <Resource name=\"contactNotes\" />\n        <Resource name=\"companyNotes\" />\n        <Resource name=\"productNotes\" />\n        <Resource name=\"dealNotes\" />\n        <Resource name=\"productFamilies\" {...productFamilies} />\n        <Resource name=\"tasks\" {...tasks} />\n        <Resource name=\"sales\" list={ListGuesser} />\n        <Resource name=\"tags\" list={ListGuesser} />\n        <Resource name=\"countries\" list={ListGuesser} />\n    </Admin>\n);\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import { CssBaseline } from '@material-ui/core';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <CssBaseline />\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}